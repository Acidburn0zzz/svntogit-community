# $Id$
# Maintainer: Jaroslav Lichtblau <dragonlord@aur.archlinux.org>
# Contributor: Michele Sch√§uble <mschaeuble@swissonline.ch>

pkgname=josm
pkgver=3751
pkgrel=3
pkgdesc="An editor for OpenStreetMap written in Java"
arch=('any')
url="http://josm.openstreetmap.de/"
license=('GPL')
depends=('java-runtime')
changelog=$pkgname.changelog
source=(http://josm.openstreetmap.de/download/$pkgname-tested.jar \
        $pkgname.desktop)
sha256sums=('f55b30f9823aa0e377fbddeeff9d836505f06d786b57ddb37c57220701cefe03'
            'edfb2cbf2aa7e6582b4d43cd402ea58be7990702e5ffffc3ff7afdc518c28ca9')

build() {
  cd ${srcdir}
  
  install -D -m644 ${pkgname}-tested.jar ${pkgdir}/usr/share/java/josm/josm.jar

#.desktop and icon file
  install -D -m644 ${srcdir}/${pkgname}.desktop ${pkgdir}/usr/share/applications/${pkgname}.desktop
  install -D -m644 images/logo.png ${pkgdir}/usr/share/pixmaps/$pkgname.png

#executable file
  install -d ${pkgdir}/usr/bin
  echo "#!/bin/sh" > ${pkgdir}/usr/bin/$pkgname
  echo CLASSPATH="/usr/share/java/josm/josm.jar" >> ${pkgdir}/usr/bin/$pkgname
  echo java -cp \"\${CLASSPATH}\" org.openstreetmap.josm.gui.MainApplication \"\$@\" \
    >> ${pkgdir}/usr/bin/$pkgname
  chmod 755 ${pkgdir}/usr/bin/$pkgname
}
