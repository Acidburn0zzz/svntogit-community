# $Id$
# Maintainer: Jaroslav Lichtblau <dragonlord@aur.archlinux.org>
# Contributor: Giovanni Scafora <giovanni@archlinux.org>
# Contributor: Jeff Mickey <j@codemac.net>

pkgname=amsn
pkgver=0.98.1
pkgrel=3
pkgdesc="MSN client written in Tcl/Tk"
arch=('i686' 'x86_64')
url="http://amsn.sourceforge.net/"
license=('GPL2')
depends=('imlib' 'libjpeg' 'libx11' 'libpng' 'libsm' 'libtiff' 'perl' 'python' 'tk>=8.5.7' 'tls')
optdepends=('farsight2: for video conferencing')
makedepends=('pkgconfig' 'patch' 'farsight2')
source=(http://downloads.sourceforge.net/sourceforge/${pkgname}/${pkgname}-${pkgver}.tar.bz2 \
        $pkgname-jpeg7.patch)
md5sums=('2ef1d32324d3f9d85795433414abd51b'
         '0e26454d4ab646f444517f089da81ac6')

build() {
  cd ${srcdir}/${pkgname}-${pkgver}

  patch -Np0 -i ${srcdir}/$pkgname-jpeg7.patch || return 1

  ./configure --prefix=/usr
  make || return 1
  make DESTDIR=${pkgdir} install

#fix links
  cd ${pkgdir}/usr/bin || return 1
  rm * || return 1
  ln -sf /usr/share/amsn/amsn amsn || return 1
  ln -sf /usr/share/amsn/amsn-remote amsn-remote || return 1
  ln -sf /usr/share/amsn/amsn-remote-CLI amsn-remote-CLI || return 1
}
