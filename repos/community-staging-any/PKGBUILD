# $Id$
# Maintainer: Chris Brannon <cmbrannon79@gmail.com>
# Contributor: Douglas Soares de Andrade <douglas@archlinux.org>
# Contributor: Mario Danic <mario.danic@gmail.com>

pkgname=python-paramiko
pkgver=1.7.6
pkgrel=2
pkgdesc="Python module that implements the SSH2 protocol"
url="http://www.lag.net/paramiko/"
license=('LGPL')
arch=('any')
depends=(python2 'pycrypto')
replaces=('paramiko')
conflicts=('paramiko')
provides=('paramiko')
source=(http://www.lag.net/paramiko/download/paramiko-$pkgver.tar.gz)

build() {
  cd "$srcdir/paramiko-$pkgver"

  python2 setup.py install --root="$pkgdir" --optimize=1
}

package() {
  install -Dm644 "$srcdir/paramiko-$pkgver/README" \
    "$pkgdir/usr/share/doc/$pkgname/README"
  cp -R "$srcdir/paramiko-$pkgver/docs" \
    "$pkgdir/usr/share/doc/$pkgname/html"
  cp -R "$srcdir/paramiko-$pkgver/demos" \
    "$pkgdir/usr/share/doc/$pkgname/"
  find "$pkgdir" -name '*.py' -print0 |xargs -0 \
    sed -i -e 's,^#!/usr/bin/env python$,#!/usr/bin/env python2,' \
    -e 's,^#!/usr/bin/python$,#!/usr/bin/python2,'
}

md5sums=('fa144ab46f1dc639b05ab948c30efac4')
