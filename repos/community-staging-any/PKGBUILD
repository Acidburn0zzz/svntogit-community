# $Id$
# Maintainer: Jaroslav Lichtblau <dragonlord@aur.archlinux.org>
# Contributor: Callan Barrett <wizzomafizzo@gmail.com>
# Contributor: mucknert <mucknert@gmx.net>

pkgname=offlineimap
pkgver=6.2.0.2
pkgrel=1
pkgdesc='A powerful IMAP/Maildir synchronization tool'
arch=('any')
url='http://github.com/jgoerzen/offlineimap/wiki'
license=('GPL')
depends=('python2')
noextract=($pkgname.1.gz)
changelog=$pkgname.changelog
source=($pkgname-$pkgver.tar.gz::http://github.com/jgoerzen/$pkgname/tarball/debian/$pkgver \
        $pkgname.1.gz)
md5sums=('e1a01b6b1c1a70a1afaefb0a20634bc1'
         '3d0c7ac21cbabe431d0962a014ddb37b')

build() {
  cd ${srcdir}/jgoerzen-${pkgname}-0f1a667

  python2 setup.py build install --root=${pkgdir}

  install -D -m644 $pkgname.conf.minimal ${pkgdir}/usr/share/$pkgname/$pkgname.conf.minimal
  install -D -m644 $pkgname.conf ${pkgdir}/usr/share/$pkgname/$pkgname.conf

#man page doesn't convert: http://lists.complete.org/offlineimap@complete.org/2008/05/msg00018.html.gz
#extracted from debian package: http://ftp.debian.org/debian/pool/main/o/offlineimap/offlineimap_6.2.0_all.deb
  install -D -m644 ${srcdir}/$pkgname.1.gz ${pkgdir}/usr/share/man/man1/$pkgname.1.gz
}
