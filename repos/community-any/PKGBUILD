# Maintainer: Filipe La√≠ns (FFY00) <lains@archlinux.org>

pkgname=ansible-bender
pkgver=0.8.1
pkgrel=1
pkgdesc='Tool which bends containers using Ansible playbooks and turns them into container images'
arch=('any')
url='https://github.com/ansible-community/ansible-bender'
license=('MIT')
depends=('ansible' 'python-yaml' 'python-tabulate' 'python-jsonschema')
optdepends=('podman: podman backend'
            'buildah: buildah backend')
makedepends=('python-setuptools-scm' 'git')
#source=("$pkgname-$pkgver.tar.gz::$url/archive/$pkgver.tar.gz")
source=("git+$url?tag=$pkgver")
sha512sums=('SKIP')

build() {
  #cd $pkgname-$pkgver
  cd $pkgname

  python setup.py build
}

package() {
  #cd $pkgname-$pkgver
  cd $pkgname

  python setup.py install --root="$pkgdir" --optimize=1 --skip-build

  install -Dm 644 LICENSE "$pkgdir"/usr/share/licenses/$pkgname/LICENSE
}

