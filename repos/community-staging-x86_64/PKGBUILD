# $Id$
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Contributor: Anders Bergh <anders1@gmail.com>

pkgname=luasocket
pkgver=2.0.2
pkgrel=6
pkgdesc='Networking support library for the Lua language'
arch=('i686' 'x86_64')
url='http://www.cs.princeton.edu/~diego/professional/luasocket/'
license=('MIT')
depends=(lua)
source=(http://luaforge.net/frs/download.php/2664/luasocket-$pkgver.tar.gz
	luasocket-arch.patch
	luasocket-unixsocket.patch
	lua52.patch)
md5sums=('41445b138deb7bcfe97bff957503da8e'
         'cea410bb5d632655aeb213c07adc7790'
         '8d116bb70bd7a2fa15cbe949d4cfc35e'
         '6f9c6416dd70a7bc1a867003f08c2752')

build() {
  cd $srcdir/$pkgname-$pkgver

  patch -Np1 -i $srcdir/luasocket-arch.patch
  patch -Np1 -i $srcdir/luasocket-unixsocket.patch
  patch -Np1 -i $srcdir/lua52.patch

  make
}

package() {
  cd $srcdir/$pkgname-$pkgver
  make DESTDIR=$pkgdir/ install
  install -D -m0644 LICENSE $pkgdir/usr/share/licenses/$pkgname/LICENSE
}
