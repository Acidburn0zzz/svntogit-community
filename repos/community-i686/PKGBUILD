# $Id$
# Maintainer:
# Contributor: Angel 'angvp' Velasquez <angvp[at]archlinux.com.ve>
# Contributor: William Rea <sillywilly@gmail.com>

pkgname=python-reportlab
_origname=reportlab
pkgver=2.5
pkgrel=2
pkgdesc="A proven industry-strength PDF generating solution"
arch=('i686' 'x86_64')
depends=('python2' 'freetype2')
license=('CUSTOM')
source=(http://www.reportlab.org/ftp/${_origname}-$pkgver.tar.gz)
url="http://www.reportlab.org/rl_toolkit.html"
md5sums=('cdf8b87a6cf1501de1b0a8d341a217d3')

build() {
    cd $srcdir/${_origname}-$pkgver

    # python2 fix
    for file in src/reportlab/graphics/widgets/table.py src/reportlab/lib/normalDate.py \
                src/reportlab/pdfgen/pycanvas.py; do
        sed -i 's_#!.*/usr/bin/env python_#!/usr/bin/env python2_' $file
    done

    python2 setup.py install --root=$pkgdir --optimize=1
    install -D -m644 LICENSE.txt $pkgdir/usr/share/licenses/$pkgname/license.txt
}
