# $Id: PKGBUILD,v 1.17 2009/04/09 09:51:55 sergej Exp $
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Contributor: Sergej Pupykin <pupykin.s+arch@gmail.com>

pkgname=mediawiki
pkgver=1.14.0
pkgrel=1
pkgdesc="MediaWiki engine"
arch=(i686 x86_64)
url="http://www.mediawiki.org/wiki/MediaWiki"
license=("GPL")
depends=(php)
optdepends=('texvc: for math rendering')
backup=(srv/http/mediawiki/.htaccess)
install=mediawiki.install
source=(http://download.wikimedia.org/mediawiki/1.14/mediawiki-$pkgver.tar.gz)
md5sums=('36bfd924e92b61a6f5fe70c6bc8e5aac')

build() {
  cd $startdir/src
  install -d -m0755 $startdir/pkg/srv/http && \
  mv $pkgname-$pkgver $startdir/pkg/srv/http/mediawiki && \
  ln -s /usr/bin/texvc $startdir/pkg/srv/http/mediawiki/math/texvc && \
  chmod 0777 $startdir/pkg/srv/http/mediawiki/images && \
  echo "deny from all" >> $pkgdir/srv/http/mediawiki/.htaccess
}
