# $Id$
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Contributor: Anders Bergh <anders1@gmail.com>

pkgname=luasocket
pkgver=2.0.2
pkgrel=4
pkgdesc="Luasocket is the most comprehensive networking support library for the Lua language."
arch=('i686' 'x86_64')
url="http://www.cs.princeton.edu/~diego/professional/luasocket/"
license=('MIT')
depends=(lua)
source=(http://luaforge.net/frs/download.php/2664/luasocket-$pkgver.tar.gz
	lua-license.html::http://www.lua.org/copyright.html
	luasocket-arch.patch
	luasocket-unixsocket.patch)
md5sums=('41445b138deb7bcfe97bff957503da8e'
         '54af76b72c22a75aa468cb688017e78e'
         '3270f42ff374f230c6450f49132f8625'
         '8d116bb70bd7a2fa15cbe949d4cfc35e')

build() {
  cd "$srcdir/$pkgname-$pkgver"
  patch -p1 < $srcdir/luasocket-arch.patch
  patch -p1 < $srcdir/luasocket-unixsocket.patch
  make
  make DESTDIR="$pkgdir" install
  install -D -m0644 $srcdir/lua-license.html $pkgdir/usr/share/licenses/$pkgname/lua-license.html
}
