# $Id$
# Maintainer: Jaroslav Lichtblau <dragonlord@aur.archlinux.org>

pkgname=subtitleeditor
pkgver=0.39.0
pkgrel=1
pkgdesc="A GTK+2 tool to edit subtitles for GNU/Linux/*BSD"
arch=('i686' 'x86_64')
url="http://home.gna.org/subtitleeditor/"
license=('GPL3')
depends=('enchant' 'gstreamer0.10-base-plugins' 'gstreamer0.10-good-plugins' 'gstreamermm' 'gtk2' 'gtkmm' 'hicolor-icon-theme' 'libsigc++' 'libxml++' 'xdg-utils')
makedepends=('intltool')
optdepends=('gstreamer0.10-ffmpeg: to be able to view movies inside the subtitleeditor'
            'gstreamer0.10-ugly-plugins: to be able to view movies inside the subtitleeditor'
            'gstreamer0.10-fluendo: to be able to view movies inside the subtitleeditor')
options=('!libtool')
install=$pkgname.install
changelog=$pkgname.changelog
source=(http://download.gna.org/$pkgname/0.39/$pkgname-$pkgver.tar.gz
	fix-taking-address-of-temporary-error.patch)
md5sums=('17666e652edd27abfd3104a82385f6a8'
         '13e4fde005a9017da9fd24a5c2b928ed')

build() {
  cd ${srcdir}/$pkgname-$pkgver

  # fix building with gcc-4.6.0, taken from upstream 
  patch -Np1 -i "../fix-taking-address-of-temporary-error.patch"

  ./configure --prefix=/usr
  make
}
package() {
  cd ${srcdir}/$pkgname-$pkgver

  make DESTDIR=${pkgdir} install
}
