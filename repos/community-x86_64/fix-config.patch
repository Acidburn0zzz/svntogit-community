diff -wbBur prosody-0.7.0/prosody.cfg.lua.dist prosody-0.7.0.my/prosody.cfg.lua.dist
--- prosody-0.7.0/prosody.cfg.lua.dist	2010-06-13 00:23:02.000000000 +0000
+++ prosody-0.7.0.my/prosody.cfg.lua.dist	2011-01-27 16:09:24.000000000 +0000
@@ -21,6 +21,8 @@
 -- (see http://prosody.im/doc/creating_accounts for info)
 -- Example: admins = { "user1@example.com", "user2@example.net" }
 admins = { }
+daemonize = true
+pidfile = "/var/run/prosody/prosody.pid"
 
 -- Enable use of libevent for better performance under high load
 -- For more information see: http://prosody.im/doc/libevent
@@ -54,7 +56,7 @@
 		"register"; -- Allow users to register on this server using a client and change passwords
 
 	-- Other specific functionality
-		--"posix"; -- POSIX functionality, sends server to background, enables syslog, etc.
+		"posix"; -- POSIX functionality, sends server to background, enables syslog, etc.
 		--"console"; -- Opens admin telnet interface on localhost port 5582
 		--"bosh"; -- Enable BOSH clients, aka "Jabber over HTTP"
 		--"httpserver"; -- Serve static files from a directory over HTTP
@@ -90,7 +92,7 @@
 
 -- Logging configuration
 -- For advanced logging see http://prosody.im/doc/logging
-log = "prosody.log";
+log = "/var/log/prosody/prosody.log";
 debug = false; -- Log debug messages?
 
 ----------- Virtual hosts -----------
