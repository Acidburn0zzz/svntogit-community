# Maintainer: Filipe La√≠ns (FFY00) <lains@archlinux.org>

pkgname=codec2
pkgver=1.3
pkgrel=1
pkgdesc='Low bit rate open source speech codec, and FDMDV HF modem'
arch=('x86_64')
license=('GPL2')
url='https://rowetel.com/codec2.html'
depends=('portaudio' 'hamlib' 'wxgtk3' 'speex')
makedepends=('subversion' 'cmake')
source=("$pkgname-$pkgver::svn+https://svn.code.sf.net/p/freetel/code/$pkgname/tags/$pkgver")
sha512sums=('SKIP')

build() {
  mkdir -p $pkgname-$pkgver/build
  cd $pkgname-$pkgver/build

  cmake .. \
  	-DCMAKE_BUILD_TYPE=Release \
  	-DCMAKE_INSTALL_PREFIX=/usr \
  	-DwxWidgets_CONFIG_EXECUTABLE=/usr/bin/wx-config-gtk3

#  	-DCMAKE_INSTALL_LIBDIR:PATH=lib

  make
}

package() {
  cd $pkgname-$pkgver/build

  make DESTDIR="$pkgdir" install

  install -Dm 644 ../USER_MANUAL.txt "$pkgdir"/usr/share/doc/codec2/USER_MANUAL.txt
}
