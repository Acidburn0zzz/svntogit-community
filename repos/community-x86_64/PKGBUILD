# $Id: PKGBUILD,v 1.23 2009/06/23 13:11:09 wonder Exp $
# Contributor: Pierre Schmitz <pierre@archlinux.de>
# Maintainer: Mikko Seppälä <t-r-a-y@mbnet.fi>
_pkgsourcename=nvidia-utils
pkgname=lib32-$_pkgsourcename
pkgver=185.18.14
pkgrel=1
pkgdesc="NVIDIA drivers utilities and libraries."
arch=(x86_64)
url="http://www.nvidia.com/"
license=('custom')
groups=('lib32')
depends=('lib32-libxext')
conflicts=('lib32-libgl' 'lib32-ati-fglrx-utils')
provides=('lib32-libgl')
source=(ftp://ftp.archlinux.org/extra/os/i686/$_pkgsourcename-$pkgver-$pkgrel-i686.pkg.tar.gz)
md5sums=('e6b01935f3340c1b335b219fbd3ef758')

build() {
	cd $startdir/src
	mkdir -p $startdir/pkg/opt/lib32/usr/lib
	cp -dp usr/lib/*.so* $startdir/pkg/opt/lib32/usr/lib
	
	# fix wrnog links
	cd $startdir/pkg/opt/lib32/usr/lib
	ln -sf libGL.so.$pkgver libGL.so
	ln -sf libGL.so.$pkgver libGL.so.1
	ln -sf libGLcore.so.$pkgver libGLcore.so.1
	ln -sf libnvidia-cfg.so.$pkgver libnvidia-cfg.so.1
	ln -sf libnvidia-tls.so.$pkgver libnvidia-tls.so.1
}
