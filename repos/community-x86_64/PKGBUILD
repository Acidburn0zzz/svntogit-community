# $Id$
# Maintainer: Jaroslav Lichtblau <dragonlord@aur.archlinux.org>

pkgname=fillets-ng
pkgver=0.9.2
pkgrel=1
pkgdesc="A port of the wonderful puzzle game Fish Fillets"
url="http://fillets.sf.net/"
arch=('i686' 'x86_64')
license=('GPL')
depends=('fillets-ng-data' 'lua' 'fribidi' 'gcc-libs' 'libx11' 'sdl_mixer' 'sdl_ttf' 'sdl_image' 'desktop-file-utils')
makedepends=('patch')
install=$pkgname.install
source=(http://downloads.sourceforge.net/fillets/$pkgname-$pkgver.tar.gz \
        http://fillets.sourceforge.net/img/icon.png \
        $pkgname.desktop \
        $pkgname-gccfix.diff)

md5sums=('24578ad842a242439b893ad949556c28'
         '746a6f71ba1a6b5a918f04448b3db7eb'
         '803617e630043e49807b380cd28803dc'
         '7855d4edab2870d09832d3c501b3c063')

build() {
  cd ${srcdir}/$pkgname-$pkgver

  patch -Np0 -i ${srcdir}/$pkgname-gccfix.diff || return 1

  ./configure --prefix=/usr --datadir=/usr/share/$pkgname
  make || return 1
  make DESTDIR=${pkgdir} install

#.desktop and icon files
  install -D -m644 ${srcdir}/icon.png \
    ${pkgdir}/usr/share/pixmaps/$pkgname.png || return 1
  install -D -m644 ${srcdir}/$pkgname.desktop \
    ${pkgdir}/usr/share/applications/$pkgname.desktop || return 1
}
