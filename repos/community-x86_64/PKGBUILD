# Maintainer: Christian Rebischke <chris.rebischke@archlinux.org>

pkgname=iwd
pkgver=0.2
pkgrel=2
pkgdesc='Internet Wireless Daemon'
arch=('x86_64')
url='https://git.kernel.org/cgit/network/wireless/iwd.git/'
license=('LGPL')
depends=('glibc')
source=("https://www.kernel.org/pub/linux/network/wireless/iwd-${pkgver}.tar"{.xz,.sign}
				'iwd@.service')
sha512sums=('f4d038ad9aaef51c352be1bb638d4495be888ed3c6b63c5d321be4d4f1ed17eb01f311872ce70fa2a56c37355a7151163426b5e483df5aec8ade2ac72ac1b3a8'
            'SKIP'
						'SKIP')
validpgpkeys=('E932D120BC2AEC444E558F0106CA9F5D1DCF2659')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
	./configure --prefix=/usr \
	--sysconfdir=/etc \
	--libexecdir=/usr/lib/iwd \
	--localstatedir=/var \
	--disable-optimization --enable-debug
  make
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  make install DESTDIR="${pkgdir}"
	rm "${pkgdir}/usr/lib/systemd/system/iwd.service"
	install -Dm644 "${srcdir}/iwd@.service" "${pkgdir}/usr/lib/systemd/system/iwd@.service"
}

# vim: set ts=2 sw=2 ft=sh noet:
