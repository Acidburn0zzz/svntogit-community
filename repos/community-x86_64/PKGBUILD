# Maintainer: David Runge <dvzrv@archlinux.org>

pkgname=jacktrip
pkgver=1.2.2
pkgrel=1
pkgdesc="Multi-machine audio network performance over the Internet"
arch=('x86_64')
url="https://github.com/jacktrip/jacktrip"
license=('MIT')
groups=('pro-audio')
depends=('gcc-libs' 'glibc' 'qt5-base')
makedepends=('jack')
source=("${pkgname}-${pkgver}.tar.gz::https://github.com/${pkgname}/${pkgname}/archive/v${pkgver}.tar.gz")
sha512sums=('5183e99d392afea74c70fb2e6519150327a7db1f2bc7f81a97b8b1916e059eb2fcb36dd433cf90695060af6156d25ace347873570dd9702d2380e38be6e2bf7e')
b2sums=('33d08cb796d8d823729821454ff4b3fcc60c48385731cd4177f194fde675240d66b141ee2252c45ede76cdadcd9cd7a8a90b62de56fd3f3b8ec3b408a41efcfa')

build() {
  cd "${pkgname}-${pkgver}/src"
  qmake-qt5 -spec linux-g++ "${pkgname}.pro"
  make release
}

package() {
  depends+=('libjack.so')
  cd "${pkgname}-${pkgver}"
  install -vDm 755 "src/${pkgname}" -t "${pkgdir}/usr/bin/"
  # license
  install -vDm 644 LICENSE -t "${pkgdir}/usr/share/licenses/${pkgname}"
  # docs
  install -vDm 644 {CHANGESLOG.txt,README.md,TODO.txt} \
    -t "${pkgdir}/usr/share/doc/${pkgname}"
}
