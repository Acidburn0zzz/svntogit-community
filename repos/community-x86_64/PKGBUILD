# $Id$
# Maintainer: Felix Yan <felixonmars@archlinux.org>
# Contributor: Josip Ponjavic <josipponjavic at gmail dot com>
# Contributor: Xu Fasheng <fasheng.xu[AT]gmail.com>

pkgname=dtkcore
pkgver=2.0.9
pkgrel=1
epoch=1
pkgdesc='DTK core modules'
arch=('x86_64')
url="https://github.com/linuxdeepin/dtkcore"
license=('GPL3')
depends=('qt5-base' 'gsettings-qt')
makedepends=('qt5-tools')
source=("$pkgname-$pkgver.tar.gz::https://github.com/linuxdeepin/dtkcore/archive/$pkgver.tar.gz"
        fix-symbol.patch)
sha512sums=('cb0dddeaabdce4004e4049ae2143458c031708f091d98046e6517d92edd003f7b6d4e8a96252be060d49246659b405c183129193a746e9001612cae0b41bc5a9'
            '0b3e8e673136b755029e926c7acabb033fea7d89c4b80d85d1c3419faffdcfb6f8ed75214ed9a4226ae2ee7925c797e73e5acbb6f679d6d98879c15965f0b773')

build() {
  cd dtkcore-$pkgver
  patch -p1 -i ../fix-symbol.patch
  qmake-qt5 PREFIX=/usr
  make
}

package() {
  cd dtkcore-$pkgver
  make INSTALL_ROOT="$pkgdir" install
}
