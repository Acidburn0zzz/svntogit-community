# Maintainer: Christian Rebischke <chris.rebischke@archlinux.org>

pkgname=go-bindata-assetfs
pkgver=1.0.0
pkgrel=2
pkgdesc="Serves embedded files from jteeuwen/go-bindata with net/http"
arch=('x86_64')
url="https://github.com/elazarl/go-bindata-assetfs"
license=('BSD')
depends=('glibc')
makedepends=('go-pie')
source=("${pkgname}-${pkgver}.tar.gz::https://github.com/elazarl/go-bindata-assetfs/archive/v${pkgver}.tar.gz")
sha512sums=('009111511b10b14e83b166eaf37c36e6fc96097770cd6b1865d034f4e90cc3232930b6f5591ee1a960af46d76a7456a96dcc2ccc112234cb0d382a9f9cc575c2')

prepare() {
  mkdir -p "${srcdir}/src/github.com/elazarl/"
  mv "${srcdir}/${pkgname}-${pkgver}" "${srcdir}/src/github.com/elazarl/go-bindata-assetfs"
}

build() {
  cd "${srcdir}/src/github.com/elazarl/go-bindata-assetfs/"
  GOPATH="${srcdir}" go build -trimpath -ldflags "-extldflags ${LDFLAGS}" -o go-bindata-assetfs ./go-bindata-assetfs/
}

package() {
  cd "${srcdir}/src/github.com/elazarl/go-bindata-assetfs/"
  install -Dm755 "go-bindata-assetfs/go-bindata-assetfs" "${pkgdir}/usr/bin/go-bindata-assetfs"
  install -Dm644 LICENSE "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
}
