# $Id: PKGBUILD,v 1.28 2009/05/16 16:54:16 daenyth Exp $
# Maintainer: Jeff Mickey <jeff@archlinux.org>
# Contributor: sh__

pkgname=libtorrent
pkgver=0.12.2
pkgrel=2
pkgdesc="BitTorrent library written in C++"
arch=('i686' 'x86_64')
url="http://libtorrent.rakshasa.no"
license=('GPL')
depends=('libsigc++2.0' 'openssl')
options=('!libtool')
source=(http://libtorrent.rakshasa.no/downloads/$pkgname-$pkgver.tar.gz gcc43.patch gcc44.patch)
md5sums=('0831ca06f8906c7898fd67931ab239c7'
         '1b0bc07bfafceb8e44522fa638f76c8c'
         '4db548b73f80e2e1553dfc7d7b74bede')

build() {
  cd "$srcdir/$pkgname-$pkgver"

  patch -Np1 -i "$srcdir/gcc43.patch" || return 1
  patch -Np1 -i "$srcdir/gcc44.patch" || return 1

  CXXFLAGS="$CXXFLAGS -fno-strict-aliasing" \
    ./configure --prefix=/usr --disable-debug || return 1
  make || return 1
  make DESTDIR="$pkgdir" install
}

# vim:set ts=2 sw=2 et:
