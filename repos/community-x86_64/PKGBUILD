# $Id$
# Maintainer: Antonio Rojas <arojas@archlinux.org>

pkgname=appstream-generator
pkgver=0.6.2
pkgrel=1
pkgdesc="A fast AppStream metadata generator"
arch=(i686 x86_64)
url="https://github.com/ximion/appstream-generator"
license=(GPL3)
depends=(appstream libarchive librsvg lmdb liblphobos)
makedepends=(ldc meson ninja mustache-d curl)
source=("https://github.com/ximion/appstream-generator/releases/download/v$pkgver/$pkgname-$pkgver.tar.xz")
sha256sums=('72dbcce744700b1e5b71e48863ba61e745b4b5c40ab83c2d003a2f55d32a812b')

prepare() {
  mkdir -p build
}

build() {
  cd build
  meson ../$pkgname-$pkgver -Ddownload_js=false --prefix=/usr
  ninja -j1
}

package() {
  cd build
  DESTDIR="$pkgdir" ninja install
}
