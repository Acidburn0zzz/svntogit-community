# $Id$
# Maintainer: Sven-Hendrik Haase <sh@lutzhaase.com>
# Contributor: DuGi <dugi@irc.pl>

pkgname=springlobby
pkgver=0.154
pkgrel=1
pkgdesc="A free cross-platform lobby client for the Spring RTS project."
arch=('i686' 'x86_64')
url="http://springlobby.info/"
license=('GPL2')
depends=('hicolor-icon-theme' 'wxgtk' 'curl' 'libtorrent-rasterbar' 'boost-libs' 'openal')
optdepends=('sdl' 'sdl_sound' 'sdl_mixer') 
makedepends=('boost' 'asio' 'cmake')
install=springlobby.install
source=(http://www.springlobby.info/tarballs/${pkgname}-${pkgver}.tar.bz2)
md5sums=('e27463e878044e159a0f1a8732d95530')

build() {
  cd $srcdir/${pkgname}-$pkgver

  # We always use multithreaded boost libs in Arch with no special prefix but lesser
  # distros have that prefix so this check fails.
  sed -i 's/Boost_USE_MULTITHREADED.*/Boost_USE_MULTIHREADED OFF/g' $srcdir/$pkgname-$pkgver/src/CMakeLists.txt
  sed -i 's/Boost_USE_MULTITHREADED.*/Boost_USE_MULTIHREADED OFF/g' $srcdir/$pkgname-$pkgver/src/lsl/CMakeLists.txt

  cmake . \
    -DCMAKE_INSTALL_PREFIX=/usr
  make 
}

package() {
  cd $srcdir/${pkgname}-$pkgver

  make DESTDIR=$pkgdir install
 # 
 # install -m755 -d $pkgdir/usr/share/applications
 # install -m644 $srcdir/springlobby.desktop $pkgdir/usr/share/applications

 # install -m755 -d -p $pkgdir/usr/share/pixmaps
 # install -m644 $srcdir/springlobby.png $pkgdir/usr/share/pixmaps
}

# vim: sw=2:ts=2 et:
