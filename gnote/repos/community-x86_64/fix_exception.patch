From 0c39fcc53662b89545e27c26beaa96f54c4fa398 Mon Sep 17 00:00:00 2001
From: Debarshi Ray <debarshir@src.gnome.org>
Date: Sun, 3 Jan 2010 17:25:13 +0200
Subject: [PATCH] NoteOfTheDayApplicationAddin: Handle exception if '\n' is absent

Fixes: https://bugzilla.gnome.org/605869
---
 src/addins/noteoftheday/noteoftheday.cpp |   12 ++++++++----
 1 files changed, 8 insertions(+), 4 deletions(-)

diff --git a/src/addins/noteoftheday/noteoftheday.cpp b/src/addins/noteoftheday/noteoftheday.cpp
index 322feed..c1b59d0 100644
--- a/src/addins/noteoftheday/noteoftheday.cpp
+++ b/src/addins/noteoftheday/noteoftheday.cpp
@@ -113,10 +113,14 @@ std::string NoteOfTheDay::get_content(
 std::string NoteOfTheDay::get_content_without_title(
                               const std::string & content)
 {
-  return (content.empty())
-          ? ""
-          : content.substr(content.find("\n", 0),
-                           std::string::npos);
+  std::string str = "";
+  try {
+    str = content.substr(content.find("\n", 0), std::string::npos);
+  }
+  catch (const std::exception &) {
+  }
+
+  return str;
 }
 
 gnote::Note::Ptr NoteOfTheDay::get_note_by_date(
-- 
1.6.5.2

