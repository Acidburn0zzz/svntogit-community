# $Id$
# Maintainer: Felix Yan <felixonmars@archlinux.org>
# Contributor: Josip Ponjavic <josipponjavic at gmail dot com>
# Contributor: Xu Fasheng <fasheng.xu[AT]gmail.com>

pkgname=dtkcore
pkgver=2.0.8.1
pkgrel=2
epoch=1
pkgdesc='DTK core modules'
arch=('x86_64')
url="https://github.com/linuxdeepin/dtkcore"
license=('GPL3')
depends=('qt5-base' 'gsettings-qt')
makedepends=('qt5-tools')
source=("$pkgname-$pkgver.tar.gz::https://github.com/linuxdeepin/dtkcore/archive/$pkgver.tar.gz"
        fix-symbol.patch)
sha512sums=('93e0e03ab955825ccf18d931dc372cb592519ed42f947d237705aae01aa1775d7be95c3aeec62eb57c09074af4cd6851f2bf213fbb80b4ce13a78c6740ea49fa'
            '0b3e8e673136b755029e926c7acabb033fea7d89c4b80d85d1c3419faffdcfb6f8ed75214ed9a4226ae2ee7925c797e73e5acbb6f679d6d98879c15965f0b773')

build() {
  cd dtkcore-$pkgver
  patch -p1 -i ../fix-symbol.patch
  qmake-qt5 PREFIX=/usr
  make
}

package() {
  cd dtkcore-$pkgver
  make INSTALL_ROOT="$pkgdir" install
}
