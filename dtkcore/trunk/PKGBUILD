# Maintainer: Felix Yan <felixonmars@archlinux.org>
# Contributor: Josip Ponjavic <josipponjavic at gmail dot com>
# Contributor: Xu Fasheng <fasheng.xu[AT]gmail.com>

pkgname=dtkcore
pkgver=2.0.9.8
pkgrel=1
epoch=1
pkgdesc='DTK core modules'
arch=('x86_64')
url="https://github.com/linuxdeepin/dtkcore"
license=('GPL3')
depends=('qt5-base' 'gsettings-qt')
makedepends=('qt5-tools' 'git')
source=("$pkgname-$pkgver.tar.gz::https://github.com/linuxdeepin/dtkcore/archive/$pkgver.tar.gz"
        fix-symbol.patch)
sha512sums=('ba893bc9db7e6178652e6d1b5833fc35ced761988c56c960c1df256638d11af2576a02bd2351ea3dc6876c2c5fc5045ad07fc293bfb2e1f99e35d41b17281b98'
            '0b3e8e673136b755029e926c7acabb033fea7d89c4b80d85d1c3419faffdcfb6f8ed75214ed9a4226ae2ee7925c797e73e5acbb6f679d6d98879c15965f0b773')

build() {
  cd dtkcore-$pkgver
  patch -p1 -i ../fix-symbol.patch
  echo $VERSION
  qmake-qt5 PREFIX=/usr
  make
}

package() {
  cd dtkcore-$pkgver
  make INSTALL_ROOT="$pkgdir" install
}
