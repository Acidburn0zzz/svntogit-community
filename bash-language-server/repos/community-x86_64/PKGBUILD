# $Id$
# Maintainer: Felix Yan <felixonmars@archlinux.org>

pkgname=bash-language-server
pkgver=1.3.1
pkgrel=1
pkgdesc='Bash language server implementation based on Tree Sitter and its grammar for Bash'
arch=('x86_64')
url='https://github.com/mads-hartmann/bash-language-server'
license=('MIT')
depends=('nodejs')
makedepends=('npm' 'python2')
source=("https://registry.npmjs.org/$pkgname/-/$pkgname-$pkgver.tgz")
noextract=("$pkgname-$pkgver.tgz")
sha512sums=('91dcfc3e42c756e10e20f596270a55a1b61460b542be02b1e047683d4cba69d99faf63c00396c28026674d13d717a54d4b787989a143caefc9a5db9a43439207')

package() {
  PYTHON=python2 npm install -g --user root --prefix "$pkgdir"/usr "$srcdir"/$pkgname-$pkgver.tgz

  # Fix permissions
  find "$pkgdir/usr" -type d -exec chmod 755 '{}' +
}
