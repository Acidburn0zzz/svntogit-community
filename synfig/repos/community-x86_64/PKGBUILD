# $Id$
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Contributor: Franco Iacomella <yaco@gnu.org>

pkgname=synfig
pkgver=0.63.02
pkgrel=2
pkgdesc="Professional vector animation program (CLI renderer only)"
arch=(i686 x86_64)
url="http://synfig.org"
license=('GPL2')
depends=('libxml++' 'libsigc++2.0' 'etl' 'imagemagick' 'ffmpeg' 'fontconfig' 'libpng'
	 'libtiff' 'libdv' 'libmng')
optdepends=('openexr' 'libsigc++')
conflicts=('synfig-core')
replaces=('synfig-core')
options=(!libtool)
source=(http://downloads.sourceforge.net/project/synfig/synfig/$pkgver/synfig-$pkgver.tar.gz
	build-fix.patch ffmpeg-0.8.patch)
md5sums=('4286d5e1887275107d760d1b678aec24'
         '2de5e74159a38e4b1788c20d4c4b6f68')

build() {
  cd $srcdir/$pkgname-$pkgver
  [ -f configure ] || { libtoolize --ltdl --copy --force && autoreconf --install --force; }
  [ -f Makefile ] || ./configure --prefix=/usr --sysconfdir=/etc --with-libavcodec --with-libdv
  patch -p1 -i $srcdir/build-fix.patch
  patch -Np1 -i $srcdir/ffmpeg-0.8.patch
  make
}

package() {
  cd $srcdir/$pkgname-$pkgver
  make DESTDIR=$pkgdir install
}
md5sums=('4286d5e1887275107d760d1b678aec24'
         '2de5e74159a38e4b1788c20d4c4b6f68'
         'f1f22b1ce2c13e25d5eb51a664a9551f')
md5sums=('4286d5e1887275107d760d1b678aec24'
         '2de5e74159a38e4b1788c20d4c4b6f68'
         'ebf41046097cfd778dee9a9854561dae')
