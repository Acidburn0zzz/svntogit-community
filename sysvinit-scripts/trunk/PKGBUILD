# $Id$
# Maintainer: Lukas Jirkovsky <l.jirkovsky@gmail.com>
pkgname=sysvinit-scripts
pkgver=20130106
pkgrel=1
pkgdesc="RC scripts for sysvinit systems"
arch=('any')
url="https://www.archlinux.org/"
license=('GPL')
depends=('sysvinit')
source=(
  acpid.rc acpid.conf
  arptables.rc arptables.conf
  backuppc.rc backuppc.conf
  bird.rc bird.conf
  conntrackd.rc conntrackd.conf
  dkms.rc dkms.conf
  drbd.rc
  ebtables.rc ebtables.conf
  exabgp.rc exabgp.conf
  ferm.rc ferm.conf
  iperf.rc iperf.conf
  ipset.rc ipset.conf
  ipvsadm.rc ipvsadm.conf
  keepalived.rc keepalived.conf
  mailman.rc
  netperf.rc netperf.conf
  quagga.rc quagga.conf
  radvd.rc radvd.conf
  sslh.rc sslh.conf
  ucarp.rc ucarp.conf
  ulogd.rc
  vboxservice.rc vboxservice.conf vboxweb.rc vboxweb.conf)
# create backup array automagically based on source array
backup=(${source[@]/*'.rc'/}) # omit rc files in the backup array
backup=(${backup[@]%'.conf'}) # remove the .conf extension
backup=(${tmp1[@]/#/'etc/conf.d/'}) # prepend etc/conf.d to every entry

package() {
  cd "$srcdir"

  # install rc scripts
  for _RCSCRIPT in *.rc ; do
    install -Dm 755 $_RCSCRIPT "$pkgdir/etc/rc.d/${_RCSCRIPT%.*}"
  done

  # install conf files
  for _CONF in *.conf ; do
    install -Dm 644 $_CONF "$pkgdir/etc/conf.d/${_CONF%.*}"
  done

  # quagga needs a special handling
  for d in zebra ripd ripngd bgpd ospfd ospf6d isisd babeld; do
    install -D -m 755 quagga.rc "$pkgdir/etc/rc.d/$d"
    install -D -m 644 quagga.conf "$pkgdir/etc/conf.d/$d"
    backup+=("etc/conf.d/$d")
  done
}

# vim:set ts=2 sw=2 et:

md5sums=('077475c75fbdd9de75f9a397130ccd91'
         '929c6d2e91295c22ed9ec6212d7eabef'
         '60e0319b55b1ef9e13d9ac03dd98c8d4'
         '00bfb5bd8a83a5b466c650ee5d8f86f3'
         'e35545a597bd3e7ecc204b05a65863f9'
         '0fb4c20f7f4872b6d3994cd1e56080c0'
         '5e5346a057f187f56cce928b7e423636'
         '25241a4d7ef639506e0080431b2c1690'
         '478fe76da0202fcb5249bf65968d1c26'
         'd3e73e81b54e3e8166d357d434680684'
         '92979b8f9b06205560f2fba732c6bdf7'
         '8be6746da3df4dcb61cd2b1459974fce'
         '8902a2f7aca6245c27e9566a1509312c'
         'd0e340f2cefe91b1569c0e87c2a1288f'
         'c6f0838de4429af68d21b4d61f00db59'
         '3bad6b0fceef0e5a106cedd2a39cd1ab'
         '46871684b8ba6ab85e67035918f442ad'
         'ce1b1cb54ec71f804b86f12f339d9631'
         'd6fd57e1ba4cb72cfa87a35f551653d7'
         'e99dc0d41eb800970390dd149d70b544'
         'c75cb18434c6bf19fdc89b9caa766d7d'
         'de89b054d967036e08b13bc6a7235286'
         '3e606a2823a700b4e9c5f17511a6f6a5'
         'f2f4a7c6d57c5301c5f12f9b323fdea8'
         'b6cb7724aa6c61c3a9cdd40e8eaa973e'
         '0d7ea6296bce403a5d24be305a0a9d73'
         '9c8142da8730ad27a345587dea83ced7'
         '3a4014c15e9923451f5f282860896057'
         '4f11bf24fcd7a44c17bbe27cdc7dae01'
         '14836578ba49bbfa9e928feeca8346f1'
         '71d474228a1e02d698cd24e9fd55ca38'
         '0c4f2dd13c7dac1b73de923d1d5e4e17'
         '61351d011da721712c295bd572f8c73e'
         '4875907076009e887fe419c3bb699f71'
         'c2a0c7c58d091acf5b4672f58066ee8f'
         'c51c63d2b28080bae4c1c7a0c469bab7'
         '33b87863932e99450e6a37d2b0a899f1'
         '79c01b9ba580d2431997efb9df59cf5d'
         'c42230c1cabf5dd9b80bf9a0fd87ca7e'
         '7d9823507206de9b8528a72af2f18d74'
         '3c08ad30b89add47d3f45121200a5360'
         'c159d683ba1947290fc2ad2c64194150'
         '7e9483b1069a54f181546083ac7e5469')
