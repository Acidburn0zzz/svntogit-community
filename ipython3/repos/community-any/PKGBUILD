# Maintainer: Kyle Keen <keenerd@gmail.com>
# Contributor: PepeSmith
# Contributor: Aron Asor <aronasorman at gmail.com>
# IPython2 Maintainer: Chris Brannon <chris@the-brannons.com>
# Contributor : Douglas Soares de Andrade <dsa@aur.archlinux.org>

pkgname=ipython3
pkgver=0.10.2
pkgrel=1
_commit="8714c429e93ce72ba6f8d92d3a6976c88788f1e3"
pkgdesc="An enhanced Interactive Python shell."
arch=('any')
url="http://ipython.scipy.org/"
license=('BSD')
replaces=('ipython3-git')
conflicts=('ipython3-git')
depends=('python')
optdepends=("wxpython: needed for ipythonx and ipython-wx"
            "python-nose: if you want to run IPython's test suite"
            "pyqt: for ipython3-qtconsole")
makedepends=('git')
source=()
md5sums=()

__gitroot='https://github.com/ipython/ipython-py3k.git'
__gitname='ipython-py3k'

build() {
  cd "$srcdir"
  msg "Connecting to GIT server...."
 
  if [ -d $__gitname ] ; then
    cd $__gitname && git pull origin
    msg "The local files are updated."
  else
    git clone $__gitroot
  fi
 
  msg "GIT checkout done or server timeout"
  msg "Starting make..."

  rm -rf "$srcdir/$__gitname-build"
  git clone "$srcdir/$__gitname" "$srcdir/$__gitname-build"
  cd "$srcdir/$__gitname-build"
  git checkout "$_commit"
}

package() {
  cd "$srcdir/$__gitname-build"
  python setup.py install --prefix=/usr --root="$pkgdir" --optimize=1
  mv "$pkgdir/usr/share/doc/ipython" "$pkgdir/usr/share/doc/ipython3"
}
