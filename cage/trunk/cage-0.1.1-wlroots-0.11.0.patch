From 6a12da196068189a6ba390ca5ca3473454a90da7 Mon Sep 17 00:00:00 2001
From: Jan Beich <jbeich@FreeBSD.org>
Date: Sat, 9 May 2020 11:39:00 +0000
Subject: [PATCH 1/3] output: unbreak with wlroots 0.11.0

Port changes changes from
https://github.com/swaywm/sway/commit/9d0aa0cb8396
https://github.com/swaywm/sway/commit/40e87fa98afd
---
 output.c | 5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)

diff --git a/output.c b/output.c
index d6e34aa..96f915c 100644
--- a/output.c
+++ b/output.c
@@ -232,10 +232,7 @@ scan_out_primary_view(struct cg_output *output)
 		return false;
 	}
 
-	if (!wlr_output_attach_buffer(wlr_output, surface->buffer)) {
-		return false;
-	}
-
+	wlr_output_attach_buffer(wlr_output, &surface->buffer->base);
 	return wlr_output_commit(wlr_output);
 }
 

From 3575c9180bc09d72545b8c832b5278905fa0b006 Mon Sep 17 00:00:00 2001
From: Jan Beich <jbeich@FreeBSD.org>
Date: Wed, 15 Jul 2020 23:30:48 +0000
Subject: [PATCH 2/3] meson: require wlroots 0.11.0 after 6a12da196068

../output.c:235:57: error: no member named 'base' in 'struct wlr_buffer'
        wlr_output_attach_buffer(wlr_output, &surface->buffer->base);
                                              ~~~~~~~~~~~~~~~  ^
---
 meson.build | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/meson.build b/meson.build
index 90bc400..ee6d4c7 100644
--- a/meson.build
+++ b/meson.build
@@ -34,7 +34,7 @@ if is_freebsd
   )
 endif
 
-wlroots        = dependency('wlroots', version: '>= 0.9.1')
+wlroots        = dependency('wlroots', version: '>= 0.11.0')
 wayland_protos = dependency('wayland-protocols', version: '>=1.14')
 wayland_server = dependency('wayland-server')
 pixman         = dependency('pixman-1')

From c9cef876c05d5412c412774f58926d3b38ae594a Mon Sep 17 00:00:00 2001
From: Jan Beich <jbeich@FreeBSD.org>
Date: Sat, 9 May 2020 11:46:10 +0000
Subject: [PATCH 3/3] CI: bump wlroots version to 0.11.0
