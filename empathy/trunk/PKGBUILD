# $Id$
# Maintainer: Biru Ionut <biru.ionut at gmail.com>
pkgname=empathy
pkgver=2.28.1
pkgrel=1
pkgdesc="A GNOME instant messaging client using the Telepathy framework."
arch=('i686' 'x86_64')
url="http://live.gnome.org/Empathy"
license=('GPL2')
depends=('enchant' 'iso-codes' 'gnome-panel>=2.28.0' 'telepathy-mission-control>=5.3.1' 'telepathy-farsight>=0.0.11'
         'libcanberra' 'libnotify' 'libunique>=1.1.2' 'libwebkit>=1.1.15.1')
makedepends=('pkgconfig' 'intltool' 'gnome-doc-utils>=0.18.0')
optdepends=('telepathy-gabble: XMPP/Jabber support'
            'telepathy-butterfly: MSN support'
            'telepathy-idle: IRC support'
            'telepathy-salut: Link-local XMPP support'
            'telepathy-sofiasip: SIP support'
            'telepathy-haze: libpurple support')
options=('!libtool')
install=empathy.install
source=(http://ftp.gnome.org/pub/GNOME/sources/$pkgname/2.28/$pkgname-$pkgver.tar.gz)

build() {
    # Build and install
    cd $srcdir/$pkgname-$pkgver

    ./configure --prefix=/usr \
    	--sysconfdir=/etc  \
        --libexecdir=/usr/lib/empathy \
	--enable-shave
    make || return 1
    make GCONF_DISABLE_MAKEFILE_SCHEMA_INSTALL=1 DESTDIR=$pkgdir install || return 1 

    # Merge schemas file in a single file and remove trash
    mkdir -p $pkgdir/usr/share/gconf/schemas
    gconf-merge-schema $pkgdir/usr/share/gconf/schemas/$pkgname.schemas \
        $pkgdir/etc/gconf/schemas/*.schemas
    rm -rf $pkgdir/etc/gconf
}
md5sums=('369345be9056f828d00bdf4e7b81ed76')
