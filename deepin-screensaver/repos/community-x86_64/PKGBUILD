# Maintainer: Felix Yan <felixonmars@archlinux.org>

pkgname=deepin-screensaver
pkgver=0.0.6
pkgrel=2
pkgdesc='Deepin screensaver viewer and tools'
arch=('x86_64')
url="https://github.com/linuxdeepin/deepin-screensaver"
license=('GPL3')
depends=('qt5-declarative' 'qt5-x11extras' 'libxss' 'xscreensaver')
makedepends=('qt5-tools' 'python')
groups=('deepin')
source=("$pkgname-$pkgver.tar.gz::https://github.com/linuxdeepin/deepin-screensaver/archive/$pkgver.tar.gz"
        symlink.patch)
sha512sums=('ccfabd941c32bbbda300a3f66809941143459d246bcf25c0a83ff354046d9f34fd381b2e8d669bb5b2cdc5b2feda377c19c639c3a468727f88696e704093ddaa'
            '5950d9dc061be8135a7b707c6b50ab2abb223e537fccca203a42cd79d1a8f1bfe78f86c4d1eedabc6d7563f68530a932434c5e7042e4571514f6af146c41656a')

prepare() {
  patch -d deepin-screensaver-$pkgver -p1 -i ../symlink.patch
}

build() {
  cd deepin-screensaver-$pkgver
  qmake-qt5 PREFIX=/usr
  make
}

package() {
  cd deepin-screensaver-$pkgver
  make INSTALL_ROOT="$pkgdir" install
}
