# $Id$
# Maintainer : Ionut Biru <ibiru@archlinux.org>
# Contributor: Roman Kyrylych <roman@archlinux.org>

pkgname=balsa
pkgver=2.4.8
pkgrel=3
pkgdesc="An e-mail client for GNOME"
arch=('i686' 'x86_64')
license=('GPL')
url='http://pawsa.fedorapeople.org/balsa/'
depends=('gmime' 'gtkhtml' 'libesmtp' 'libnotify' 'gpgme' 'libgnomeui' 'gtksourceview2' 'gtkspell')
makedepends=('perlxml' 'gnome-doc-utils' 'intltool')
install=balsa.install
source=(http://pawsa.fedorapeople.org/${pkgname}/${pkgname}-${pkgver}.tar.bz2
        balsa-2.4.8-libnotify-0.7.patch)
md5sums=('4345e440ae5faf2787f5cc324fcb234a'
         '5b0da3c815d47b6780c3c1e2aebb4d05')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"

  # gpgme needs largefile support
  #export CFLAGS="$CFLAGS -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64"

  patch -Np0 -i "${srcdir}/balsa-2.4.8-libnotify-0.7.patch"

  ./configure --prefix=/usr \
  	--sysconfdir=/etc \
	--localstatedir=/var \
    	--with-ssl \
	--with-gpgme=gpgme-config \
	--with-gss \
	--with-ldap \
	--with-gtksourceview \
	--with-gtkspell \
	--with-rubrica \
	--with-sqlite \
	--without-nm
  make
  make GTK_UPDATE_ICON_CACHE=/bin/true DESTDIR="${pkgdir}" install
}
