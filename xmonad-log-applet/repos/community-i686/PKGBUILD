# Contributor: Alexander Kreuzer <alex@freesources.org>
# Maintainer: Jelle van der Waa <jelle vdwaa nl>

pkgname=xmonad-log-applet
pkgver=1.0
pkgrel=4
pkgdesc="Gnome Applet that display xmonad log message through DBus"
arch=('i686' 'x86_64')
url="http://uhsure.com/xmonad-log-applet.html"
license=('custom')
groups=()
install=$pkgname.install
depends=(dbus-core gnome-panel-bonobo hicolor-icon-theme)
makedepends=()
optdepends=("haskell-dbus: for xmonad integration see http://uhsure.com/xmonad-log-applet.html" )
source=(http://uhsure.com/xmonad-log-applet/$pkgname-$pkgver.tar.gz)
noextract=()
md5sums=('9b947ef33b80d37b9550800c50b43bfa')

build() {
  export LDFLAGS="${LDFLAGS//-Wl,--as-needed}"
  cd $srcdir/$pkgname-$pkgver
  sed -i s/\@.*dir\@/$\(DESTDIR\)\&/  Makefile.in
  #sed -i s/\@INSTALL\@/'& -D'/ Makefile.in
  ./configure --prefix=/usr
  make || return 1
  install -d $pkgdir/usr/libexec $pkgdir/usr/lib/bonobo/servers $pkgdir/usr/share/icons/hicolor/48x48/apps
  make DESTDIR=$pkgdir install 
  install -D LICENSE $pkgdir/usr/share/licenses/$pkgname/LICENSE
}

