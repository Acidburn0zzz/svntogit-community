# $Id$
# Maintainer: Lukas Fleischer <archlinux at cryptocrack dot de>
# Contributor: Ali H. Caliskan <ali.h.caliskan AT gmail DOT com>
# Contributor: Ryan Coyner <rcoyner@gmail.com>
# Contributor: Stefan Husmann <stefan-husmann@t-online.de>

pkgname=mixxx
pkgver=1.9.2
pkgrel=1
pkgdesc="Free, open source software for digital DJ'ing."
arch=('i686' 'x86_64')
url='http://www.mixxx.org'
license=('GPL')
depends=('fftw' 'libid3tag' 'libmad' 'libogg' 'libshout' 'libsndfile' 'portaudio' 'portmidi'
         'qt>=4.5' 'taglib')
makedepends=('mesa' 'scons' 'libshout')
source=("http://downloads.mixxx.org/${pkgname}-${pkgver}/${pkgname}-${pkgver}-src.tar.gz")
md5sums=('f84095951f66b12af5cf45d19200ff82')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"

  # GCC segfault workaround (fixes FS#26716)
  CFLAGS=${CFLAGS/-D_FORTIFY_SOURCE=2/}

  scons qtdir=/usr/lib/qt prefix=/usr install_root="${pkgdir}/usr"
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"

  # GCC segfault workaround (fixes FS#26716)
  CFLAGS=${CFLAGS/-D_FORTIFY_SOURCE=2/}

  scons qtdir=/usr/lib/qt prefix=/usr install_root="${pkgdir}/usr" install
}
