# Maintainer: Ainola <ainola@archlinux.org>
# Contributor: Drew DeVault

pkgname=mako
pkgver=1.4
pkgrel=1
license=('MIT')
pkgdesc='Lightweight notification daemon for Wayland'
makedepends=("meson" "scdoc" "wayland-protocols")
depends=(
	"gdk-pixbuf2"
	"pango"
	"systemd-libs"
	"wayland"
)
arch=("x86_64")
url='https://mako-project.org'
source=(
	"$pkgname-$pkgver.tar.gz::https://github.com/emersion/mako/releases/download/v$pkgver/mako-$pkgver.tar.gz"
	"$pkgname-$pkgver.tar.gz.sig::https://github.com/emersion/mako/releases/download/v$pkgver/mako-$pkgver.tar.gz.sig"
)
validpgpkeys=("34FF9526CFEF0E97A340E2E40FDE7BE0E88F5E48")  # emersion
sha256sums=('b79186fa371956f771694c9e583146e79ae675cf6da19db854f8d80961d88b0d'
            'SKIP')


build() {
	meson --prefix /usr \
		--buildtype=plain \
		-Dzsh-completions=true \
		"$pkgname-$pkgver" build
	ninja -C build
}

package() {
	DESTDIR="$pkgdir" ninja -C build install
	install -Dm644 "$pkgname-$pkgver/LICENSE" -t "$pkgdir/usr/share/licenses/$pkgname/"
}
