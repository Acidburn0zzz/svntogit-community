# Contributor: Andrea Scarpino <bash.lnx@gmail.com>
# Contributor: William Rea <sillywilly@gmail.com>
# Maintainer: Stefan Husmann <stefanh-husmann@t-online.de>

pkgname=alexandria
pkgver=0.6.4.1
pkgrel=4
pkgdesc="A GNOME application to help you manage your book collection"
arch=('i686' 'x86_64')
url="http://alexandria.rubyforge.org"
license=('GPL')
depends=('ruby-libglade' 'ruby-gconf2' 'ruby-gettext' 'ruby-gnome2' 'ruby-zoom' 'ruby-hpricot' 'ruby<=1.8.7_p174' 'hicolor-icon-theme')
optdepends=('ruby-htmlentities (AUR): for one provider named Deastore')
makedepends=('intltool' 'rake' 'rarian')
source=(http://rubyforge.iasi.roedu.net/files/$pkgname/$pkgname-$pkgver.tar.gz \
        $pkgname.desktop)
md5sums=('80e4def0f0890460eb0689489a05c745' 'bcea04341b96de9230c1a77eb05a61ae')
install=$pkgname.install

build(){
  cd "$srcdir/$pkgname-$pkgver"
  rake build || return 1
  rake PREFIX="$pkgdir/usr" install || return 1
  install -D -m644 schemas/$pkgname.schemas \
    "$pkgdir/usr/share/gconf/schemas/$pkgname.schemas"
  install -D -m644 data/alexandria/icons/$pkgname.png \
    "$pkgdir/usr/share/pixmaps/$pkgname.png"
  install -D -m644 ../$pkgname.desktop \
    "$pkgdir/usr/share/applications/$pkgname.desktop"
}
