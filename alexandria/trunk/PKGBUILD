# Contributor: Andrea Scarpino <bash.lnx@gmail.com>
# Contributor: William Rea <sillywilly@gmail.com>
# Maintainer: Stefan Husmann <stefanh-husmann@t-online.de>

pkgname=alexandria
pkgver=0.6.5
pkgrel=2
pkgdesc="A GNOME application to help you manage your book collection"
arch=('any')
url="http://alexandria.rubyforge.org"
license=('GPL')
depends=('ruby-libglade' 'ruby-gconf2' 'ruby-gettext' 'ruby-gnome2' 'ruby-zoom' 'ruby-hpricot' 'ruby<=1.8.7_p174' 'hicolor-icon-theme')
optdepends=('ruby-htmlentities: for some providers (AUR)')
makedepends=('intltool' 'rake' 'rarian')
source=(http://files.rubyforge.vm.bytemark.co.uk/alexandria/alexandria-0.6.5.tar.gz \
        $pkgname.desktop)
md5sums=('9c8655f361e6a0c6f8cdc97f36bd2d0f' 'bcea04341b96de9230c1a77eb05a61ae')
install=$pkgname.install

build(){
  cd "$srcdir/$pkgname-$pkgver"
  rake build || return 1
  rake PREFIX="$pkgdir/usr" install || return 1
}

package() {
  cd "$srcdir/$pkgname-$pkgver"
  install -D -m644 schemas/$pkgname.schemas \
    "$pkgdir/usr/share/gconf/schemas/$pkgname.schemas" || return 1
  install -D -m644 data/alexandria/icons/$pkgname.png \
    "$pkgdir/usr/share/pixmaps/$pkgname.png" || return 1
  install -D -m644 ../$pkgname.desktop \
    "$pkgdir/usr/share/applications/$pkgname.desktop" || return 1
}
