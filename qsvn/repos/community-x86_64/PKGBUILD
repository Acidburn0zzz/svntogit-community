# $Id: PKGBUILD,v 1.12 2009/05/31 15:26:37 wonder Exp $
# Maintainer: Jaroslav Lichtblau <dragonlord@aur.archlinux.org>
# Contributor: Jakub Schmidtke <sjakub-at-gmail.com>

pkgname=qsvn
pkgver=0.8.2
pkgrel=1
pkgdesc="Qt4 GUI for Subversion."
arch=('i686' 'x86_64')
url="http://www.anrichter.net/projects/qsvn/"
license=('GPL')
depends=('qt' 'subversion' 'db>=4.7')
makedepends=('cmake')
#options=('!makeflags')
source=(http://www.anrichter.net/projects/qsvn/chrome/site/$pkgname-$pkgver-src.tar.gz
	lib64-fix.patch)
md5sums=('a01655fdfe6809a3e34a947a70f2918a'
         'f2833303f01331538d1f6f2150b58e4f')
build() {
  cd ${srcdir}/$pkgname-$pkgver/src
  patch -Np2 -i $srcdir/lib64-fix.patch || return 1

  cmake -D CMAKE_INSTALL_PREFIX=/usr/ -D CMAKE_BUILD_TYPE="Release" ../src || return 1
  make || return 1
  make DESTDIR=${pkgdir} install

#desktop file
  install -D -m644 ${srcdir}/$pkgname-$pkgver/src/$pkgname.desktop \
    ${pkgdir}/usr/share/applications/$pkgname.desktop || return 1
}
