From fb7ace52712958a512470c909b3ccf448620a166 Mon Sep 17 00:00:00 2001
From: xtreak <tir.karthi@gmail.com>
Date: Sat, 29 Jun 2019 04:58:59 +0000
Subject: [PATCH] Use context manager for assertWarns and fix
 DeprecationWarning

---
 pint/testsuite/parameterized.py | 7 ++++++-
 pint/testsuite/test_quantity.py | 3 ++-
 2 files changed, 8 insertions(+), 2 deletions(-)

diff --git a/pint/testsuite/parameterized.py b/pint/testsuite/parameterized.py
index 9b92037..7c45915 100644
--- a/pint/testsuite/parameterized.py
+++ b/pint/testsuite/parameterized.py
@@ -32,6 +32,11 @@ from functools import wraps
 import collections
 import unittest
 
+try:
+    from collections.abc import Callable
+except ImportError:
+    from collections import Callable
+
 def add_metaclass(metaclass):
     """Class decorator for creating a class with a metaclass."""
     def wrapper(cls):
@@ -69,7 +74,7 @@ class ParameterizedTestCaseMetaClass(type):
         new_class_dict = {}
 
         for attr_name, attr_value in list(class_dict.items()):
-            if isinstance(attr_value, collections.Callable) and hasattr(attr_value, 'param_names'):
+            if isinstance(attr_value, Callable) and hasattr(attr_value, 'param_names'):
                 # print("Processing attr_name = %r; attr_value = %r" % (
                 #     attr_name, attr_value))
 
diff --git a/pint/testsuite/test_quantity.py b/pint/testsuite/test_quantity.py
index c7f41cb..89f8776 100644
--- a/pint/testsuite/test_quantity.py
+++ b/pint/testsuite/test_quantity.py
@@ -416,7 +416,8 @@ class TestQuantityToCompact(QuantityTestCase):
     def test_nonnumeric_magnitudes(self):
         ureg = self.ureg
         x = "some string"*ureg.m
-        self.assertRaises(RuntimeError, self.compareQuantity_compact(x,x))
+        with self.assertWarns(RuntimeWarning):
+            self.compareQuantity_compact(x,x)
 
 class TestQuantityBasicMath(QuantityTestCase):
 
