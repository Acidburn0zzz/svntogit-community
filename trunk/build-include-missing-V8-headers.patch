From 3f033556c39933464c960459aadc97e4d777eb4e Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Micha=C3=ABl=20Zasso?= <targos@protonmail.com>
Date: Tue, 19 Oct 2021 22:50:35 +0200
Subject: [PATCH] build: include missing V8 headers in distribution

Fixes: https://github.com/nodejs/Release/issues/704

PR-URL: https://github.com/nodejs/node/pull/40526
Fixes: https://github.com/nodejs/node/issues/40529
Reviewed-By: Richard Lau <rlau@redhat.com>
Reviewed-By: Michael Dawson <midawson@redhat.com>
---
 tools/install.py | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/tools/install.py b/tools/install.py
index 0c3ca355f9b9..12512a983ecb 100755
--- a/tools/install.py
+++ b/tools/install.py
@@ -176,14 +176,18 @@ def wanted_v8_headers(files_arg, dest):
       'deps/v8/include/libplatform/v8-tracing.h',
       'deps/v8/include/v8.h',
       'deps/v8/include/v8-array-buffer.h',
+      'deps/v8/include/v8-callbacks.h',
       'deps/v8/include/v8-container.h',
       'deps/v8/include/v8-context.h',
       'deps/v8/include/v8-data.h',
       'deps/v8/include/v8-date.h',
       'deps/v8/include/v8-debug.h',
+      'deps/v8/include/v8-embedder-heap.h',
       'deps/v8/include/v8-exception.h',
       'deps/v8/include/v8-extension.h',
       'deps/v8/include/v8-external.h',
+      'deps/v8/include/v8-forward.h',
+      'deps/v8/include/v8-function-callback.h',
       'deps/v8/include/v8-function.h',
       'deps/v8/include/v8-initialization.h',
       'deps/v8/include/v8-internal.h',
@@ -216,6 +220,7 @@ def wanted_v8_headers(files_arg, dest):
       'deps/v8/include/v8-value.h',
       'deps/v8/include/v8-version.h',
       'deps/v8/include/v8-wasm.h',
+      'deps/v8/include/v8-weak-callback-info.h',
       'deps/v8/include/v8config.h',
     ]
     files_arg = [name for name in files_arg if name in v8_headers]
