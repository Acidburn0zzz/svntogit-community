# $Id$
# Maintainer: Shinlun Hsieh <yngwiexx@yahoo.com.tw>
# Maintainer: Mateusz Herych <heniekk@gmail.com>
# Contributor: Storyteller <spiralsorrow@hotmail.com>

pkgname=lmms
pkgver=0.4.4
pkgrel=2
pkgdesc="The Linux MultiMedia Studio"
arch=('i686' 'x86_64')
options=('!libtool')
url="http://lmms.sourceforge.net/"
license=('GPL')
depends=('sdl' 'glib2' 'fluidsynth' 'libpng' 'libvorbis' 'libxft' 'qt' 'sdl_sound' 'jack-audio-connection-kit' 'libsamplerate')
optdepends=('wine: VST support (experimental)'
	    'fftw: SpectrumAnalyzer plugin' )
makedepends=('cmake' 'ladspa' 'libxft' 'freetype2')
provides=('lmms-extras')
conflicts=('lmms-extras')
source=(http://downloads.sourceforge.net/sourceforge/lmms/${pkgname}-${pkgver}.tar.bz2
	lib64-fix.patch glibc210.patch)
md5sums=('c09f00053d1defddb1df7131715f2b74'
         'ab07a705b038aed42b92ee8f5016f2a7'
	 '9d90c7b2fdd3a0fa4fdfdbe9e67750f1')

build() {
  cd ${startdir}/src/${pkgname}-${pkgver}
  patch -Np1 -i $srcdir/lib64-fix.patch || return 1
  patch -Np1 -i $srcdir/glibc210.patch || return 1
  cmake . -DCMAKE_INSTALL_PREFIX=/usr
  make -j1 || return 1
  make DESTDIR=$startdir/pkg install
}

