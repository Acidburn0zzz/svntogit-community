# Maintainer: Peter Lewis <plewis@aur.archlinux.org>
# Contributor: Sebastian KÃ¶hler <sebkoehler@whoami.org.uk>

pkgname=pigeonhole
pkgver=0.2.1
pkgrel=2
pkgdesc="Fully rewritten Sieve implementation for Dovecot v2.0"
arch=('i686' 'x86_64')
url="http://pigeonhole.dovecot.org/"
license=('LGPL')
depends=('dovecot=2.0.7')
makedepends=()
conflicts=('dovecot-sieve' 'pigeonhole-hg')
source=("http://www.rename-it.nl/dovecot/2.0/dovecot-2.0-$pkgname-$pkgver.tar.gz"
	"dovecot.conf")
md5sums=('7baf6ebac21bdb865cb733d8e96ee81b'
         '564b771c339f69a477c06babf53e11c2')
options=('!libtool')

build() {
  cd "$srcdir/dovecot-2.0-$pkgname-$pkgver"

  ./configure --prefix=/usr --with-dovecot=/usr/lib/dovecot
  make
}

package() {
  cd "$srcdir/dovecot-2.0-$pkgname-$pkgver"
  
  make DESTDIR="$pkgdir/" install

  install -m 644 -D "$srcdir/dovecot.conf" "$pkgdir/etc/ld.so.conf.d/dovecot.conf"
} 

