# $Id$
# Maintainer: Felix Yan <felixonmars@archlinux.org>
# Contributor: razer <razer[at]neuf[dot]fr>
# Contributor: pzl <alsoelp@gmail.com>
# Contributor: Dennis Fink <dennis.fink@c3l.lu>
# Contributor: Simon Sapin <simon dot sapin at exyr dot org>

pkgname=python-cairosvg
pkgver=2.1.2
pkgrel=1
pkgdesc="A Simple SVG Converter for Cairo"
arch=('any')
url="http://cairosvg.org/"
license=('LGPL3')
depends=('python-cairocffi' 'python-cssselect2' 'python-defusedxml' 'python-pillow'
         'python-tinycss2')
makedepends=('python-setuptools')
checkdepends=('python-pytest-runner' 'python2-pytest-runner' 'python-pytest-isort'
              'python2-pytest-isort' 'python-pytest-flake8' 'python2-pytest-flake8'
              'python-pytest-cov' 'python2-pytest-cov')
source=("$pkgname-$pkgver.tar.gz::https://github.com/Kozea/CairoSVG/archive/$pkgver.tar.gz")
sha512sums=('4e8843e9d174af8d405f552ce02002a6953368ed0473e701906c2f3d9dbbf8d292f8b3212b99dcc5cf8e3b357a10fc0d8c7d9c3116958a7ac255c5af057f5ac5')

prepare() {
  cd CairoSVG-$pkgver
  rmdir test/cairosvg_reference
  cp -a "$srcdir"/CairoSVG-$pkgver{,-copy}
  mv "$srcdir"/CairoSVG-$pkgver-copy test/cairosvg_reference
}

build() {
  cd CairoSVG-$pkgver
  python setup.py build
}

check() {
  cd CairoSVG-$pkgver
  python setup.py test
}

package() {
  cd CairoSVG-$pkgver
  python setup.py install --root="$pkgdir" --optimize=1
}
