# Maintainer: Bruno Pagani <archange@archlinux.org>

pkgname=acme-user
pkgver=1.0.0
pkgrel=1
pkgdesc="acme-tiny systemd files for running as dedicated user instead of root."
arch=(any)
url="https://certbot.eff.org"
license=(GPL)
depends=(acme-tiny systemd)
source=(acme.service
        acme.timer
        acme.tmpfiles
        acme.sysusers
        acme-renew.sh
        acme-post.sh)
sha256sums=(799b67ec34b23004002cc90aa40c639979c155b793f3e4cb1012008163332051
            c8bf2bf90baaf5630d7a0d1761773fd75b153d39f6d34289e287c862eebead2d
            34f0023cef60e11d5ac83b91fe36df7a3b7353c6a70dc4f86128e0d4cec4268a
            6b0124bad46fb4f1864b791c57b974e76c25c07e2f8476b7de3757cba7cc4c11
            2ebe80ce48fecdf30c5f7a3db173541cc61ff70ccb55d7b1ea4fc31d89b6e933
            db7881b0ceaab0eb555765b378a4437890d70bffe4f38e64541e0a42eb36f993)

package() {
    install -Dm755 acme-renew.sh "${pkgdir}"/usr/bin/acme-renew
    install -Dm755 acme-post.sh "${pkgdir}"/usr/bin/acme-post
    install -Dm644 acme.{service,timer} -t "${pkgdir}"/usr/lib/systemd/system/
    install -Dm644 acme.tmpfiles "${pkgdir}"/usr/lib/tmpfiles.d/acme.conf
    install -Dm644 acme.sysusers "${pkgdir}"/usr/lib/sysusers.d/acme.conf
}
