# $Id$
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>

pkgname=lua-zlib
pkgver=0.2
pkgrel=2
_gitver=8d07669
_luaver=5.1
url="http://github.com/brimworks/lua-zlib"
pkgdesc='Simple streaming interface to zlib for Lua.'
arch=('i686' 'x86_64')
license=('MIT')
depends=('lua' 'zlib')
makedepends=('cmake')
conflicts=('lua-lzlib')
source=("lua-zlib-$pkgver.zip::https://github.com/brimworks/lua-zlib/zipball/v$pkgver")
md5sums=('d7ca7d12b6e50e3ec4c2057f65ca87d1')

build() {
    cd $srcdir/brimworks-lua-zlib-${_gitver}
    sed -i "s#share/lua/cmod#lib/lua/${_luaver}#" CMakeLists.txt
    cmake -DCMAKE_BUILD_TYPE=Release \
          -DCMAKE_INSTALL_PREFIX=/usr .
}

package() {
    cd $srcdir/brimworks-lua-zlib-${_gitver}
    make DESTDIR="$pkgdir" install
    install -D -m644 "README" "$pkgdir/usr/share/licenses/lua-zlib/README"
}
