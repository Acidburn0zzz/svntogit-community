# $Id$
# Maintainer: Felix Yan <felixonmars@archlinux.org>

pkgname=deepin-anything
pkgver=0.0.2
pkgrel=1
pkgdesc="Deepin Anything file search tool"
arch=('x86_64')
url="https://github.com/linuxdeepin/deepin-anything"
license=('GPL3')
depends=('dkms' 'qt5-base')
groups=('deepin' 'qt5-tools')
source=("$pkgname-$pkgver.tar.gz::https://github.com/linuxdeepin/deepin-anything/archive/$pkgver.tar.gz")
sha512sums=('90ebd80800e09f2f110d3b40472615fe82cbcdda48b8d71bfdf17691d63bfc74fc3eb4779920e94fd7292b086aafdf905a9405456d50210b6270ce1a92ec8090')

prepare() {
  cd deepin-anything-$pkgver
  sed -i 's|^systemd_service.path.*|systemd_service.path = /usr/lib/systemd/system|' server/src/src.pro
}

build() {
  cd deepin-anything-$pkgver
  make VERSION=$pkgver
}

package() {
  cd deepin-anything-$pkgver
  make VERSION=$pkgver DESTDIR="$pkgdir" install

  cp debian/deepin-anything-dkms.dkms "$pkgdir"/usr/src/deepin-anything-$pkgver/dkms.conf
}
