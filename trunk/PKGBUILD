# Maintainer: Christian Hesse <mail@eworm.de>
# Contributor: Marcel Korpel <marcel[dot]korpel[at]gmail>
# Contributor: Ivan Sichmann Freitas <ivansichfreitas@gmail.com>
# Contributor: Jaroslav Lichtblau <dragonlord@aur.archlinux.org>
# Contributor: Jeff Mickey <jeff@archlinux.org>

pkgname=ctemplate
pkgver=2.3
pkgrel=7
pkgdesc='A library implementing a simple but powerful template language for C++'
arch=('x86_64')
url='https://github.com/olafvdspek/ctemplate'
license=('BSD')
makedepends=('python')
depends=('gcc-libs' 'perl')
source=("https://github.com/OlafvdSpek/${pkgname}/archive/${pkgname}-${pkgver}.tar.gz"
        '0001-python.patch')
sha256sums=('99e5cb6d3f8407d5b1ffef96b1d59ce3981cda3492814e5ef820684ebb782556'
            '2a82affa50013f2d057211e52435499f1c73788ef8600b286c82e0faf9e7fc8d')

prepare() {
	cd "${srcdir}/${pkgname}-${pkgname}-${pkgver}"

        patch -Np1 < ../0001-python.patch
}

build() {
	cd "${srcdir}/${pkgname}-${pkgname}-${pkgver}"

	./configure --prefix=/usr
	make
}

package() {
	cd "${srcdir}/${pkgname}-${pkgname}-${pkgver}"

	make DESTDIR="${pkgdir}" install
	install -D -m0644 COPYING "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
}
