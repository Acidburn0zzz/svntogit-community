# $Id$
# Maintainer: Jaroslav Lichtblau <dragonlord@aur.archlinux.org>
# Contributor: Callan Barrett <wizzomafizzo@gmail.com>
# Contributor: mucknert <mucknert@gmx.net>

pkgname=offlineimap
pkgver=6.1.2
pkgrel=1
pkgdesc='A powerful IMAP/Maildir synchronization tool'
arch=('i686' 'x86_64')
url='http://software.complete.org/offlineimap/'
license=('GPL')
depends=('python')
noextract=($pkgname.1.gz)
source=(http://software.complete.org/software/attachments/download/410/${pkgname}_${pkgver}.orig.tar.gz \
        $pkgname.1.gz)

md5sums=('daa378a30d23962bb5748f7187066c94'
         'e82518628e704e053318c1c3111432e9')

build() {
  cd ${srcdir}/$pkgname

  python setup.py build install --root=${pkgdir} || return 1

  install -D -m644 $pkgname.conf.minimal ${pkgdir}/usr/share/$pkgname/$pkgname.conf.minimal || return 1
  install -D -m644 $pkgname.conf ${pkgdir}/usr/share/$pkgname/$pkgname.conf || return 1

#man page doesn't convert: http://lists.complete.org/offlineimap@complete.org/2008/05/msg00018.html.gz
#extracted from debian package: http://ftp.debian.org/debian/pool/main/o/offlineimap/offlineimap_6.1.2_all.deb
  install -D -m644 ${srcdir}/$pkgname.1.gz ${pkgdir}/usr/share/man/man1/$pkgname.1.gz || return 1
}
