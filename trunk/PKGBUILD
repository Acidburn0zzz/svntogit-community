# Maintainer: David Runge <dave@sleepmap.de>
_name=spreed
pkgname=nextcloud-app-spreed
pkgver=6.0.0
pkgrel=1
# epoch needed, because of fake semver:
# https://github.com/nextcloud/spreed/issues/1685
epoch=1
pkgdesc="Video & audio-conferencing using WebRTC"
arch=('any')
url="https://apps.nextcloud.com/apps/spreed"
license=('AGPL3')
depends=('nextcloud>=16.0.0' 'nextcloud<17.0.0')
source=("https://github.com/nextcloud/${_name}/releases/download/v${pkgver}/${_name}-${pkgver}.tar.gz")
sha512sums=('d1a10d93f70ce958e206ea6697cf6ddc05801c6560a7bc206956bff13b507d0dbbac762637e8bbb31ea8b6b435ca4e5a59f2b7b19da75ffea62a48228c0fc7d4')

prepare() {
  find ${_name} -type f -exec chmod 644 {} +
  find ${_name} -type d -exec chmod 755 {} +
}

package() {
  install -dm 755 "${pkgdir}/usr/share/webapps/nextcloud/apps/${_name}/"
  cp -av ${_name}/* "${pkgdir}/usr/share/webapps/nextcloud/apps/${_name}/"
}
