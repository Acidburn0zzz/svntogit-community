# Maintainer: Sven-Hendrik Haase <svenstaro@gmail.com>
# Contributor: Felix Fung <fylixeoi@gmail.com>

pkgname=timescaledb
pkgver=2.1.0
pkgrel=1
pkgdesc="An open-source time-series database optimized for fast ingest and complex queries."
arch=('x86_64')
url="https://www.timescale.com/"
license=('Apache')
depends=('postgresql' 'postgresql-libs')
makedepends=('gcc' 'cmake')
install=timescaledb.install
source=("https://github.com/timescale/timescaledb/releases/download/${pkgver}/timescaledb-${pkgver}.tar.lzma")
sha512sums=('22c72b6ae6bafc37269168d42089816735ee812d0f3c53642ad453c89b984cabdc5ea5aeb10320ba12478e9baae5356c7984b773b61e18a2aed99c6657cda464')

build() {
    cd "${pkgname}"
    ./bootstrap -DWARNINGS_AS_ERRORS=OFF -DREGRESS_CHECKS=OFF
    cd build && make
}

package() {
    cd "${pkgname}/build"
    make DESTDIR="$pkgdir/" install
}
