# HG changeset patch
# User Ryan VanderMeulen <ryanvm@gmail.com>
# Date 1462316400 14400
#      Tue May 03 19:00:00 2016 -0400
# Node ID f9ba1836d5cdc0293a0276ef278a8c69a4eb174b
# Parent  2622cba3ceb742454bae5906f678c8c621a92b37
Bug 1269941 - Upgrade to Hunspell 1.4.1. r=ehsan

diff -r 2622cba3ceb7 -r f9ba1836d5cd extensions/spellcheck/hunspell/src/README.mozilla
--- a/extensions/spellcheck/hunspell/src/README.mozilla	Mon May 09 17:01:15 2016 -0400
+++ b/extensions/spellcheck/hunspell/src/README.mozilla	Tue May 03 19:00:00 2016 -0400
@@ -1,2 +1,2 @@
-Hunspell Version:   1.4.0
+Hunspell Version:   1.4.1
 Additional Patches: See patches directory.
diff -r 2622cba3ceb7 -r f9ba1836d5cd extensions/spellcheck/hunspell/src/csutil.cxx
--- a/extensions/spellcheck/hunspell/src/csutil.cxx	Mon May 09 17:01:15 2016 -0400
+++ b/extensions/spellcheck/hunspell/src/csutil.cxx	Tue May 03 19:00:00 2016 -0400
@@ -2783,7 +2783,7 @@
   bool operator()(char c) { return chars.find(c) != std::string::npos; }
 
  private:
-  const std::string& chars;
+  std::string chars;
 };
 }
 
diff -r 2622cba3ceb7 -r f9ba1836d5cd extensions/spellcheck/hunspell/src/suggestmgr.cxx
--- a/extensions/spellcheck/hunspell/src/suggestmgr.cxx	Mon May 09 17:01:15 2016 -0400
+++ b/extensions/spellcheck/hunspell/src/suggestmgr.cxx	Tue May 03 19:00:00 2016 -0400
@@ -1088,10 +1088,10 @@
     std::copy(word, word + candidate.size(), candidate.begin());
   }
 
-  for (std::string::iterator p = candidate.begin() + candidate.size() - 1; p > candidate.begin(); --p) {
-    for (std::string::iterator q = p - 1; q >= candidate.begin() && std::distance(q, p) < 10; --q) {
-      std::swap(*q, *(q + 1));
-      if (std::distance(q, p) < 2)
+  for (std::string::reverse_iterator p = candidate.rbegin(), pEnd = candidate.rend() - 1; p != pEnd; ++p) {
+    for (std::string::reverse_iterator q = p + 1, qEnd = candidate.rend(); q != qEnd && std::distance(p, q) < 10; ++q) {
+      std::swap(*q, *(q - 1));
+      if (std::distance(p, q) < 2)
         continue;  // omit swap char
       ns = testsug(wlst, candidate.c_str(), candidate.size(), ns, cpdsuggest, NULL, NULL);
       if (ns == -1)
