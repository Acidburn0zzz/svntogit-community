# $Id$
# Maintainer : Biru Ionut <ionut@archlinux.ro>
# Contributor: Owain Sutton <owainsutton @ gmail dot com>

pkgname=panflute
pkgver=0.5.3
pkgrel=1
pkgdesc="Music player interface and panel applet - successor to music-applet"
arch=('i686' 'x86_64')
url="https://launchpad.net/panflute"
license=('GPL')
depends=('dbus-python' 'gnome-python' 'python-notify' 'pygtk' 'python-numpy')
makedepends=('perlxml' 'gnome-doc-utils>=0.18' 'intltool' 'gnome-panel'
	    'gnome-python-desktop' 'python-mpd')
optdepends=('python-mpd: for mpd support')
replaces=('music-applet')
install=panflute.install
source=(http://launchpad.net/$pkgname/0.5/$pkgver/+download/$pkgname-$pkgver.tar.gz)

build() {
  cd "$srcdir/$pkgname-$pkgver"
  ./configure --prefix=/usr \
  	--sysconfdir=/etc \
        --localstatedir=/var \
        --libexecdir=/usr/lib/panflute \
	--disable-scrollkeeper \
	--disable-schemas-install

  make || return 1
  make DESTDIR="$pkgdir" install || return 1

  install -m755 -d "$pkgdir"/usr/share/gconf/schemas
  gconf-merge-schema "$pkgdir"/usr/share/gconf/schemas/$pkgname.schemas --domain $pkgname \
 	"$pkgdir"/etc/gconf/schemas/*.schemas || return 1

  rm -rf "$pkgdir"/etc/gconf
}
md5sums=('eb34e59b34dc2c2770eda493ecb0861f')
