# $Id$
# Maintainer:  Bart≈Çomiej Piotrowski <nospam@bpiotrowski.pl>
# Contributor: simo <simo@archlinux.org>
# Contributor: Mateusz Herych <heniekk@gmail.com>
# Contributor: Tom Newsom <Jeepster@gmx.co.uk>

pkgname=oidentd
pkgver=2.0.8
pkgrel=6
pkgdesc='An RFC1413 compliant ident daemon'
arch=('i686' 'x86_64')
url="http://dev.ojnk.net/"
license=('GPL')
depends=('glibc' 'bash')
source=(http://downloads.sourceforge.net/sourceforge/ojnk/$pkgname-$pkgver.tar.gz
        rc.d conf.d service socket)
md5sums=('c3d9a56255819ef8904b867284386911'
         '93cbf742cdd0b053f67482273d715f25'
         '603307525771724b0f55a2c34fbc3f3e'
         'b215bee5764cdecb0939f44d5d2dccbe'
         '651c2ef45d1d345d95056ef0787e29e6')

build() {
	cd $srcdir/$pkgname-$pkgver
	./configure --prefix=/usr
	make
}

package() {
	cd $srcdir/$pkgname-$pkgver
	make prefix=$pkgdir/usr mandir=$pkgdir/usr/share/man install

    install -D -m644 $srcdir/conf.d $pkgdir/etc/conf.d/oidentd
	install -D -m755 $srcdir/rc.d $pkgdir/etc/rc.d/oidentd
	install -D -m644 $srcdir/service $pkgdir/usr/lib/systemd/system/oidentd@.service
	install -D -m644 $srcdir/socket $pkgdir/usr/lib/systemd/system/oidentd.socket
}

