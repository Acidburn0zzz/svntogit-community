$Id$
# Maintainer: Daniel Wallace <danielwallace at gtmanfred dot com>
# Contributor: Alfredo Palhares <masterkorp@masterkorp.net>

pkgname=hub
_pkgdir=defunkt-hub
pkgver=1.10.2
pkgrel=2
pkgdesc="hub introduces git to GitHub"
arch=('any')
url="http://defunkt.io/hub"
depends=('git' 'ruby')
license=('MIT')
source=("$pkgname.tar.gz::https://github.com/defunkt/hub/tarball/v$pkgver")
md5sums=('12357b7542d1caf4ec049343e8564057')

build() {
  cd "$srcdir/$_pkgdir"*

  rake standalone
  gzip --best -c man/hub.1> hub.1.gz

}

package() {
  cd "$srcdir/$_pkgdir"*

  install -d "$pkgdir/usr/bin"

  local _gemdir="$(ruby -rubygems -e'puts Gem.default_dir')"
  gem install --ignore-dependencies --install-dir "$pkgdir$_gemdir" --bindir "$pkgdir/usr/bin" hub

}
