# $Id: $
# Maintainer: Andrea Scarpino <andrea@archlinux.org>
# Contributor: Fabrizio Antonangeli <fabrizio.antonangeli@gmail.com>

pkgname=moiosms
pkgver=2.18
pkgrel=2
pkgdesc="A program to send SMS via web"
url="http://www.moioli.net/sms"
license=('GPL2')
arch=('any')
depends=('python-pycurl' 'hicolor-icon-theme')
optdepends=('wxpython: for GUI frontend'
	'gocr: for automatic captcha recognition'
	'graphicsmagick: for automatic captcha recognition'
	'ocrad: for automatic captcha recognition')
install=moiosms.install
source=(http://www.moioli.net/files/MoioSMS${pkgver}-src.zip
	'moiosms.desktop')
md5sums=('8dee97d8c0bef741f2bdd3d104b1899f'
         '0ed8b3ebed52d45e08504290edeedb86')

build() {
  cd ${srcdir}/MoioSMS-${pkgver}
  install -Dm755 sms.py \
    ${pkgdir}/usr/share/MoioSMS/sms.py || return 1
  cp -R moio ${pkgdir}/usr/share/MoioSMS || return 1
  install -Dm644 icon.xpm \
    ${pkgdir}/usr/share/icons/hicolor/16x16/apps/moiosms.xpm || return 1
  install -Dm644 ${srcdir}/moiosms.desktop \
    ${pkgdir}/usr/share/applications/moiosms.desktop
  install -d ${pkgdir}/usr/bin/
  ln -sf /usr/share/MoioSMS/sms.py ${pkgdir}/usr/bin/moiosms || return 1
}
