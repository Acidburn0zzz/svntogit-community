# Maintainer: mickele
# Contributor: marcus fritzsch <fritschy@googlemail.com>
pkgname=coin
pkgver=3.1.3
pkgrel=2
pkgdesc="Coin3D is a high-level 3D graphics toolkit on top of OpenGL."
url="http://www.coin3d.org/"
license="GPL"
arch=('i686' 'x86_64')
depends=('mesa')
optdepends=('openal' 'fontconfig' 'zlib' 'freetype2' 'bzip2' 'spidermonkey')
makedepends=('doxygen')
conflicts=('inventor')
provides=('inventor')
replaces=()
backup=()
install=
source=("http://ftp.coin3d.org/coin/src/all/Coin-${pkgver}.tar.gz")

build() {
  cd "${srcdir}" || return 1
  mkdir build || return 1
  cd build || return 1

  ../Coin-${pkgver}/configure --prefix=/usr \
  			      --mandir=/usr/share/man \
    			      --enable-optimization \
			      --enable-3ds-import \
			      --enable-javascript-api \
    			      --enable-threadsafe \
			      --enable-exceptions \
			      --enable-man \
    			      --with-mesa \
			      --disable-debug \
			      --enable-shared \
    			      --disable-maintainer-mode \
			      --disable-dependency-tracking \
			      || return 1

  make DESTDIR=${pkgdir} install || return 1

  # final adjustments
  for _FILE in threads deprecated
  do
	mv  "${pkgdir}/usr/share/man/man3/${_FILE}.3" "${pkgdir}/usr/share/man/man3/coin-${_FILE}.3" || return 1
  done
  rm -rf "${pkgdir}/usr/lib/libCoin.la" || return 1
}
md5sums=('1538682f8d92cdf03e845c786879fbea')
