# $Id$
# Contributor: Pierre Schmitz <pierre@archlinux.de>
# Maintainer : Ionut Biru <ibiru@archlinux.org>

_pkgsourcename=nvidia-utils
pkgname=lib32-$_pkgsourcename
pkgver=195.36.15
pkgrel=1
pkgdesc="NVIDIA drivers utilities and libraries."
arch=('x86_64')
url="http://www.nvidia.com/"
license=('custom')
groups=('lib32')
depends=('lib32-libxext')
conflicts=('lib32-libgl')
provides=('lib32-libgl')
source=(http://mir.archlinux.fr/extra/os/i686/$_pkgsourcename-$pkgver-$pkgrel-i686.pkg.tar.xz)
sha256sums=('5d7d7e8a48e356df6e08aa540e1890c2d31d53630da6a3cc6a471fc88360bee4')

build() {
	cd $srcdir
	mkdir -p $pkgdir/opt/lib32/usr/lib
	cp -dp usr/lib/*.so* $pkgdir/opt/lib32/usr/lib

	# fix wrnog links
	cd $pkgdir/opt/lib32/usr/lib
	ln -sf libGL.so.$pkgver libGL.so
	ln -sf libGL.so.$pkgver libGL.so.1
	ln -sf libGLcore.so.$pkgver libGLcore.so.1
	ln -sf libnvidia-cfg.so.$pkgver libnvidia-cfg.so.1
	ln -sf libnvidia-tls.so.$pkgver libnvidia-tls.so.1
}
