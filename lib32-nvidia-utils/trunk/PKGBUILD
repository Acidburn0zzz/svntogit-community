# $Id$
# Contributor: Pierre Schmitz <pierre@archlinux.de>
# Maintainer : Ionut Biru <ibiru@archlinux.org>

_pkgsourcename=nvidia-utils
pkgname=lib32-$_pkgsourcename
pkgver=256.35
pkgrel=4
pkgdesc="NVIDIA drivers utilities and libraries."
arch=('x86_64')
url="http://www.nvidia.com/"
license=('custom')
groups=('lib32')
depends=('lib32-libxext')
conflicts=('lib32-libgl')
provides=('lib32-libgl')
options=('!strip')
source=(http://mir.archlinux.fr/extra/os/i686/$_pkgsourcename-$pkgver-$pkgrel-i686.pkg.tar.xz)

build() {
    cd $srcdir
    mkdir -p $pkgdir/opt/lib32/usr/lib
    cp -dp usr/lib/*.so* $pkgdir/opt/lib32/usr/lib
    # fix wrnog links
    cd $pkgdir/opt/lib32/usr/lib
    ln -sf libGL.so.$pkgver libGL.so
    ln -sf libGL.so.$pkgver libGL.so.1
    ln -sf libnvidia-cfg.so.$pkgver libnvidia-cfg.so.1
    ln -sf libnvidia-tls.so.$pkgver libnvidia-tls.so.1
    ln -sf libnvidia-glcore.so.$pkgver libnvidia-glcore.so.1
    ln -sf libnvidia-glcore.so.$pkgver libnvidia-glcore.so
}
md5sums=('f8fb33c94137e8dc31fc2160203d7c10')
