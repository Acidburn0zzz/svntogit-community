# $Id$
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Maintainer: Vesa Kaihlavirta <vegai@iki.fi>
# Contributor: Sebastian Sareyko <public@nooms.de>

pkgname=pantomime
pkgver=1.2.0pre3
pkgrel=4
pkgdesc="A set of Objective-C classes that model a mail system"
arch=('i686' 'x86_64')
url="http://www.collaboration-world.com/pantomime"
license=("LGPL" "custom")
depends=('gnustep-back' 'openssl')
makedepends=('gnustep-make' 'gnustep-base' 'gcc-objc')
options=('!makeflags')
source=("Pantomime-$pkgver.tar.gz::http://www.collaboration-world.com/cgi-bin/project/download.cgi/Pantomime-$pkgver.tar.gz?rid=104"
	build-fix.patch)
md5sums=('b88f4634ec1f3a1ea1d5551ee10d9db7'
         '53dc4960f4c2b50274ca01b2f29567d0')

build() {
  cd $srcdir/Pantomime
  source /etc/profile.d/GNUstep.sh
  patch -p1 <$srcdir/build-fix.patch
  make
}

package() {
  cd $srcdir/Pantomime
  make GNUSTEP_INSTALLATION_DIR=$pkgdir/usr/lib/GNUstep install
  install -D -m644 Documentation/LICENSE.elm $pkgdir/usr/share/licenses/$pkgname/LICENSE.elm
  cd $pkgdir/usr/lib/GNUstep/Library/
  mv * ..
  cd .. && rmdir Library
}
