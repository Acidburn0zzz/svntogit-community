From 64c8e9bcdffd98ced3fcf4f0077dc286b472d8b0 Mon Sep 17 00:00:00 2001
From: David Rosca <nowrep@gmail.com>
Date: Thu, 15 Feb 2018 08:35:34 +0100
Subject: [PATCH] WebPage: Make the loadFinished workaround for all Qt 5.10
 versions

See #2479
---
 src/lib/webengine/webpage.cpp   | 2 +-
 tests/autotests/webviewtest.cpp | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/lib/webengine/webpage.cpp b/src/lib/webengine/webpage.cpp
index 965cac205..5adb6f22a 100644
--- a/src/lib/webengine/webpage.cpp
+++ b/src/lib/webengine/webpage.cpp
@@ -100,7 +100,7 @@ WebPage::WebPage(QObject* parent)
     });
 
     // Workaround for broken load started/finished signals in QtWebEngine 5.10
-    if (qstrcmp(qVersion(), "5.10.0") == 0) {
+    if (qstrncmp(qVersion(), "5.10.", 5) == 0) {
         connect(this, &QWebEnginePage::loadProgress, this, [this](int progress) {
             if (progress == 100) {
                 emit loadFinished(true);
