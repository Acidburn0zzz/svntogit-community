# $Id$
# Contributor: Kessia 'even' Pinheiro <kessiapinheiro at gmail.com>
# Contributor: Sorin Ionescu <sorin.ionescu@gmail.com>

pkgname=ufw
pkgver=0.29
pkgrel=1
pkgdesc="A simple tool to manage a local host-based firewall"
arch=('i686' 'x86_64')
url="https://launchpad.net/ufw"
license=('GPL3')
backup=('etc/ufw/before.rules'
        'etc/ufw/after.rules'
        'etc/ufw/ufw.conf'
	'etc/ufw/user.rules'
        'etc/ufw/sysctl.conf'
        'etc/default/ufw'
        'var/lib/ufw/user.rules')
depends=('iptables' 'python')
source=("http://launchpad.net/${pkgname}/${pkgver}/${pkgver}/+download/${pkgname}-${pkgver}.tar.gz")
md5sums=('9efdcdab75d04b3b4610bb39ea736188')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"

#  install -D -m0644 ${srcdir}/lsb-3.2/init-functions ${pkgdir}/lib/lsb/init-functions || return 1

  python setup.py install --root=${pkgdir} || return 1
  install -Dm755 ${srcdir}/${pkgname}-${pkgver}/doc/initscript.example ${pkgdir}/etc/rc.d/ufw || return 1
  sed -i 's|init.d|rc.d|' ${pkgdir}/etc/rc.d/ufw || return 1
  install -d ${pkgdir}/usr/bin
  mv ${pkgdir}/usr/sbin/ufw ${pkgdir}/usr/bin/ || return 1
  rm -rf ${pkgdir}/usr/sbin
  chmod 644 ${pkgdir}/etc/ufw/*.rules ${pkgdir}/lib/ufw/*.rules
}
