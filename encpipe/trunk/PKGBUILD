# Maintainer: kpcyrd <kpcyrd[at]archlinux[dot]org>

pkgname=encpipe
pkgver=0.5
pkgrel=1
pkgdesc='Encrypt data from stdin to stdout with libhydrogen'
url='https://github.com/jedisct1/encpipe'
arch=('x86_64')
license=('ISC')
makedepends=('git')
source=("git+https://github.com/jedisct1/${pkgname}.git#tag=${pkgver}")
b2sums=('SKIP')

build() {
  cd ${pkgname}
  #make CFLAGS="${CFLAGS} -Iext/libhydrogen ${LDFLAGS}" bin
  make CFLAGS="${CFLAGS} -Iext/libhydrogen ${LDFLAGS}" bin
}

check() {
  cd ${pkgname}
  make test
}

package() {
  cd ${pkgname}
  install -Dm 755 encpipe -t "${pkgdir}/usr/bin"
  install -Dm 644 LICENSE -t "${pkgdir}/usr/share/licenses/${pkgname}"
}

# vim: ts=2 sw=2 et:
