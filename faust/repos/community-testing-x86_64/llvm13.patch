From 513a5c7f5b0126e18c9dac95f7b85cd2bd3d4c65 Mon Sep 17 00:00:00 2001
From: Stephane Letz <letz@grame.fr>
Date: Sat, 4 Sep 2021 18:09:11 +0200
Subject: [PATCH] Use fs::OF_None type instead of fs::F_None in LLVM code for
 better compatibility.

---
 compiler/generator/llvm/llvm_dsp_aux.hh          | 2 +-
 compiler/generator/llvm/llvm_dynamic_dsp_aux.cpp | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/compiler/generator/llvm/llvm_dsp_aux.hh b/compiler/generator/llvm/llvm_dsp_aux.hh
index 8a980d563..226eb0686 100644
--- a/compiler/generator/llvm/llvm_dsp_aux.hh
+++ b/compiler/generator/llvm/llvm_dsp_aux.hh
@@ -52,7 +52,7 @@
 #define MovePTR(ptr) std::move(ptr)
 #define PASS_MANAGER legacy::PassManager
 #define FUNCTION_PASS_MANAGER legacy::FunctionPassManager
-#define sysfs_binary_flag sys::fs::F_None
+#define sysfs_binary_flag sys::fs::OF_None
 #define OwningPtr std::unique_ptr
 #define llvmcreatePrintModulePass(out) createPrintModulePass(out)
 #define GET_CPU_NAME llvm::sys::getHostCPUName().str()
diff --git a/compiler/generator/llvm/llvm_dynamic_dsp_aux.cpp b/compiler/generator/llvm/llvm_dynamic_dsp_aux.cpp
index 2c4e2211e..740a4440e 100644
--- a/compiler/generator/llvm/llvm_dynamic_dsp_aux.cpp
+++ b/compiler/generator/llvm/llvm_dynamic_dsp_aux.cpp
@@ -423,7 +423,7 @@ bool llvm_dynamic_dsp_factory_aux::writeDSPFactoryToObjectcodeFileAux(const stri
     fModule->setDataLayout(TheTargetMachine->createDataLayout());
 
     error_code EC;
-    raw_fd_ostream  dest(object_code_path.c_str(), EC, sys::fs::F_None);
+    raw_fd_ostream  dest(object_code_path.c_str(), EC, sys::fs::OF_None);
     if (EC) {
         errs() << "ERROR : writeDSPFactoryToObjectcodeFile could not open file : " << EC.message();
         return false;
