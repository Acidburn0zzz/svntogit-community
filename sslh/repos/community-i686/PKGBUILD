# $Id$
# Maintainer: Sebastien Luttringer <seblu+arch@seblu.net>
# Contributor: Le_suisse <lesuisse.dev+aur at gmail dot com>
# Contributor: Jason Rodriguez <jason-aur@catloaf.net>

pkgname=sslh
pkgver=1.10
pkgrel=4
pkgdesc='SSL/SSH/OpenVPN/XMPP/tinc port multiplexer'
arch=('i686' 'x86_64')
url='http://www.rutschle.net/tech/sslh.shtml'
license=('GPL2')
backup=('etc/conf.d/sslh')
source=("http://www.rutschle.net/tech/${pkgname}-${pkgver}.tar.gz"
        'sslh.rc'
        'sslh.conf')
md5sums=('bc34e9a4770d634633e70589c72708cc'
         '42f3cda8f18abdf5edcd762e6dcda5d7'
         '8275b5dd363891139398be1d0e92dd57')

build() {
  cd $pkgname-$pkgver
  # fix archlinux path in manpage
  sed -i -e "s/init.d/rc.d/" sslh.pod
  sed -i -e "s+/etc/default+/etc/conf.d+" sslh.pod
  make
}

package() {
  install -D -m 755 sslh.rc "${pkgdir}/etc/rc.d/sslh"
  install -D -m 644 sslh.conf "${pkgdir}/etc/conf.d/sslh"
  cd $pkgname-$pkgver
  make PREFIX="$pkgdir/usr" install
}

# vim:set ts=2 sw=2 ft=sh et:
