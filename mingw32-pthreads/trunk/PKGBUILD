# $Id$
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Maintainer: Marcel Schneider marcelATcoopmastersDOTde

pkgname=mingw32-pthreads
pkgver=2.8.0
_pkgver=2-8-0
pkgrel=2
arch=(i686 x86_64)
pkgdesc="The POSIX 1003.1-2001 standard for writing multithreaded applications."
license=(LGPL)
makedepends=('mingw32-gcc-base' 'mingw32-runtime' 'mingw32-w32api')
url="http://sourceware.org/pthreads-win32/"
options=(!strip)
source=(ftp://sourceware.org/pub/pthreads-win32/pthreads-w32-$_pkgver-release.tar.gz)
md5sums=('6d30c693233b1464ef8983fedd8ccb22')

build() {
  cd $srcdir/pthreads-w32-$_pkgver-release
  make CROSS=i486-mingw32- clean GC
}

package() {
  cd $srcdir/pthreads-w32-$_pkgver-release
  mkdir $pkgdir/usr
  mkdir $pkgdir/usr/i486-mingw32
  mkdir $pkgdir/usr/i486-mingw32/include
  mkdir $pkgdir/usr/i486-mingw32/lib
  install $srcdir/pthreads-w32-$_pkgver-release/pthread.h $pkgdir/usr/i486-mingw32/include/pthread.h
  install $srcdir/pthreads-w32-$_pkgver-release/sched.h $pkgdir/usr/i486-mingw32/include/sched.h
  install $srcdir/pthreads-w32-$_pkgver-release/semaphore.h $pkgdir/usr/i486-mingw32/include/semaphore.h
  install $srcdir/pthreads-w32-$_pkgver-release/libpthreadGC2.a $pkgdir/usr/i486-mingw32/lib/libpthread.a
  install $srcdir/pthreads-w32-$_pkgver-release/pthreadGC2.dll $pkgdir/usr/i486-mingw32/lib/
}
