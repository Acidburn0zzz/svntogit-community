# $Id$
# Maintainer: Andrea Scarpino <andrea@archlinux.org>
# Contributor: Anders Bergh <anders1@gmail.com>
# Contributor: Dawid Ciezarkiewicz <dawid.ciezarkiewicz@jabster.pl>

pkgname=libphobos
pkgver=1.045
pkgrel=1
pkgdesc="Runtime library for the D programming language"
arch=('i686')
url="http://www.digitalmars.com/d/1.0/"
source=(http://ftp.digitalmars.com/dmd.$pkgver.zip)
depends=(dmd=$pkgver)
license=('custom')
conflicts=('libtango')
md5sums=('c0617a762723212c638d9a9775d70c32')

build() {
  install -d $pkgdir/usr/include/d
  cd $srcdir/dmd/src/phobos
  cp -Rf std $pkgdir/usr/include/d || return 1
  cp -Rf etc $pkgdir/usr/include/d || return 1
  cp -Rf internal $pkgdir/usr/include/d || return 1
  cp -f {crc32,object,gcstats}.d $pkgdir/usr/include/d || return 1

  install -Dm644 $srcdir/dmd/linux/lib/libphobos.a $pkgdir/usr/lib/libphobos.a || return 1
  install -Dm664 $srcdir/dmd/linux/bin/dmd.conf $pkgdir/etc/dmd.conf || return 1

  install -Dm644 phoboslicense.txt $pkgdir/usr/share/licenses/$pkgname/LICENSE || return 1
}
