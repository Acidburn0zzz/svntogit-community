# $Id$
# Maintainer: Balló György <ballogyor+arch at gmail dot com>

pkgname=onboard
pkgver=0.98.1
pkgrel=2
pkgdesc='On-screen keyboard useful on tablet PCs or for mobility impaired users'
arch=('i686' 'x86_64')
url="https://launchpad.net/onboard"
license=('GPL')
depends=('python-dbus' 'python-gobject' 'gtk3' 'python-virtkey' 'librsvg' 'gsettings-desktop-schemas' 'desktop-file-utils' 'dconf' 'hicolor-icon-theme' 'xdg-utils')
makedepends=('python-distutils-extra')
optdepends=('at-spi2-atk: auto-show when editing text'
            'mousetweaks: hover click with mouse')
options=('!emptydirs')
install=$pkgname.install
source=(http://launchpad.net/$pkgname/${pkgver%.*}/$pkgver/+download/$pkgname-$pkgver.tar.gz
        1012_1011.diff
        1013_1012.diff)
md5sums=('107e031b429329b71deb67c9b90195d6'
         '4323f43510003850e127cd0fefdd3e4c'
         '6c7751ecd92532844ecb7e65e4f4746b')

package() {
  cd "$srcdir/$pkgname-$pkgver"

  # Python 3.3 compatibility fixes
  patch -Np0 -i "$srcdir/1012_1011.diff"
  patch -Np0 -i "$srcdir/1013_1012.diff"

  python3 setup.py install --root=$pkgdir/ --optimize=1
}
