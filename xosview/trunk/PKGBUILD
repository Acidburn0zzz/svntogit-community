# $Id: PKGBUILD,v 1.6 2009/05/22 12:23:38 abhidg Exp $
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Maintainer: Juergen Hoetzel <juergen@archlinux.org>
# Contributor: Tom Newsom <Jeepster@gmx.co.uk>

pkgname=xosview
pkgver=1.8.3
pkgrel=2
pkgdesc="Displays system stats such as cpu, memory, swap, and network usage"
arch=(i686 x86_64)
depends=('gcc-libs' 'libxpm')
license=('GPL')
source=(http://downloads.sourceforge.net/$pkgname/$pkgname-$pkgver.tar.gz)
md5sums=('88cf9fecfcc27a42d132d1f983c1f091')
url="http://xosview.sourceforge.net/"

build() {
  cd $startdir/src/$pkgname-$pkgver
  LIBS=-L: ./configure --prefix=/usr # Workaround: avoid empty -L in configure script

  sed -i \
	's|#include <linux/serial_reg.h>|#include </usr/src/linux-2.6.23-ARCH/include/linux/serial_reg.h>|' \
	linux/serialmeter.cc || return 1

  /usr/bin/make || return 1
  mkdir -p $startdir/pkg/usr/{bin,man/man1,lib/X11/app-defaults} 
  /usr/bin/make PREFIX_TO_USE=$startdir/pkg/usr MANDIR=$startdir/pkg/usr/man/man1 install 
}
# vim: ts=2 sw=2 et ft=sh
