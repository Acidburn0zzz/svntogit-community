# $Id$
# Maintainer: Brad Fanella <bradfanella@archlinux.us>
# Contributor: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Contributor: William Rea <sillywilly@gmail.com>

pkgname=webboard
pkgver=0.2
pkgrel=6
pkgdesc="A pygtk frontend to pastebin"
arch=('any')
url="http://pimpzkru.de/sebi/webboard"
license=('GPL')
depends=('gnome-python' 'gnome-panel')
makedepends=('intltool')
source=(http://pimpzkru.de/sebi/$pkgname/$pkgname-$pkgver.tar.gz \
	fix.patch)
install=($pkgname.install)
md5sums=('f3ad811e19f054d9f01a499b2d924392'
         '0da9bc7a99419817e12839846286b004')

build() {
	cd $srcdir/$pkgname-$pkgver
	patch -p1 -i ../fix.patch

	# python2 fix
	for file in build/scripts-2.6/{webboard,webboard-applet} build/scripts-2.4/{webboard,webboard-applet} build/lib/webboard/webboard.py src/{webboard,webboard.py,webboard-applet} setup.py; do
      		echo "Applying python2 fix for ${file}"
		sed -i 's_/usr/bin/env python_/usr/bin/env python2_' ${file}
		sed -i 's_/usr/bin/python_/usr/bin/python2_' ${file}
  	done

}
package() {
	cd $srcdir/$pkgname-$pkgver
	python setup.py install --root=$pkgdir --prefix=/usr
}
