# $Id$
# Maintainer: Alexander RÃ¸dseth <rodseth@gmail.com>
# Contributor: Allan McRae <allan@archlinux.org>
# Contributor: Eduard "bekks" Warkentin <eduard.warkentin@gmail.com>
# Contributor: Henning Garus <henning.garus@gmail.com>

pkgname=xdelta3
pkgver=3.0.7
pkgrel=2
pkgdesc='Diff utility which works with binary files'
arch=('x86_64' 'x86_64')
url='http://xdelta.org/'
license=('GPL')
depends=('xz')
source=("http://${pkgname/3}.googlecode.com/files/$pkgname-$pkgver.tar.gz"
        "${pkgname/3/}-$pkgver-regtest_size_t.patch")
sha256sums=('ef6631e4f9219a80bcb9e3020962b6ec'
         '450492f0065160c2287b7e89223726e0')

prepare() {
  cd "$pkgname-$pkgver"
  
  patch -Np1 -i "../${pkgname/3}-$pkgver-regtest_size_t.patch"
}

build() {
  cd "$pkgname-$pkgver"
  
  ./configure --prefix=/usr
  make
}

check() {
  cd "$pkgname-$pkgver"

  "./$pkgname" test
}

package() {
  make -C "$pkgname-$pkgver" DESTDIR="$pkgdir" install
}

# vim:set ts=2 sw=2 et:
