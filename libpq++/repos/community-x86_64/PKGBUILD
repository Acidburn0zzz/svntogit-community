
pkgname=libpq++
pkgver=4.0
pkgrel=2
pkgdesc="C++ bindings for PostgreSQL"
arch=('i686' 'x86_64')
url="http://gborg.postgresql.org/project/libpqpp/"
license=('BSD')
depends=('gcc-libs' 'postgresql')
source=(http://gborg.postgresql.org/download/libpqpp/stable/$pkgname-$pkgver.tar.gz)
md5sums=('da71cb79ef45cef55f4bc97a33a0857d')

build() {
  cd $startdir/src/$pkgname-$pkgver
  sed -i 's|^POSTGRES_HOME.*|POSTGRES_HOME=/usr|' Makefile
  [ "$CARCH" = "x86_64" ] && export CXXFLAGS="$CXXFLAGS -fPIC"
  make || return 1
  mkdir -p $startdir/pkg/usr/{lib,include}
  make POSTGRES_HOME=$startdir/pkg/usr install
  ln -sf libpq++.so.4.0 $startdir/pkg/usr/lib/libpq++.so
}
