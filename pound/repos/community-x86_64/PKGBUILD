# Maintainer: Douglas Soares de Andrade <dsa@aur.archlinux.org>
# Contributor: Roberto Alsina <ralsina@kde.org>

pkgname=pound
pkgver=2.4.5
pkgrel=1
pkgdesc="A reverse proxy, load balancer, and SSL wrapper"
arch=('i686' 'x86_64')
url="http://www.apsis.ch/pound/index_html"
license=('GPL')
depends=('pcre' 'openssl')
source=(http://www.apsis.ch/pound/Pound-$pkgver.tgz pound.init pound.runit)
md5sums=('4c4613e857ee14c06c61ab09e28ae503'
         '4df8548f106fca08323e8e4071beaa43'
         '716cc0bf334b594751bece24c7d1df2d')

build() {
    cd $startdir/src/Pound-$pkgver
    ./configure --prefix=/usr --sysconfdir=/etc/pound
    make || return 1
    install -d $startdir/pkg/usr/sbin
    make DESTDIR=$startdir/pkg install || return 1
    chown root.root -R $startdir/pkg/usr
    install -d $startdir/pkg/etc/rc.d
    install -m0755 ../pound.init $startdir/pkg/etc/rc.d/pound
    install -d $startdir/pkg/etc/sv
    install -d $startdir/pkg/etc/sv/pound
    install -m0755 ../pound.runit $startdir/pkg/etc/sv/pound/run
}
