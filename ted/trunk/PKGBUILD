# $Id: PKGBUILD,v 1.6 2009/07/15 12:16:40 spupykin Exp $
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>

pkgname=ted
pkgver=2.17
pkgrel=3
pkgdesc="An easy rich text processor (with footnote support)"
arch=('i686' 'x86_64')
url="http://www.nllgg.nl/Ted/"
depends=('lesstif' 'bash' 'libtiff' 'libxmu' 'libxpm' 'libpng')
license=('GPL')
source=(ftp://ftp.nluug.nl/pub/editors/$pkgname/$pkgname-$pkgver.src.tar.gz)
md5sums=('8adc2ab0a67954b2b5068c9be243c82d')

build() {
  cd $startdir/src/Ted-$pkgver
  sed -i "s|--with-MOTIF|--with-MOTIF --prefix=/usr/lib/|g" Makefile
  make compile.shared || return 1
  make package.shared
  mkdir -p $startdir/pkg/usr/lib/
  cd $startdir/pkg/usr/lib/
  tar -zxvf $startdir/src/Ted-$pkgver/tedPackage/Ted_${pkgver}_Linux_${CARCH}.tar.gz
  mv bin ../
  mkdir -p $startdir/pkg/usr/man/man1
  cd $startdir/pkg/usr/lib/Ted/
  mv Ted.1 rtf2pdf.1 rtf2ps.1 ../../man/man1/
  sed -i "s|usr/local/afm|usr/lib/afm|g" gsafm.sh
  mv rtf2pdf.sh rtf2ps.sh fixOpenOfficeRtf.sh gsafm.sh pfadir.sh pfbdir.sh ttfdir.sh ttfdirpfb.sh $startdir/pkg/usr/bin/
}
