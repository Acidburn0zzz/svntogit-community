# $Id$
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Contributor: nut543 <kfs1@online.no>

pkgbase=freedroidrpg
pkgname=('freedroidrpg' 'freedroidrpg-data')
pkgver=0.13
pkgrel=1
pkgdesc="a mature science fiction role playing game set in the future"
arch=('i686' 'x86_64' 'any')
url="http://freedroid.sourceforge.net"
license=("GPL")
source=(http://downloads.sourceforge.net/sourceforge/freedroid/freedroidrpg-$pkgver.tar.bz2 \
	freedroidrpg.jpg \
	freedroidrpg.desktop)
md5sums=('9109ffb242021ee2074767a5bfad63d4'
         'b73d9dac44c7e83a6c80fbe4eb96ba79'
         '9a10c2a2064439cdcff5b945dfb1c3ac')

build() {
  cd $startdir/src/$pkgname-$pkgver

  install -D -m644 $startdir/src/freedroidrpg.jpg $startdir/pkg/usr/share/icons/freedroidrpg.jpg && \
  install -D -m644 $startdir/src/freedroidrpg.desktop $startdir/pkg/usr/share/applications/freedroidrpg.desktop || return 1

  ./configure --prefix=/usr
  make DESTDIR=$startdir/pkgtmp install
}

package_freedroidrpg() {
  depends=('sdl_mixer' 'sdl_image' 'libogg' 'libvorbis' 'libgl' 'freedroidrpg-data')

  mkdir $pkgdir/usr
  mv $startdir/pkgtmp/usr/bin $pkgdir/usr/
}

package_freedroidrpg-data() {
  pkgdesc="a mature science fiction role playing game set in the future (data files)"
  depends=()
  arch=('any')
  CARCH=any

  mkdir $pkgdir/usr
  mv $startdir/pkgtmp/usr/share $pkgdir/usr/ || return 1

  rm -rf $startdir/pkgtmp
}
