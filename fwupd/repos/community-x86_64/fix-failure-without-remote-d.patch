From f04923ae2ff186a10802c3b236855c612d676fea Mon Sep 17 00:00:00 2001
From: Richard Hughes <richard@hughsie.com>
Date: Tue, 13 Jun 2017 10:15:40 +0100
Subject: [PATCH] trivial: Don't fail to refresh if a remotes.d does not exist

Resolves: https://github.com/hughsie/fwupd/issues/137
---
 libfwupd/fwupd-client.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/libfwupd/fwupd-client.c b/libfwupd/fwupd-client.c
index 1601b2a..814802c 100644
--- a/libfwupd/fwupd-client.c
+++ b/libfwupd/fwupd-client.c
@@ -1294,6 +1294,8 @@ fwupd_client_add_remotes_for_path (FwupdClient *client,
 	g_autoptr(GDir) dir = NULL;
 
 	path_remotes = g_build_filename (path, "remotes.d", NULL);
+	if (!g_file_test (path_remotes, G_FILE_TEST_EXISTS))
+		return TRUE;
 	dir = g_dir_open (path_remotes, 0, error);
 	if (dir == NULL)
 		return FALSE;
