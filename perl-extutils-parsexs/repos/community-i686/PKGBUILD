# This PKGBUILD was generated by cpan4pacman via CPANPLUS::Dist::Pacman
# Maintainer: Francois Charette <firmicus@gmx.net>
pkgname=perl-extutils-parsexs
pkgver=2.18
pkgrel=5
pkgdesc="Converts Perl XS code into C code"
url="http://search.cpan.org/dist/ExtUtils-ParseXS"
makedepends=('perl-extutils-cbuilder')
arch=('i686' 'x86_64')
license=(GPL)
options=('!emptydirs')
source=(http://www.cpan.org/authors/id/K/KW/KWILLIAMS/ExtUtils-ParseXS-$pkgver.tar.gz)
md5sums=('473a59a9a4b9887137dab156e5312ff7')
install=parsexs.install

build() {
  cd  $startdir/src/ExtUtils-ParseXS-$pkgver
  eval `perl -V:archname`
  /usr/bin/perl Makefile.PL \
      INSTALLARCHLIB=/usr/lib/perl5/current/${archname} \
      INSTALLSITELIB=/usr/lib/perl5/site_perl/current \
      INSTALLSITEARCH=/usr/lib/perl5/site_perl/current/${archname}
  sed -i 's|5\.8\.8|current|' Makefile
  /usr/bin/make || return 1
  /usr/bin/make DESTDIR=$startdir/pkg install
  # remove *.pod, .packlist:
  /usr/bin/find $startdir/pkg -name '.packlist' -delete
  /usr/bin/find $startdir/pkg -name '*.pod' -delete
  # this will replace core perl's xsubpp after install:
  mv $startdir/pkg/usr/lib/perl5/current/ExtUtils/xsubpp $startdir/pkg/usr/lib/perl5/current/ExtUtils/xsubpp.new 
}
