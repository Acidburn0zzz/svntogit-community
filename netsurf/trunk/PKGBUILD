# Contributor: Paulo Matias <matiasΘarchlinux-br·org>
# Contributor: Georgij Kondratjev <smpuj@bk.ru>
# Maintainer: Daniel J Griffiths <ghost1227@archlinux.us>

pkgname=netsurf
pkgver=2.6
pkgrel=1
pkgdesc="Lightweight, fast web browser"
arch=('i686' 'x86_64')
url="http://www.netsurf-browser.org/"
license=('GPL')
depends=('libmng' 'librsvg' 'curl' 'libglade' 'lcms' 'libjpeg>=7'
	 'libwapcaplet' 'libcss')
makedepends=('re2c' 'libnsbmp' 'libnsgif' 'hubbub')
source=("http://www.netsurf-browser.org/downloads/releases/${pkgname}-${pkgver}-src.tar.gz")
md5sums=('8653789d2ede6dbbfe79882afc7538fc')

build() {
	cd ${srcdir}/${pkgname}

	sed -i 's#GtkNotebookPage#GtkWidget#' gtk/gtk_tabs.c
	sed -i 's#GTK_WIDGET_SET_FLAGS(GTK_WIDGET(g->layout), GTK_CAN_FOCUS);#gtk_widget_set_can_focus(GTK_WIDGET(g->layout), true);#' \
            gtk/gtk_window.c
}

package() {
	cd ${srcdir}/${pkgname}

	make install DESTDIR=${pkgdir} PREFIX=/usr NETSURF_USE_HARU_PDF=NO
}
