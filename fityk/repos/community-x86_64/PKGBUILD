# Maintainer: Thomas Dziedzic < gostrc at gmail >
# Contributor: Anton Bazhenov <anton.bazhenov at gmail>
# Contributor: Cuneyt Unlu <unlucu AT gmail.com>

pkgname=fityk
pkgver=1.0.1
pkgrel=1
pkgdesc='A program for nonlinear fitting of analytical functions to data.'
arch=('i686' 'x86_64')
url='http://www.unipress.waw.pl/fityk/'
license=('GPL')
depends=('boost-libs' 'xylib' 'wxgtk' 'shared-mime-info')
makedepends=('boost' 'git' 'python-sphinx')
options=('!libtool')
install=${pkgname}.install
source=('http://prdownloads.sourceforge.net/wxwindows/wxWidgets-2.9.1.tar.bz2')
md5sums=('81c20d7b2ba31becb18e467dbe09be8f')

build() {
  cd wxWidgets-2.9.1
  ./configure --prefix=${srcdir}/usr --disable-shared --with-libpng=sys --with-libxpm=sys --with-libjpeg=sys --with-libtiff=sys
  make
  make install

  cd ${srcdir}
  git clone git://github.com/wojdyr/fityk.git
  cd fityk
  ##git checkout v${pkgver}
  #cd ${pkgname}-${pkgver}

  # disable xyconvert because wxwidgets>=2.9 is needed (dev version) and it isn't standard with arch yet
    #--disable-xyconvert \
  ./autogen.sh \
    --prefix=/usr \
    --without-doc \
    --with-wx-prefix=${srcdir}/usr
  #./configure \

  make
}

package() {
  cd fityk

  make DESTDIR=${pkgdir} install
}
