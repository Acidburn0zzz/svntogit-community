# Contributor: Andrej Gelenberg <andrej.gelenberg@udo.edu>
pkgname="openbsd-netcat"
pkgver=1.89
pkgrel=4
pkgdesc="TCP/IP swiss army knife. OpenBSD variant."
arch=('i686' 'x86_64')
url="http://packages.debian.org/sid/netcat-openbsd"
license=('BSD')
depends=('glib2')
makedepends=('gcc' 'make')
source=("http://ftp.debian.org/debian/pool/main/n/netcat-openbsd/netcat-openbsd_${pkgver}.orig.tar.gz" "http://ftp.debian.org/debian/pool/main/n/netcat-openbsd/netcat-openbsd_${pkgver}-${pkgrel}.diff.gz")

md5sums=('7238ce15aae43069e96ba7faf03f153e'
         '00c65aa22243b76998174c733cbb64cc')
sha512sums=('4e18289c507461fb8257e466ab082a2b18489218c3065af5b4626369cd3acb378f68eb69cfe77ff46d5fba222c12e2bc30dc71c0a88d2921a7e513b926b8b75d'
            '5316f7405586e99ea91950ab2f791288d2d2376876f683b029bf48b4e72d56fa61ba5ada68d10c785fe134c6e7f9d1cabd22d14513d0e49da33766943544779e')

build() {
	cd ${startdir}/src/netcat-openbsd-${pkgver}.orig
	patch -p1 < ../netcat-openbsd_${pkgver}-${pkgrel}.diff
	for i in `cat debian/patches/series`
	do
		echo "** patch $i" 1>&2
		cat "debian/patches/$i"
	done | patch -p1 
	make CFLAGS="$CFLAGS -DDEBIAN_VERSION=\"\\\"${pkgrel}\\\"\""
	install -d ${startdir}/pkg/usr/bin/
	install -d ${startdir}/pkg/usr/share/man/man1/
	install nc ${startdir}/pkg/usr/bin/nc.openbsd
	install nc.1 ${startdir}/pkg/usr/share/man/man1/nc.openbsd.1
}

# vim:ts=4:sw=4:noet:enc=utf-8:
