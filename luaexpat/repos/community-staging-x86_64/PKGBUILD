# $Id$
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Contributor: Lucas Hermann Negri <kkndrox@gmail.com>

pkgbase=luaexpat
pkgname=(lua-expat)
pkgver=1.2.0
pkgrel=1
pkgdesc='SAX XML parser based on the Expat library'
arch=('i686' 'x86_64')
url='http://code.matthewwild.co.uk/lua-expat'
license=('MIT')
makedepends=('gcc' 'lua' 'expat>=2')
replaces=(luaexpat)
conflicts=(luaexpat)
source=("http://matthewwild.co.uk/projects/luaexpat/luaexpat-$pkgver.tar.gz"
	'newconfig'
	'lua52.patch')
md5sums=('03efe50c7f30a34580701e6527d7bfee'
         '60ae0633ac6f829cc3359f3533252eb0'
         '21da93cbf0d3cef80d00e2380b7c2679')

build() {
  cd $pkgbase-$pkgver
  patch -p1 < "$srcdir/lua52.patch"
  cp -L "$srcdir/newconfig" config
  make
}

package_lua-expat() {
  depends=('lua' 'expat')
  cd $pkgbase-$pkgver
  make DESTDIR="$pkgdir" install
  mv usr "$pkgdir"
  install -Dm0644 doc/us/license.html "$pkgdir/usr/share/licenses/$pkgname/license.html"
}
