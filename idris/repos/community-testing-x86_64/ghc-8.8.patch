From 1dd93169c93a29a8cc4c3d0ec799166490b607bb Mon Sep 17 00:00:00 2001
From: Niklas Larsson <niklas@mm.st>
Date: Wed, 22 Jan 2020 20:50:20 +0100
Subject: [PATCH 01/11] Compatibility with GHC 8.8 and Cabal 3.0

---
 idris.cabal                | 11 ++++++-----
 src/Idris/CmdOptions.hs    |  5 +++--
 src/Idris/Core/CaseTree.hs |  2 +-
 src/Idris/Core/TT.hs       |  6 ++++++
 src/Idris/Parser/Stack.hs  |  3 ++-
 5 files changed, 18 insertions(+), 9 deletions(-)

diff --git a/idris.cabal b/idris.cabal
index a31c02b59..23c198498 100644
--- a/idris.cabal
+++ b/idris.cabal
@@ -100,7 +100,7 @@ source-repository head

 custom-setup
   setup-depends:
-    Cabal >= 1.10 && <2.5,
+    Cabal >= 1.10 && < 3.1,
     base  >= 4 && <5,
     directory,
     filepath,
@@ -280,7 +280,7 @@ Library
                 , blaze-html >= 0.6.1.3 && < 0.10
                 , blaze-markup >= 0.5.2.1 && < 0.9
                 , bytestring < 0.11
-                , cheapskate >= 0.1.1 && < 0.2
+                , cheapskate >= 0.1.1.2 && < 0.2
                 , code-page >= 0.1 && < 0.3
                 , containers >= 0.5 && < 0.7
                 , deepseq < 1.5
@@ -292,7 +292,7 @@ Library
                 , megaparsec >= 7.0.4 && < 8
                 , mtl >= 2.1 && < 2.3
                 , network >= 2.7 && < 2.9
-                , optparse-applicative >= 0.13 && < 0.15
+                , optparse-applicative >= 0.13 && < 0.16
                 , parser-combinators >= 1.0.0
                 , pretty < 1.2
                 , process < 1.7
@@ -300,8 +300,8 @@ Library
                 , safe >= 0.3.9
                 , split < 0.3
                 , terminal-size < 0.4
-                , text >=1.2.1.0 && < 1.3
-                , time >= 1.4 && < 1.9
+                , text >=1.2.1.0 && < 1.4
+                , time >= 1.4 && < 2.0
                 , transformers >= 0.5 && < 0.6
                 , uniplate >=1.6 && < 1.7
                 , unordered-containers < 0.3
@@ -314,6 +314,7 @@ Library

   if !impl(ghc >= 8.0)
     Build-Depends: semigroups == 0.18.*
+                , fail == 4.9.0.*

   Default-Language: Haskell2010
   ghc-prof-options: -auto-all -caf-all
diff --git a/src/Idris/CmdOptions.hs b/src/Idris/CmdOptions.hs
index ed1dd9f1c..c9cf5a23b 100644
--- a/src/Idris/CmdOptions.hs
+++ b/src/Idris/CmdOptions.hs
@@ -18,6 +18,7 @@ import Idris.Info (getIdrisVersion)
 import Idris.Options
 import IRTS.CodegenCommon

+import qualified Control.Monad.Fail as Fail
 import Control.Monad.Trans (lift)
 import Control.Monad.Trans.Except (throwE)
 import Control.Monad.Trans.Reader (ask)
@@ -264,7 +265,7 @@ parseCodegen :: String -> Codegen
 parseCodegen "bytecode" = Bytecode
 parseCodegen cg         = Via IBCFormat (map toLower cg)

-parseLogCats :: Monad m => String -> m [LogCat]
+parseLogCats :: Fail.MonadFail m => String -> m [LogCat]
 parseLogCats s =
     case lastMay (readP_to_S doParse s) of
       Just (xs, _) -> return xs
@@ -290,7 +291,7 @@ parseLogCats s =
       s <- look
       fail $ "Category: " ++ s ++ " is not recognised."

-parseConsoleWidth :: Monad m => String -> m ConsoleWidth
+parseConsoleWidth :: Fail.MonadFail m => String -> m ConsoleWidth
 parseConsoleWidth "auto"     = return AutomaticWidth
 parseConsoleWidth "infinite" = return InfinitelyWide
 parseConsoleWidth  s =
diff --git a/src/Idris/Core/CaseTree.hs b/src/Idris/Core/CaseTree.hs
index 5779a66ba..559d5943b 100644
--- a/src/Idris/Core/CaseTree.hs
+++ b/src/Idris/Core/CaseTree.hs
@@ -627,7 +627,7 @@ groupCons cs = gc [] cs
         PConst cval -> return $ addConG cval (ps, res) acc
         PSuc n -> return $ addg False CSuc [n] (ps, res) acc
         PReflected fn args -> return $ addg False (CFn fn) args (ps, res) acc
-        pat -> fail $ show pat ++ " is not a constructor or constant (can't happen)"
+        pat -> error $ show pat ++ " is not a constructor or constant (can't happen)"

     addg uniq c conargs res []
            = [ConGroup uniq c [(conargs, res)]]
diff --git a/src/Idris/Core/TT.hs b/src/Idris/Core/TT.hs
index 5c34bd586..ee5d5891a 100644
--- a/src/Idris/Core/TT.hs
+++ b/src/Idris/Core/TT.hs
@@ -70,6 +70,7 @@ import qualified Prelude as S (Semigroup(..))
 import Control.Applicative (Alternative, Applicative(..))
 import qualified Control.Applicative as A (Alternative(..))
 import Control.DeepSeq (($!!))
+import qualified Control.Monad.Fail as Fail
 import Control.Monad.State.Strict
 import Data.Binary hiding (get, put)
 import Data.Char
@@ -324,6 +325,11 @@ bindTC x k = case x of
 instance Monad TC where
     return x = OK x
     x >>= k = bindTC x k
+#if !(MIN_VERSION_base(4,12,0))
+    fail = Fail.fail
+#endif
+
+instance Fail.MonadFail TC where
     fail e = Error (InternalMsg e)

 instance MonadPlus TC where
diff --git a/src/Idris/Parser/Stack.hs b/src/Idris/Parser/Stack.hs
index f75789ab6..c5dd38ec7 100644
--- a/src/Idris/Parser/Stack.hs
+++ b/src/Idris/Parser/Stack.hs
@@ -36,6 +36,7 @@ import Idris.Core.TT (FC(..))
 import Idris.Output (Message(..))

 import Control.Arrow (app)
+import qualified Control.Monad.Fail as Fail
 import Control.Monad.State.Strict (StateT(..), evalStateT)
 import Control.Monad.Writer.Strict (MonadWriter(..), WriterT(..), listen,
                                     runWriterT, tell)
@@ -51,7 +52,7 @@ import qualified Util.Pretty as PP
 type Parser s = StateT s (WriterT FC (P.Parsec Void String))

 -- | A constraint for parsing without state
-type Parsing m = (P.MonadParsec Void String m, MonadWriter FC m)
+type Parsing m = (Fail.MonadFail m, P.MonadParsec Void String m, MonadWriter FC m)

 -- | Run the Idris parser stack
 runparser :: Parser st res -> st -> String -> String -> Either ParseError res

From b5a6637da8ab21f26b8bee3d1b2cac1ab814f24b Mon Sep 17 00:00:00 2001
From: Niklas Larsson <niklas@mm.st>
Date: Sat, 25 Jan 2020 00:51:38 +0100
Subject: [PATCH 02/11] Rename expected, input and run

Because cabal's wildcards are broken and doesn't allow
files without file endings.
---
 Setup.hs                                      |  33 -----
 idris.cabal                                   | 116 +++++++++++-------
 test/README.md                                |  10 +-
 test/TestRun.hs                               |   4 +-
 test/base001/{expected => expected.out}       |   0
 test/base001/{run => run.sh}                  |   2 +-
 test/basic001/{expected => expected.out}      |   0
 test/basic001/{run => run.sh}                 |   0
 test/basic002/{expected => expected.out}      |   0
 test/basic002/{run => run.sh}                 |   0
 test/basic003/{expected => expected.out}      |   0
 test/basic003/{run => run.sh}                 |   0
 test/basic004/{expected => expected.out}      |   0
 test/basic004/{run => run.sh}                 |   0
 test/basic005/{expected => expected.out}      |   0
 test/basic005/{run => run.sh}                 |   0
 test/basic006/{expected => expected.out}      |   0
 test/basic006/{run => run.sh}                 |   0
 test/basic007/{expected => expected.out}      |   0
 test/basic007/{run => run.sh}                 |   0
 test/basic008/{expected => expected.out}      |   0
 test/basic008/{run => run.sh}                 |   0
 test/basic009/{expected => expected.out}      |   0
 test/basic009/{run => run.sh}                 |   0
 test/basic010/{expected => expected.out}      |   0
 test/basic010/{run => run.sh}                 |   0
 test/basic011/{expected => expected.out}      |   0
 test/basic011/{run => run.sh}                 |   0
 test/basic012/{expected => expected.out}      |   0
 test/basic012/{run => run.sh}                 |   0
 test/basic013/{expected => expected.out}      |   0
 test/basic013/{run => run.sh}                 |   0
 test/basic014/{expected => expected.out}      |   0
 test/basic014/{run => run.sh}                 |   0
 test/basic015/{expected => expected.out}      |   0
 test/basic015/{run => run.sh}                 |   0
 test/basic016/{expected => expected.out}      |   0
 test/basic016/{run => run.sh}                 |   0
 test/basic017/{expected => expected.out}      |   0
 test/basic017/{run => run.sh}                 |   0
 test/basic018/{expected => expected.out}      |   0
 test/basic018/{run => run.sh}                 |   0
 test/basic019/{expected => expected.out}      |   0
 test/basic019/{run => run.sh}                 |   0
 test/basic020/{expected => expected.out}      |   0
 test/basic020/{run => run.sh}                 |   0
 test/basic021/{expected => expected.out}      |   0
 test/basic021/{run => run.sh}                 |   0
 test/basic022/{expected => expected.out}      |   0
 test/basic022/{run => run.sh}                 |   0
 test/basic023/{expected => expected.out}      |   0
 test/basic023/{run => run.sh}                 |   0
 test/basic024/{expected => expected.out}      |   0
 test/basic024/{input => input.in}             |   0
 test/basic024/{run => run.sh}                 |   2 +-
 test/basic025/{expected => expected.out}      |   0
 test/basic025/{input => input.in}             |   0
 test/basic025/{run => run.sh}                 |   4 +-
 test/basic026/{expected => expected.out}      |   0
 test/basic026/{run => run.sh}                 |   0
 test/bignum001/{expected => expected.out}     |   0
 test/bignum001/{run => run.sh}                |   0
 test/bignum002/{expected => expected.out}     |   0
 test/bignum002/{run => run.sh}                |   0
 test/bignum003/{expected => expected.out}     |   0
 test/bignum003/{run => run.sh}                |   0
 test/bounded001/{expected => expected.out}    |   0
 test/bounded001/{run => run.sh}               |   0
 test/buffer001/{expected => expected.out}     |   0
 test/buffer001/{run => run.sh}                |   0
 test/buffer002/{expected => expected.out}     |   0
 test/buffer002/{run => run.sh}                |   0
 test/contrib001/{expected => expected.out}    |   0
 test/contrib001/{run => run.sh}               |   0
 test/corecords001/{expected => expected.out}  |   0
 test/corecords001/{run => run.sh}             |   0
 test/corecords002/{expected => expected.out}  |   0
 test/corecords002/{run => run.sh}             |   0
 test/delab001/{expected => expected.out}      |   0
 test/delab001/{input => input.in}             |   0
 test/delab001/{run => run.sh}                 |   2 +-
 test/directives001/{expected => expected.out} |   0
 test/directives001/{run => run.sh}            |   0
 test/directives002/{expected => expected.out} |   0
 test/directives002/{run => run.sh}            |   0
 test/directives003/{expected => expected.out} |   0
 test/directives003/{run => run.sh}            |   0
 test/disambig002/{expected => expected.out}   |   0
 test/disambig002/{run => run.sh}              |   0
 test/docs001/{expected => expected.out}       |   0
 test/docs001/{input => input.in}              |   0
 test/docs001/{run => run.sh}                  |   2 +-
 test/docs002/{expected => expected.out}       |   0
 test/docs002/{input => input.in}              |   0
 test/docs002/{run => run.sh}                  |   2 +-
 test/docs003/{expected => expected.out}       |   0
 test/docs003/{input => input.in}              |   0
 test/docs003/{run => run.sh}                  |   2 +-
 test/docs004/{expected => expected.out}       |   0
 test/docs004/{input => input.in}              |   0
 test/docs004/{run => run.sh}                  |   2 +-
 test/docs005/{expected => expected.out}       |   0
 test/docs005/{input => input.in}              |   0
 test/docs005/{run => run.sh}                  |   2 +-
 test/docs006/{expected => expected.out}       |   0
 test/docs006/{input => input.in}              |   0
 test/docs006/{run => run.sh}                  |   2 +-
 test/dsl001/{expected => expected.out}        |   0
 test/dsl001/{input => input.in}               |   0
 test/dsl001/{run => run.sh}                   |   2 +-
 test/dsl002/{expected => expected.out}        |   0
 test/dsl002/{run => run.sh}                   |   0
 test/dsl003/{expected => expected.out}        |   0
 test/dsl003/{run => run.sh}                   |   0
 test/dsl004/{expected => expected.out}        |   0
 test/dsl004/{run => run.sh}                   |   0
 test/effects001/{expected => expected.out}    |   0
 test/effects001/{run => run.sh}               |   0
 test/effects002/{expected => expected.out}    |   0
 test/effects002/{run => run.sh}               |   0
 test/effects003/{expected => expected.out}    |   0
 test/effects003/{input => input.in}           |   0
 test/effects003/{run => run.sh}               |   2 +-
 test/effects004/{expected => expected.out}    |   0
 test/effects004/{input => input.in}           |   0
 test/effects004/{run => run.sh}               |   2 +-
 test/effects005/{expected => expected.out}    |   0
 test/effects005/{run => run.sh}               |   0
 test/error001/{expected => expected.out}      |   0
 test/error001/{run => run.sh}                 |   0
 test/error002/{expected => expected.out}      |   0
 test/error002/{run => run.sh}                 |   0
 test/error003/{expected => expected.out}      |   0
 test/error003/{run => run.sh}                 |   0
 test/error004/{expected => expected.out}      |   0
 test/error004/{run => run.sh}                 |   0
 test/error005/{expected => expected.out}      |   0
 test/error005/{run => run.sh}                 |   0
 test/error006/{expected => expected.out}      |   0
 test/error006/{run => run.sh}                 |   0
 test/error007/{expected => expected.out}      |   0
 test/error007/{run => run.sh}                 |   0
 test/error008/{expected => expected.out}      |   0
 test/error008/{run => run.sh}                 |   0
 test/error009/{expected => expected.out}      |   0
 test/error009/{run => run.sh}                 |   0
 test/ffi001/{expected => expected.out}        |   0
 test/ffi001/{run => run.sh}                   |   0
 test/ffi002/{expected => expected.out}        |   0
 test/ffi002/{run => run.sh}                   |   0
 test/ffi003/{expected => expected.out}        |   0
 test/ffi003/{input => input.in}               |   0
 test/ffi003/{run => run.sh}                   |   2 +-
 test/ffi004/{expected => expected.out}        |   0
 test/ffi004/{run => run.sh}                   |   0
 test/ffi005/{expected => expected.out}        |   0
 test/ffi005/{run => run.sh}                   |   0
 test/ffi006/{expected => expected.out}        |   0
 test/ffi006/{run => run.sh}                   |   0
 test/ffi007/{expected => expected.out}        |   0
 test/ffi007/{run => run.sh}                   |   0
 test/ffi008/{expected => expected.out}        |   0
 test/ffi008/{run => run.sh}                   |   0
 test/ffi009/{expected => expected.out}        |   0
 test/ffi009/{run => run.sh}                   |   0
 test/ffi010/{expected => expected.out}        |   0
 test/ffi010/{run => run.sh}                   |   0
 test/ffi011/{expected => expected.out}        |   0
 test/ffi011/{run => run.sh}                   |   0
 test/ffi012/{expected => expected.out}        |   0
 test/ffi012/{run => run.sh}                   |   0
 test/ffi013/{expected => expected.out}        |   0
 test/ffi013/{run => run.sh}                   |   0
 test/folding001/{expected => expected.out}    |   0
 test/folding001/{run => run.sh}               |   0
 test/idrisdoc001/{expected => expected.out}   |   0
 test/idrisdoc001/{run => run.sh}              |   0
 test/idrisdoc002/{expected => expected.out}   |   0
 test/idrisdoc002/{run => run.sh}              |   0
 test/idrisdoc003/{expected => expected.out}   |   0
 test/idrisdoc003/{run => run.sh}              |   0
 test/idrisdoc004/{expected => expected.out}   |   0
 test/idrisdoc004/{run => run.sh}              |   0
 test/idrisdoc005/{expected => expected.out}   |   0
 test/idrisdoc005/{run => run.sh}              |   0
 test/idrisdoc006/{expected => expected.out}   |   0
 test/idrisdoc006/{run => run.sh}              |   0
 test/idrisdoc007/{expected => expected.out}   |   0
 test/idrisdoc007/{run => run.sh}              |   0
 test/idrisdoc008/{expected => expected.out}   |   0
 test/idrisdoc008/{run => run.sh}              |   0
 test/idrisdoc009/{expected => expected.out}   |   0
 test/idrisdoc009/{input => input.in}          |   0
 test/idrisdoc009/{run => run.sh}              |   2 +-
 .../interactive001/{expected => expected.out} |   0
 test/interactive001/{input => input.in}       |   0
 test/interactive001/{run => run.sh}           |   2 +-
 .../interactive002/{expected => expected.out} |   0
 test/interactive002/{input => input.in}       |   0
 test/interactive002/{run => run.sh}           |   2 +-
 .../interactive003/{expected => expected.out} |   0
 test/interactive003/{input => input.in}       |   0
 test/interactive003/{run => run.sh}           |   2 +-
 .../interactive004/{expected => expected.out} |   0
 test/interactive004/{input => input.in}       |   0
 test/interactive004/{run => run.sh}           |   2 +-
 .../interactive005/{expected => expected.out} |   0
 test/interactive005/{input => input.in}       |   0
 test/interactive005/{run => run.sh}           |   2 +-
 .../interactive006/{expected => expected.out} |   0
 test/interactive006/{input => input.in}       |   0
 test/interactive006/{run => run.sh}           |   2 +-
 .../interactive007/{expected => expected.out} |   0
 test/interactive007/{input => input.in}       |   0
 test/interactive007/{run => run.sh}           |   2 +-
 .../interactive008/{expected => expected.out} |   0
 test/interactive008/{input => input.in}       |   0
 test/interactive008/run                       |   2 -
 test/interactive008/run.sh                    |   2 +
 .../interactive009/{expected => expected.out} |   0
 test/interactive009/{input => input.in}       |   0
 test/interactive009/{run => run.sh}           |   2 +-
 .../interactive010/{expected => expected.out} |   0
 test/interactive010/{input => input.in}       |   0
 test/interactive010/{run => run.sh}           |   2 +-
 .../interactive011/{expected => expected.out} |   0
 test/interactive011/{input => input.in}       |   0
 test/interactive011/{run => run.sh}           |   2 +-
 .../interactive012/{expected => expected.out} |   0
 test/interactive012/{input => input.in}       |   0
 test/interactive012/{run => run.sh}           |   2 +-
 .../interactive013/{expected => expected.out} |   0
 test/interactive013/{input => input.in}       |   0
 test/interactive013/{run => run.sh}           |   2 +-
 .../interactive014/{expected => expected.out} |   0
 test/interactive014/{input => input.in}       |   0
 test/interactive014/{run => run.sh}           |   2 +-
 .../interactive015/{expected => expected.out} |   0
 test/interactive015/{input => input.in}       |   0
 test/interactive015/{run => run.sh}           |   2 +-
 .../interactive016/{expected => expected.out} |   0
 test/interactive016/{input => input.in}       |   0
 test/interactive016/{run => run.sh}           |   2 +-
 .../interactive017/{expected => expected.out} |   0
 test/interactive017/{run => run.sh}           |   0
 .../interactive018/{expected => expected.out} |   0
 test/interactive018/{input => input.in}       |   0
 test/interactive018/run                       |   3 -
 test/interactive018/run.sh                    |   3 +
 test/interfaces001/{expected => expected.out} |   0
 test/interfaces001/{input => input.in}        |   0
 test/interfaces001/{run => run.sh}            |   2 +-
 test/interfaces002/{expected => expected.out} |   0
 test/interfaces002/{run => run.sh}            |   0
 test/interfaces003/{expected => expected.out} |   0
 test/interfaces003/{run => run.sh}            |   0
 test/interfaces004/{expected => expected.out} |   0
 test/interfaces004/{run => run.sh}            |   0
 test/interfaces005/{expected => expected.out} |   0
 test/interfaces005/{run => run.sh}            |   0
 test/interfaces006/{expected => expected.out} |   0
 test/interfaces006/{run => run.sh}            |   0
 test/interfaces007/{expected => expected.out} |   0
 test/interfaces007/{run => run.sh}            |   0
 test/interfaces008/{expected => expected.out} |   0
 test/interfaces008/{run => run.sh}            |   0
 test/interfaces009/{expected => expected.out} |   0
 test/interfaces009/{run => run.sh}            |   0
 test/interfaces010/{expected => expected.out} |   0
 test/interfaces010/{run => run.sh}            |   0
 test/interpret001/{expected => expected.out}  |   0
 test/interpret001/{input => input.in}         |   0
 test/interpret001/{run => run.sh}             |   2 +-
 test/interpret002/{expected => expected.out}  |   0
 test/interpret002/{input => input.in}         |   0
 test/interpret002/{run => run.sh}             |   2 +-
 test/interpret003/{expected => expected.out}  |   0
 test/interpret003/{input => input.in}         |   0
 test/interpret003/{run => run.sh}             |   2 +-
 test/io001/{expected => expected.out}         |   0
 test/io001/{run => run.sh}                    |   0
 test/io002/{expected => expected.out}         |   0
 test/io002/{run => run.sh}                    |   0
 test/io003/{expected => expected.out}         |   0
 test/io003/{run => run.sh}                    |   0
 test/layout001/{expected => expected.out}     |   0
 test/layout001/{run => run.sh}                |   0
 test/literate001/{expected => expected.out}   |   0
 test/literate001/{run => run.sh}              |   0
 test/meta001/{expected => expected.out}       |   0
 test/meta001/{run => run.sh}                  |   0
 test/meta002/{expected => expected.out}       |   0
 test/meta002/{run => run.sh}                  |   0
 test/meta003/{expected => expected.out}       |   0
 test/meta003/{run => run.sh}                  |   0
 test/meta004/{expected => expected.out}       |   0
 test/meta004/{run => run.sh}                  |   0
 test/pkg001/{expected => expected.out}        |   0
 test/pkg001/{run => run.sh}                   |   0
 test/pkg002/{expected => expected.out}        |   0
 test/pkg002/{run => run.sh}                   |   0
 test/pkg003/{expected => expected.out}        |   0
 test/pkg003/{run => run.sh}                   |   0
 test/pkg004/{expected => expected.out}        |   0
 test/pkg004/{run => run.sh}                   |   0
 test/pkg005/{expected => expected.out}        |   0
 test/pkg005/{run => run.sh}                   |   0
 test/pkg006/{expected => expected.out}        |   0
 test/pkg006/{run => run.sh}                   |   0
 test/pkg007/{expected => expected.out}        |   0
 test/pkg007/{input => input.in}               |   0
 test/pkg007/{run => run.sh}                   |   2 +-
 test/pkg008/{expected => expected.out}        |   0
 test/pkg008/{run => run.sh}                   |   0
 test/pkg009/{expected => expected.out}        |   0
 test/pkg009/{run => run.sh}                   |   0
 test/pkg010/{expected => expected.out}        |   0
 test/pkg010/{run => run.sh}                   |   0
 test/prelude001/{expected => expected.out}    |   0
 test/prelude001/{run => run.sh}               |   0
 test/primitives001/{expected => expected.out} |   0
 test/primitives001/{input => input.in}        |   0
 test/primitives001/{run => run.sh}            |   2 +-
 test/primitives002/{expected => expected.out} |   0
 test/primitives002/{run => run.sh}            |   0
 test/primitives003/{expected => expected.out} |   0
 test/primitives003/{run => run.sh}            |   0
 .../{expected => expected.out}                |   0
 test/primitives004-disabled/{run => run.sh}   |   0
 test/primitives005/{expected => expected.out} |   0
 test/primitives005/{run => run.sh}            |   0
 test/primitives006/{expected => expected.out} |   0
 test/primitives006/{run => run.sh}            |   0
 test/proof001/{expected => expected.out}      |   0
 test/proof001/{run => run.sh}                 |   0
 test/proof002/{expected => expected.out}      |   0
 test/proof002/{run => run.sh}                 |   0
 test/proof003/{expected => expected.out}      |   0
 test/proof003/{run => run.sh}                 |   0
 test/proof004/{expected => expected.out}      |   0
 test/proof004/{run => run.sh}                 |   0
 test/proof005/{expected => expected.out}      |   0
 test/proof005/{run => run.sh}                 |   0
 test/proof006/{expected => expected.out}      |   0
 test/proof006/{run => run.sh}                 |   0
 test/proof007/{expected => expected.out}      |   0
 test/proof007/{run => run.sh}                 |   0
 test/proof008/{expected => expected.out}      |   0
 test/proof008/{run => run.sh}                 |   0
 test/proof009/{expected => expected.out}      |   0
 test/proof009/{input => input.in}             |   0
 test/proof009/{run => run.sh}                 |   2 +-
 test/proof010/{expected => expected.out}      |   0
 test/proof010/{run => run.sh}                 |   0
 test/proof011/{expected => expected.out}      |   0
 test/proof011/{run => run.sh}                 |   0
 .../proofsearch001/{expected => expected.out} |   0
 test/proofsearch001/{run => run.sh}           |   0
 .../proofsearch002/{expected => expected.out} |   0
 test/proofsearch002/{run => run.sh}           |   0
 .../proofsearch003/{expected => expected.out} |   0
 test/proofsearch003/{run => run.sh}           |   0
 test/pruviloj001/{expected => expected.out}   |   0
 test/pruviloj001/{run => run.sh}              |   0
 test/quasiquote001/{expected => expected.out} |   0
 test/quasiquote001/{run => run.sh}            |   0
 test/quasiquote002/{expected => expected.out} |   0
 test/quasiquote002/{run => run.sh}            |   0
 test/quasiquote003/{expected => expected.out} |   0
 test/quasiquote003/{run => run.sh}            |   0
 test/quasiquote004/{expected => expected.out} |   0
 test/quasiquote004/{run => run.sh}            |   0
 test/quasiquote005/{expected => expected.out} |   0
 test/quasiquote005/{run => run.sh}            |   0
 test/quasiquote006/{expected => expected.out} |   0
 test/quasiquote006/{run => run.sh}            |   0
 test/records001/{expected => expected.out}    |   0
 test/records001/{run => run.sh}               |   0
 test/records002/{expected => expected.out}    |   0
 test/records002/{run => run.sh}               |   0
 test/records003/{expected => expected.out}    |   0
 test/records003/{run => run.sh}               |   0
 test/records004/{expected => expected.out}    |   0
 test/records004/{run => run.sh}               |   0
 test/records005/{expected => expected.out}    |   0
 test/records005/{run => run.sh}               |   0
 test/reg001/{expected => expected.out}        |   0
 test/reg001/{run => run.sh}                   |   0
 test/reg002/{expected => expected.out}        |   0
 test/reg002/{run => run.sh}                   |   0
 test/reg004/{expected => expected.out}        |   0
 test/reg004/{run => run.sh}                   |   0
 test/reg005/{expected => expected.out}        |   0
 test/reg005/{run => run.sh}                   |   0
 test/reg007/{expected => expected.out}        |   0
 test/reg007/{run => run.sh}                   |   0
 test/reg013/{expected => expected.out}        |   0
 test/reg013/{run => run.sh}                   |   0
 test/reg016/{expected => expected.out}        |   0
 test/reg016/{run => run.sh}                   |   0
 test/reg017/{expected => expected.out}        |   0
 test/reg017/{run => run.sh}                   |   0
 test/reg020/{expected => expected.out}        |   0
 test/reg020/{run => run.sh}                   |   0
 test/reg024/{expected => expected.out}        |   0
 test/reg024/{run => run.sh}                   |   0
 test/reg025/{expected => expected.out}        |   0
 test/reg025/{run => run.sh}                   |   0
 test/reg027/{expected => expected.out}        |   0
 test/reg027/{run => run.sh}                   |   0
 test/reg029/{expected => expected.out}        |   0
 test/reg029/{run => run.sh}                   |   0
 test/reg031/{expected => expected.out}        |   0
 test/reg031/{run => run.sh}                   |   0
 test/reg032/{expected => expected.out}        |   0
 test/reg032/{run => run.sh}                   |   0
 test/reg039/{expected => expected.out}        |   0
 test/reg039/{run => run.sh}                   |   0
 test/reg040/{expected => expected.out}        |   0
 test/reg040/{run => run.sh}                   |   0
 test/reg041/{expected => expected.out}        |   0
 test/reg041/{run => run.sh}                   |   0
 test/reg042/{expected => expected.out}        |   0
 test/reg042/{run => run.sh}                   |   0
 test/reg045/{expected => expected.out}        |   0
 test/reg045/{run => run.sh}                   |   0
 test/reg048/{expected => expected.out}        |   0
 test/reg048/{run => run.sh}                   |   0
 .../{expected => expected.out}                |   0
 test/reg051-disabled/{run => run.sh}          |   0
 test/reg052/{expected => expected.out}        |   0
 test/reg052/{run => run.sh}                   |   0
 test/reg067/{expected => expected.out}        |   0
 test/reg067/{run => run.sh}                   |   0
 test/reg075/{expected => expected.out}        |   0
 test/reg075/{input => input.in}               |   0
 test/reg075/run                               |   3 -
 test/reg075/run.sh                            |   3 +
 test/reg076/{expected => expected.out}        |   0
 test/reg076/{input => input.in}               |   0
 test/reg076/{run => run.sh}                   |   0
 test/reg077/{expected => expected.out}        |   0
 test/reg077/{run => run.sh}                   |   0
 test/regression001/{expected => expected.out} |   0
 test/regression001/{run => run.sh}            |   0
 test/regression002/{expected => expected.out} |   0
 test/regression002/{run => run.sh}            |   0
 test/regression003/{expected => expected.out} |   0
 test/regression003/{run => run.sh}            |   0
 .../{expected => expected.out}                |   0
 test/sourceLocation001/{run => run.sh}        |   0
 test/st001/{expected => expected.out}         |   0
 test/st001/{run => run.sh}                    |   0
 test/st002/{expected => expected.out}         |   0
 test/st002/{run => run.sh}                    |   0
 test/st003/{expected => expected.out}         |   0
 test/st003/{run => run.sh}                    |   0
 test/st004/{expected => expected.out}         |   0
 test/st004/{run => run.sh}                    |   0
 test/st005/{expected => expected.out}         |   0
 test/st005/{run => run.sh}                    |   0
 test/st006/{expected => expected.out}         |   0
 test/st006/{run => run.sh}                    |   0
 test/st007/{expected => expected.out}         |   0
 test/st007/{run => run.sh}                    |   0
 test/sugar001/{expected => expected.out}      |   0
 test/sugar001/{run => run.sh}                 |   0
 test/sugar002/{expected => expected.out}      |   0
 test/sugar002/{run => run.sh}                 |   0
 test/sugar003/{expected => expected.out}      |   0
 test/sugar003/{run => run.sh}                 |   0
 test/sugar004/{expected => expected.out}      |   0
 test/sugar004/{run => run.sh}                 |   0
 test/sugar005/{expected => expected.out}      |   0
 test/sugar005/{run => run.sh}                 |   0
 test/syntax001/{expected => expected.out}     |   0
 test/syntax001/{run => run.sh}                |   0
 test/syntax002/{expected => expected.out}     |   0
 test/syntax002/{run => run.sh}                |   0
 test/tactics001/{expected => expected.out}    |   0
 test/tactics001/{run => run.sh}               |   0
 test/totality001/{expected => expected.out}   |   0
 test/totality001/{run => run.sh}              |   0
 test/totality002/{expected => expected.out}   |   0
 test/totality002/{run => run.sh}              |   0
 test/totality003/{expected => expected.out}   |   0
 test/totality003/{run => run.sh}              |   0
 test/totality004/{expected => expected.out}   |   0
 test/totality004/{run => run.sh}              |   0
 test/totality005/{expected => expected.out}   |   0
 test/totality005/{run => run.sh}              |   0
 test/totality006/{expected => expected.out}   |   0
 test/totality006/{run => run.sh}              |   0
 test/totality007/{expected => expected.out}   |   0
 test/totality007/{run => run.sh}              |   0
 test/totality008/{expected => expected.out}   |   0
 test/totality008/{run => run.sh}              |   0
 test/totality009/{expected => expected.out}   |   0
 test/totality009/{run => run.sh}              |   0
 test/totality010/{expected => expected.out}   |   0
 test/totality010/{run => run.sh}              |   0
 test/totality011/{expected => expected.out}   |   0
 test/totality011/{run => run.sh}              |   0
 test/totality012/{expected => expected.out}   |   0
 test/totality012/{run => run.sh}              |   0
 test/totality013/{expected => expected.out}   |   0
 test/totality013/{run => run.sh}              |   0
 test/totality014/{expected => expected.out}   |   0
 test/totality014/{run => run.sh}              |   0
 test/totality015/{expected => expected.out}   |   0
 test/totality015/{run => run.sh}              |   0
 test/totality016/{expected => expected.out}   |   0
 test/totality016/{run => run.sh}              |   0
 test/totality017/{expected => expected.out}   |   0
 test/totality017/{run => run.sh}              |   0
 test/totality018/{expected => expected.out}   |   0
 test/totality018/{run => run.sh}              |   0
 test/totality019/{expected => expected.out}   |   0
 test/totality019/{run => run.sh}              |   0
 test/totality020/{expected => expected.out}   |   0
 test/totality020/{run => run.sh}              |   0
 test/totality021/{expected => expected.out}   |   0
 test/totality021/{run => run.sh}              |   0
 test/totality022/{expected => expected.out}   |   0
 test/totality022/{run => run.sh}              |   0
 test/totality023/{expected => expected.out}   |   0
 test/totality023/{run => run.sh}              |   0
 test/totality024/{expected => expected.out}   |   0
 test/totality024/{run => run.sh}              |   0
 test/totality025/{expected => expected.out}   |   0
 test/totality025/{run => run.sh}              |   0
 test/totality026/{expected => expected.out}   |   0
 test/totality026/{run => run.sh}              |   0
 test/tutorial001/{expected => expected.out}   |   0
 test/tutorial001/{run => run.sh}              |   0
 test/tutorial002/{expected => expected.out}   |   0
 test/tutorial002/{run => run.sh}              |   0
 test/tutorial003/{expected => expected.out}   |   0
 test/tutorial003/{run => run.sh}              |   0
 test/tutorial004/{expected => expected.out}   |   0
 test/tutorial004/{run => run.sh}              |   0
 test/tutorial005/{expected => expected.out}   |   0
 test/tutorial005/{run => run.sh}              |   0
 test/tutorial006/{expected => expected.out}   |   0
 test/tutorial006/{run => run.sh}              |   0
 test/tutorial007/{expected => expected.out}   |   0
 test/tutorial007/{run => run.sh}              |   0
 test/unique001/{expected => expected.out}     |   0
 test/unique001/{run => run.sh}                |   0
 test/unique004/{expected => expected.out}     |   0
 test/unique004/{run => run.sh}                |   0
 test/universes001/{expected => expected.out}  |   0
 test/universes001/{run => run.sh}             |   0
 test/universes002/{expected => expected.out}  |   0
 test/universes002/{run => run.sh}             |   0
 test/views001/{expected => expected.out}      |   0
 test/views001/{run => run.sh}                 |   0
 test/views002/{expected => expected.out}      |   0
 test/views002/{run => run.sh}                 |   0
 test/views003/{expected => expected.out}      |   0
 test/views003/{run => run.sh}                 |   0
 561 files changed, 128 insertions(+), 127 deletions(-)
 rename test/base001/{expected => expected.out} (100%)
 rename test/base001/{run => run.sh} (84%)
 mode change 100755 => 100644
 rename test/basic001/{expected => expected.out} (100%)
 rename test/basic001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/basic002/{expected => expected.out} (100%)
 rename test/basic002/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/basic003/{expected => expected.out} (100%)
 rename test/basic003/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/basic004/{expected => expected.out} (100%)
 rename test/basic004/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/basic005/{expected => expected.out} (100%)
 rename test/basic005/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/basic006/{expected => expected.out} (100%)
 rename test/basic006/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/basic007/{expected => expected.out} (100%)
 rename test/basic007/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/basic008/{expected => expected.out} (100%)
 rename test/basic008/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/basic009/{expected => expected.out} (100%)
 rename test/basic009/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/basic010/{expected => expected.out} (100%)
 rename test/basic010/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/basic011/{expected => expected.out} (100%)
 rename test/basic011/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/basic012/{expected => expected.out} (100%)
 rename test/basic012/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/basic013/{expected => expected.out} (100%)
 rename test/basic013/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/basic014/{expected => expected.out} (100%)
 rename test/basic014/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/basic015/{expected => expected.out} (100%)
 rename test/basic015/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/basic016/{expected => expected.out} (100%)
 rename test/basic016/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/basic017/{expected => expected.out} (100%)
 rename test/basic017/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/basic018/{expected => expected.out} (100%)
 rename test/basic018/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/basic019/{expected => expected.out} (100%)
 rename test/basic019/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/basic020/{expected => expected.out} (100%)
 rename test/basic020/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/basic021/{expected => expected.out} (100%)
 rename test/basic021/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/basic022/{expected => expected.out} (100%)
 rename test/basic022/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/basic023/{expected => expected.out} (100%)
 rename test/basic023/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/basic024/{expected => expected.out} (100%)
 rename test/basic024/{input => input.in} (100%)
 rename test/basic024/{run => run.sh} (66%)
 rename test/basic025/{expected => expected.out} (100%)
 rename test/basic025/{input => input.in} (100%)
 rename test/basic025/{run => run.sh} (55%)
 mode change 100755 => 100644
 rename test/basic026/{expected => expected.out} (100%)
 rename test/basic026/{run => run.sh} (100%)
 rename test/bignum001/{expected => expected.out} (100%)
 rename test/bignum001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/bignum002/{expected => expected.out} (100%)
 rename test/bignum002/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/bignum003/{expected => expected.out} (100%)
 rename test/bignum003/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/bounded001/{expected => expected.out} (100%)
 rename test/bounded001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/buffer001/{expected => expected.out} (100%)
 rename test/buffer001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/buffer002/{expected => expected.out} (100%)
 rename test/buffer002/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/contrib001/{expected => expected.out} (100%)
 rename test/contrib001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/corecords001/{expected => expected.out} (100%)
 rename test/corecords001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/corecords002/{expected => expected.out} (100%)
 rename test/corecords002/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/delab001/{expected => expected.out} (100%)
 rename test/delab001/{input => input.in} (100%)
 rename test/delab001/{run => run.sh} (91%)
 mode change 100755 => 100644
 rename test/directives001/{expected => expected.out} (100%)
 rename test/directives001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/directives002/{expected => expected.out} (100%)
 rename test/directives002/{run => run.sh} (100%)
 rename test/directives003/{expected => expected.out} (100%)
 rename test/directives003/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/disambig002/{expected => expected.out} (100%)
 rename test/disambig002/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/docs001/{expected => expected.out} (100%)
 rename test/docs001/{input => input.in} (100%)
 rename test/docs001/{run => run.sh} (92%)
 mode change 100755 => 100644
 rename test/docs002/{expected => expected.out} (100%)
 rename test/docs002/{input => input.in} (100%)
 rename test/docs002/{run => run.sh} (83%)
 mode change 100755 => 100644
 rename test/docs003/{expected => expected.out} (100%)
 rename test/docs003/{input => input.in} (100%)
 rename test/docs003/{run => run.sh} (92%)
 mode change 100755 => 100644
 rename test/docs004/{expected => expected.out} (100%)
 rename test/docs004/{input => input.in} (100%)
 rename test/docs004/{run => run.sh} (92%)
 mode change 100755 => 100644
 rename test/docs005/{expected => expected.out} (100%)
 rename test/docs005/{input => input.in} (100%)
 rename test/docs005/{run => run.sh} (92%)
 mode change 100755 => 100644
 rename test/docs006/{expected => expected.out} (100%)
 rename test/docs006/{input => input.in} (100%)
 rename test/docs006/{run => run.sh} (92%)
 mode change 100755 => 100644
 rename test/dsl001/{expected => expected.out} (100%)
 rename test/dsl001/{input => input.in} (100%)
 rename test/dsl001/{run => run.sh} (93%)
 mode change 100755 => 100644
 rename test/dsl002/{expected => expected.out} (100%)
 rename test/dsl002/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/dsl003/{expected => expected.out} (100%)
 rename test/dsl003/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/dsl004/{expected => expected.out} (100%)
 rename test/dsl004/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/effects001/{expected => expected.out} (100%)
 rename test/effects001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/effects002/{expected => expected.out} (100%)
 rename test/effects002/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/effects003/{expected => expected.out} (100%)
 rename test/effects003/{input => input.in} (100%)
 rename test/effects003/{run => run.sh} (83%)
 mode change 100755 => 100644
 rename test/effects004/{expected => expected.out} (100%)
 rename test/effects004/{input => input.in} (100%)
 rename test/effects004/{run => run.sh} (80%)
 mode change 100755 => 100644
 rename test/effects005/{expected => expected.out} (100%)
 rename test/effects005/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/error001/{expected => expected.out} (100%)
 rename test/error001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/error002/{expected => expected.out} (100%)
 rename test/error002/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/error003/{expected => expected.out} (100%)
 rename test/error003/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/error004/{expected => expected.out} (100%)
 rename test/error004/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/error005/{expected => expected.out} (100%)
 rename test/error005/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/error006/{expected => expected.out} (100%)
 rename test/error006/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/error007/{expected => expected.out} (100%)
 rename test/error007/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/error008/{expected => expected.out} (100%)
 rename test/error008/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/error009/{expected => expected.out} (100%)
 rename test/error009/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/ffi001/{expected => expected.out} (100%)
 rename test/ffi001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/ffi002/{expected => expected.out} (100%)
 rename test/ffi002/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/ffi003/{expected => expected.out} (100%)
 rename test/ffi003/{input => input.in} (100%)
 rename test/ffi003/{run => run.sh} (82%)
 mode change 100755 => 100644
 rename test/ffi004/{expected => expected.out} (100%)
 rename test/ffi004/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/ffi005/{expected => expected.out} (100%)
 rename test/ffi005/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/ffi006/{expected => expected.out} (100%)
 rename test/ffi006/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/ffi007/{expected => expected.out} (100%)
 rename test/ffi007/{run => run.sh} (100%)
 rename test/ffi008/{expected => expected.out} (100%)
 rename test/ffi008/{run => run.sh} (100%)
 rename test/ffi009/{expected => expected.out} (100%)
 rename test/ffi009/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/ffi010/{expected => expected.out} (100%)
 rename test/ffi010/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/ffi011/{expected => expected.out} (100%)
 rename test/ffi011/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/ffi012/{expected => expected.out} (100%)
 rename test/ffi012/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/ffi013/{expected => expected.out} (100%)
 rename test/ffi013/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/folding001/{expected => expected.out} (100%)
 rename test/folding001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/idrisdoc001/{expected => expected.out} (100%)
 rename test/idrisdoc001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/idrisdoc002/{expected => expected.out} (100%)
 rename test/idrisdoc002/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/idrisdoc003/{expected => expected.out} (100%)
 rename test/idrisdoc003/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/idrisdoc004/{expected => expected.out} (100%)
 rename test/idrisdoc004/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/idrisdoc005/{expected => expected.out} (100%)
 rename test/idrisdoc005/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/idrisdoc006/{expected => expected.out} (100%)
 rename test/idrisdoc006/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/idrisdoc007/{expected => expected.out} (100%)
 rename test/idrisdoc007/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/idrisdoc008/{expected => expected.out} (100%)
 rename test/idrisdoc008/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/idrisdoc009/{expected => expected.out} (100%)
 rename test/idrisdoc009/{input => input.in} (100%)
 rename test/idrisdoc009/{run => run.sh} (94%)
 mode change 100755 => 100644
 rename test/interactive001/{expected => expected.out} (100%)
 rename test/interactive001/{input => input.in} (100%)
 rename test/interactive001/{run => run.sh} (82%)
 mode change 100755 => 100644
 rename test/interactive002/{expected => expected.out} (100%)
 rename test/interactive002/{input => input.in} (100%)
 rename test/interactive002/{run => run.sh} (95%)
 mode change 100755 => 100644
 rename test/interactive003/{expected => expected.out} (100%)
 rename test/interactive003/{input => input.in} (100%)
 rename test/interactive003/{run => run.sh} (95%)
 mode change 100755 => 100644
 rename test/interactive004/{expected => expected.out} (100%)
 rename test/interactive004/{input => input.in} (100%)
 rename test/interactive004/{run => run.sh} (95%)
 mode change 100755 => 100644
 rename test/interactive005/{expected => expected.out} (100%)
 rename test/interactive005/{input => input.in} (100%)
 rename test/interactive005/{run => run.sh} (80%)
 mode change 100755 => 100644
 rename test/interactive006/{expected => expected.out} (100%)
 rename test/interactive006/{input => input.in} (100%)
 rename test/interactive006/{run => run.sh} (84%)
 mode change 100755 => 100644
 rename test/interactive007/{expected => expected.out} (100%)
 rename test/interactive007/{input => input.in} (100%)
 rename test/interactive007/{run => run.sh} (66%)
 mode change 100755 => 100644
 rename test/interactive008/{expected => expected.out} (100%)
 rename test/interactive008/{input => input.in} (100%)
 delete mode 100755 test/interactive008/run
 create mode 100644 test/interactive008/run.sh
 rename test/interactive009/{expected => expected.out} (100%)
 rename test/interactive009/{input => input.in} (100%)
 rename test/interactive009/{run => run.sh} (95%)
 mode change 100755 => 100644
 rename test/interactive010/{expected => expected.out} (100%)
 rename test/interactive010/{input => input.in} (100%)
 rename test/interactive010/{run => run.sh} (91%)
 mode change 100755 => 100644
 rename test/interactive011/{expected => expected.out} (100%)
 rename test/interactive011/{input => input.in} (100%)
 rename test/interactive011/{run => run.sh} (86%)
 mode change 100755 => 100644
 rename test/interactive012/{expected => expected.out} (100%)
 rename test/interactive012/{input => input.in} (100%)
 rename test/interactive012/{run => run.sh} (73%)
 mode change 100755 => 100644
 rename test/interactive013/{expected => expected.out} (100%)
 rename test/interactive013/{input => input.in} (100%)
 rename test/interactive013/{run => run.sh} (95%)
 mode change 100755 => 100644
 rename test/interactive014/{expected => expected.out} (100%)
 rename test/interactive014/{input => input.in} (100%)
 rename test/interactive014/{run => run.sh} (95%)
 mode change 100755 => 100644
 rename test/interactive015/{expected => expected.out} (100%)
 rename test/interactive015/{input => input.in} (100%)
 rename test/interactive015/{run => run.sh} (96%)
 mode change 100755 => 100644
 rename test/interactive016/{expected => expected.out} (100%)
 rename test/interactive016/{input => input.in} (100%)
 rename test/interactive016/{run => run.sh} (96%)
 mode change 100755 => 100644
 rename test/interactive017/{expected => expected.out} (100%)
 rename test/interactive017/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/interactive018/{expected => expected.out} (100%)
 rename test/interactive018/{input => input.in} (100%)
 delete mode 100755 test/interactive018/run
 create mode 100644 test/interactive018/run.sh
 rename test/interfaces001/{expected => expected.out} (100%)
 rename test/interfaces001/{input => input.in} (100%)
 rename test/interfaces001/{run => run.sh} (74%)
 mode change 100755 => 100644
 rename test/interfaces002/{expected => expected.out} (100%)
 rename test/interfaces002/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/interfaces003/{expected => expected.out} (100%)
 rename test/interfaces003/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/interfaces004/{expected => expected.out} (100%)
 rename test/interfaces004/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/interfaces005/{expected => expected.out} (100%)
 rename test/interfaces005/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/interfaces006/{expected => expected.out} (100%)
 rename test/interfaces006/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/interfaces007/{expected => expected.out} (100%)
 rename test/interfaces007/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/interfaces008/{expected => expected.out} (100%)
 rename test/interfaces008/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/interfaces009/{expected => expected.out} (100%)
 rename test/interfaces009/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/interfaces010/{expected => expected.out} (100%)
 rename test/interfaces010/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/interpret001/{expected => expected.out} (100%)
 rename test/interpret001/{input => input.in} (100%)
 rename test/interpret001/{run => run.sh} (88%)
 mode change 100755 => 100644
 rename test/interpret002/{expected => expected.out} (100%)
 rename test/interpret002/{input => input.in} (100%)
 rename test/interpret002/{run => run.sh} (88%)
 mode change 100755 => 100644
 rename test/interpret003/{expected => expected.out} (100%)
 rename test/interpret003/{input => input.in} (100%)
 rename test/interpret003/{run => run.sh} (87%)
 mode change 100755 => 100644
 rename test/io001/{expected => expected.out} (100%)
 rename test/io001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/io002/{expected => expected.out} (100%)
 rename test/io002/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/io003/{expected => expected.out} (100%)
 rename test/io003/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/layout001/{expected => expected.out} (100%)
 rename test/layout001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/literate001/{expected => expected.out} (100%)
 rename test/literate001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/meta001/{expected => expected.out} (100%)
 rename test/meta001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/meta002/{expected => expected.out} (100%)
 rename test/meta002/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/meta003/{expected => expected.out} (100%)
 rename test/meta003/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/meta004/{expected => expected.out} (100%)
 rename test/meta004/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/pkg001/{expected => expected.out} (100%)
 rename test/pkg001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/pkg002/{expected => expected.out} (100%)
 rename test/pkg002/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/pkg003/{expected => expected.out} (100%)
 rename test/pkg003/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/pkg004/{expected => expected.out} (100%)
 rename test/pkg004/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/pkg005/{expected => expected.out} (100%)
 rename test/pkg005/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/pkg006/{expected => expected.out} (100%)
 rename test/pkg006/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/pkg007/{expected => expected.out} (100%)
 rename test/pkg007/{input => input.in} (100%)
 rename test/pkg007/{run => run.sh} (74%)
 mode change 100755 => 100644
 rename test/pkg008/{expected => expected.out} (100%)
 rename test/pkg008/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/pkg009/{expected => expected.out} (100%)
 rename test/pkg009/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/pkg010/{expected => expected.out} (100%)
 rename test/pkg010/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/prelude001/{expected => expected.out} (100%)
 rename test/prelude001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/primitives001/{expected => expected.out} (100%)
 rename test/primitives001/{input => input.in} (100%)
 rename test/primitives001/{run => run.sh} (86%)
 mode change 100755 => 100644
 rename test/primitives002/{expected => expected.out} (100%)
 rename test/primitives002/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/primitives003/{expected => expected.out} (100%)
 rename test/primitives003/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/primitives004-disabled/{expected => expected.out} (100%)
 rename test/primitives004-disabled/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/primitives005/{expected => expected.out} (100%)
 rename test/primitives005/{run => run.sh} (100%)
 rename test/primitives006/{expected => expected.out} (100%)
 rename test/primitives006/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/proof001/{expected => expected.out} (100%)
 rename test/proof001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/proof002/{expected => expected.out} (100%)
 rename test/proof002/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/proof003/{expected => expected.out} (100%)
 rename test/proof003/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/proof004/{expected => expected.out} (100%)
 rename test/proof004/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/proof005/{expected => expected.out} (100%)
 rename test/proof005/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/proof006/{expected => expected.out} (100%)
 rename test/proof006/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/proof007/{expected => expected.out} (100%)
 rename test/proof007/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/proof008/{expected => expected.out} (100%)
 rename test/proof008/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/proof009/{expected => expected.out} (100%)
 rename test/proof009/{input => input.in} (100%)
 rename test/proof009/{run => run.sh} (84%)
 mode change 100755 => 100644
 rename test/proof010/{expected => expected.out} (100%)
 rename test/proof010/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/proof011/{expected => expected.out} (100%)
 rename test/proof011/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/proofsearch001/{expected => expected.out} (100%)
 rename test/proofsearch001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/proofsearch002/{expected => expected.out} (100%)
 rename test/proofsearch002/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/proofsearch003/{expected => expected.out} (100%)
 rename test/proofsearch003/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/pruviloj001/{expected => expected.out} (100%)
 rename test/pruviloj001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/quasiquote001/{expected => expected.out} (100%)
 rename test/quasiquote001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/quasiquote002/{expected => expected.out} (100%)
 rename test/quasiquote002/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/quasiquote003/{expected => expected.out} (100%)
 rename test/quasiquote003/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/quasiquote004/{expected => expected.out} (100%)
 rename test/quasiquote004/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/quasiquote005/{expected => expected.out} (100%)
 rename test/quasiquote005/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/quasiquote006/{expected => expected.out} (100%)
 rename test/quasiquote006/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/records001/{expected => expected.out} (100%)
 rename test/records001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/records002/{expected => expected.out} (100%)
 rename test/records002/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/records003/{expected => expected.out} (100%)
 rename test/records003/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/records004/{expected => expected.out} (100%)
 rename test/records004/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/records005/{expected => expected.out} (100%)
 rename test/records005/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/reg001/{expected => expected.out} (100%)
 rename test/reg001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/reg002/{expected => expected.out} (100%)
 rename test/reg002/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/reg004/{expected => expected.out} (100%)
 rename test/reg004/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/reg005/{expected => expected.out} (100%)
 rename test/reg005/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/reg007/{expected => expected.out} (100%)
 rename test/reg007/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/reg013/{expected => expected.out} (100%)
 rename test/reg013/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/reg016/{expected => expected.out} (100%)
 rename test/reg016/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/reg017/{expected => expected.out} (100%)
 rename test/reg017/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/reg020/{expected => expected.out} (100%)
 rename test/reg020/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/reg024/{expected => expected.out} (100%)
 rename test/reg024/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/reg025/{expected => expected.out} (100%)
 rename test/reg025/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/reg027/{expected => expected.out} (100%)
 rename test/reg027/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/reg029/{expected => expected.out} (100%)
 rename test/reg029/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/reg031/{expected => expected.out} (100%)
 rename test/reg031/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/reg032/{expected => expected.out} (100%)
 rename test/reg032/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/reg039/{expected => expected.out} (100%)
 rename test/reg039/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/reg040/{expected => expected.out} (100%)
 rename test/reg040/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/reg041/{expected => expected.out} (100%)
 rename test/reg041/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/reg042/{expected => expected.out} (100%)
 rename test/reg042/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/reg045/{expected => expected.out} (100%)
 rename test/reg045/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/reg048/{expected => expected.out} (100%)
 rename test/reg048/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/reg051-disabled/{expected => expected.out} (100%)
 rename test/reg051-disabled/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/reg052/{expected => expected.out} (100%)
 rename test/reg052/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/reg067/{expected => expected.out} (100%)
 rename test/reg067/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/reg075/{expected => expected.out} (100%)
 rename test/reg075/{input => input.in} (100%)
 delete mode 100755 test/reg075/run
 create mode 100644 test/reg075/run.sh
 rename test/reg076/{expected => expected.out} (100%)
 rename test/reg076/{input => input.in} (100%)
 rename test/reg076/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/reg077/{expected => expected.out} (100%)
 rename test/reg077/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/regression001/{expected => expected.out} (100%)
 rename test/regression001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/regression002/{expected => expected.out} (100%)
 rename test/regression002/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/regression003/{expected => expected.out} (100%)
 rename test/regression003/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/sourceLocation001/{expected => expected.out} (100%)
 rename test/sourceLocation001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/st001/{expected => expected.out} (100%)
 rename test/st001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/st002/{expected => expected.out} (100%)
 rename test/st002/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/st003/{expected => expected.out} (100%)
 rename test/st003/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/st004/{expected => expected.out} (100%)
 rename test/st004/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/st005/{expected => expected.out} (100%)
 rename test/st005/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/st006/{expected => expected.out} (100%)
 rename test/st006/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/st007/{expected => expected.out} (100%)
 rename test/st007/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/sugar001/{expected => expected.out} (100%)
 rename test/sugar001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/sugar002/{expected => expected.out} (100%)
 rename test/sugar002/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/sugar003/{expected => expected.out} (100%)
 rename test/sugar003/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/sugar004/{expected => expected.out} (100%)
 rename test/sugar004/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/sugar005/{expected => expected.out} (100%)
 rename test/sugar005/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/syntax001/{expected => expected.out} (100%)
 rename test/syntax001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/syntax002/{expected => expected.out} (100%)
 rename test/syntax002/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/tactics001/{expected => expected.out} (100%)
 rename test/tactics001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/totality001/{expected => expected.out} (100%)
 rename test/totality001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/totality002/{expected => expected.out} (100%)
 rename test/totality002/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/totality003/{expected => expected.out} (100%)
 rename test/totality003/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/totality004/{expected => expected.out} (100%)
 rename test/totality004/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/totality005/{expected => expected.out} (100%)
 rename test/totality005/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/totality006/{expected => expected.out} (100%)
 rename test/totality006/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/totality007/{expected => expected.out} (100%)
 rename test/totality007/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/totality008/{expected => expected.out} (100%)
 rename test/totality008/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/totality009/{expected => expected.out} (100%)
 rename test/totality009/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/totality010/{expected => expected.out} (100%)
 rename test/totality010/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/totality011/{expected => expected.out} (100%)
 rename test/totality011/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/totality012/{expected => expected.out} (100%)
 rename test/totality012/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/totality013/{expected => expected.out} (100%)
 rename test/totality013/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/totality014/{expected => expected.out} (100%)
 rename test/totality014/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/totality015/{expected => expected.out} (100%)
 rename test/totality015/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/totality016/{expected => expected.out} (100%)
 rename test/totality016/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/totality017/{expected => expected.out} (100%)
 rename test/totality017/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/totality018/{expected => expected.out} (100%)
 rename test/totality018/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/totality019/{expected => expected.out} (100%)
 rename test/totality019/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/totality020/{expected => expected.out} (100%)
 rename test/totality020/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/totality021/{expected => expected.out} (100%)
 rename test/totality021/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/totality022/{expected => expected.out} (100%)
 rename test/totality022/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/totality023/{expected => expected.out} (100%)
 rename test/totality023/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/totality024/{expected => expected.out} (100%)
 rename test/totality024/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/totality025/{expected => expected.out} (100%)
 rename test/totality025/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/totality026/{expected => expected.out} (100%)
 rename test/totality026/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/tutorial001/{expected => expected.out} (100%)
 rename test/tutorial001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/tutorial002/{expected => expected.out} (100%)
 rename test/tutorial002/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/tutorial003/{expected => expected.out} (100%)
 rename test/tutorial003/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/tutorial004/{expected => expected.out} (100%)
 rename test/tutorial004/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/tutorial005/{expected => expected.out} (100%)
 rename test/tutorial005/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/tutorial006/{expected => expected.out} (100%)
 rename test/tutorial006/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/tutorial007/{expected => expected.out} (100%)
 rename test/tutorial007/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/unique001/{expected => expected.out} (100%)
 rename test/unique001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/unique004/{expected => expected.out} (100%)
 rename test/unique004/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/universes001/{expected => expected.out} (100%)
 rename test/universes001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/universes002/{expected => expected.out} (100%)
 rename test/universes002/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/views001/{expected => expected.out} (100%)
 rename test/views001/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/views002/{expected => expected.out} (100%)
 rename test/views002/{run => run.sh} (100%)
 mode change 100755 => 100644
 rename test/views003/{expected => expected.out} (100%)
 rename test/views003/{run => run.sh} (100%)
 mode change 100755 => 100644

diff --git a/Setup.hs b/Setup.hs
index 1db0c20e8..d8963d73a 100644
--- a/Setup.hs
+++ b/Setup.hs
@@ -215,36 +215,6 @@ idrisConfigure _ flags pkgdesc local = do
       autogenComponentModulesDir lbi _ = autogenModulesDir lbi
 #endif

-idrisPreSDist args flags = do
-  let dir = S.fromFlag (S.sDistDirectory flags)
-  let verb = S.fromFlag (S.sDistVerbosity flags)
-  generateVersionModule verb "src" True
-  generateBuildFlagsModule verb "src" []
-  generateTargetModule verb "src" "./libs"
-  generateToolchainModule verb "src" Nothing
-  preSDist simpleUserHooks args flags
-
-idrisSDist sdist pkgDesc bi hooks flags = do
-  pkgDesc' <- addGitFiles pkgDesc
-  sdist pkgDesc' bi hooks flags
-    where
-      addGitFiles :: PackageDescription -> IO PackageDescription
-      addGitFiles pkgDesc = do
-        files <- gitFiles
-        return $ pkgDesc { extraSrcFiles = extraSrcFiles pkgDesc ++ files}
-      gitFiles :: IO [FilePath]
-      gitFiles = liftM lines (readProcess "git" ["ls-files"] "")
-
-idrisPostSDist args flags desc lbi = do
-  Control.Exception.catch (do let file = "src" </> "Version_idris" Px.<.> "hs"
-                              let targetFile = "src" </> "Target_idris" Px.<.> "hs"
-                              putStrLn $ "Removing generated modules:\n "
-                                        ++ file ++ "\n" ++ targetFile
-                              removeFile file
-                              removeFile targetFile)
-             (\e -> let e' = (e :: SomeException) in return ())
-  postSDist simpleUserHooks args flags desc lbi
-
 #if !(MIN_VERSION_Cabal(2,0,0))
 rewriteFileEx :: Verbosity -> FilePath -> String -> IO ()
 rewriteFileEx _ = rewriteFile
@@ -353,8 +323,5 @@ main = defaultMainWithHooks $ simpleUserHooks
    , postInst = \_ flags pkg local ->
                   idrisInstall (S.fromFlag $ S.installVerbosity flags)
                                NoCopyDest pkg local
-   , preSDist = idrisPreSDist
-   , sDistHook = idrisSDist (sDistHook simpleUserHooks)
-   , postSDist = idrisPostSDist
    , testHook = idrisTestHook
    }
diff --git a/idris.cabal b/idris.cabal
index 23c198498..c0bd2a440 100644
--- a/idris.cabal
+++ b/idris.cabal
@@ -1,6 +1,7 @@
+Cabal-Version:  2.4
 Name:           idris
 Version:        1.3.2
-License:        BSD3
+License:        BSD-3-Clause
 License-file:   LICENSE
 Author:         Edwin Brady
 Maintainer:     Edwin Brady <eb@cs.st-andrews.ac.uk>
@@ -41,42 +42,18 @@ Description:    Idris is a general purpose language with full dependent types.
                 .
                 * Hugs style interactive environment

-Cabal-Version:  >= 1.22
-
 Build-type:     Custom

 Tested-With:    GHC == 7.10.3, GHC == 8.0.1

 Data-files:            idrisdoc/styles.css
-                       jsrts/jsbn/jsbn-browser.js
-                       jsrts/jsbn/jsbn-node.js
-                       jsrts/Runtime-common.js
-                       jsrts/Runtime-javascript.js
-                       jsrts/Runtime-node.js
+                       jsrts/**/*.js
                        jsrts/jsbn/LICENSE
-                       rts/arduino/idris_main.c
-                       rts/idris_bitstring.c
-                       rts/idris_bitstring.h
-                       rts/idris_gc.c
-                       rts/idris_gc.h
-                       rts/idris_gmp.c
-                       rts/idris_gmp.h
-                       rts/idris_heap.c
-                       rts/idris_heap.h
-                       rts/idris_main.c
-                       rts/idris_net.c
-                       rts/idris_net.h
-                       rts/idris_opts.c
-                       rts/idris_opts.h
-                       rts/idris_rts.c
-                       rts/idris_rts.h
-                       rts/idris_stats.c
-                       rts/idris_stats.h
-                       rts/idris_stdfgn.c
-                       rts/idris_stdfgn.h
-                       rts/mini-gmp.c
-                       rts/mini-gmp.h
-                       rts/libtest.c
+                       rts/Makefile
+                       rts/**/*.c
+                       rts/**/*.h
+                       rts/seL4/CMakeLists.txt
+                       rts/seL4/README.md

 Extra-doc-files:
                        CHANGELOG.md
@@ -86,13 +63,62 @@ Extra-doc-files:
                        README.md
                        RELEASE-CHECKS.md
                        idris-tutorial.pdf
-                       samples/effects/*.idr
-                       samples/misc/*.idr
-                       samples/misc/*.lidr
-                       samples/tutorial/*.idr
+                       man/idris.1
+                       samples/**/*.idr
+                       samples/**/*.lidr

 -- extra-source-files is generated by Setup.hs using `git --ls-files`.
 Extra-source-files:
+                      Makefile
+                      config.mk
+                      custom.mk-alldeps
+                      mkpkg.sh
+                      stack-alt.yaml
+                      stack-shell.nix
+                      stack.yaml
+                      stylize.sh
+                      win-release.sh
+
+                      benchmarks/*.pl
+                      benchmarks/**/*.idr
+                      benchmarks/**/*.ipkg
+                      benchmarks/quasigroups/board
+
+                      icons/*.png
+                      icons/*.ico
+                      icons/*.rc
+                      icons/*.svg
+                      icons/*.xml
+
+                      libs/**/*.idr
+                      libs/**/*.ipkg
+                      libs/**/*.txt
+                      libs/Makefile
+                      libs/base/Makefile
+                      libs/contrib/Makefile
+                      libs/effects/Makefile
+                      libs/prelude/Makefile
+                      libs/pruviloj/Makefile
+
+                      scripts/generate-multi-ghc-travis-template
+                      scripts/runidris
+                      scripts/runidris-node
+
+                      src/.ghci
+
+                      test/*.md
+                      test/*.hs
+                      test/**/*.idr
+                      test/**/*.lidr
+                      test/**/*.ipkg
+                      test/**/*.out
+                      test/**/*.sh
+                      test/**/*.c
+                      test/**/*.h
+                      test/**/*.in
+                      test/ffi004/theOtherType
+                      test/ffi004/theType
+                      test/scripts/timeout

 source-repository head
   type:     git
@@ -100,7 +126,7 @@ source-repository head

 custom-setup
   setup-depends:
-    Cabal >= 1.10 && < 3.1,
+    Cabal >= 2.4 && < 3.1,
     base  >= 4 && <5,
     directory,
     filepath,
@@ -261,14 +287,17 @@ Library
                   Util.Pretty
                 , Util.Net

-
-
-                -- Auto Generated
                 , Paths_idris
                 , Version_idris
                 , Tools_idris
                 , BuildFlags_idris

+                -- Auto Generated
+  Autogen-modules:  Paths_idris
+                  , Version_idris
+                  , Tools_idris
+                  , BuildFlags_idris
+
   Build-depends:  base >=4 && <5
                 , aeson >= 0.6 && < 1.5
                 , annotated-wl-pprint >= 0.7 && < 0.8
@@ -313,8 +342,8 @@ Library
                 , async < 2.3

   if !impl(ghc >= 8.0)
-    Build-Depends: semigroups == 0.18.*
-                , fail == 4.9.0.*
+    Build-Depends:  semigroups == 0.18.*
+                  , fail == 4.9.0.*

   Default-Language: Haskell2010
   ghc-prof-options: -auto-all -caf-all
@@ -333,6 +362,7 @@ Library
      cpp-options:   -DIDRIS_GMP
   if flag(freestanding)
      other-modules: Target_idris
+     autogen-modules: Target_idris
      cpp-options:   -DFREESTANDING
   if flag(CI)
      ghc-options:   -Werror
@@ -381,6 +411,7 @@ Test-suite regression-and-feature-tests

 Executable idris-codegen-c
   Main-is:        Main.hs
+  autogen-modules:  Paths_idris
   other-modules:  Paths_idris
   hs-source-dirs: codegen/idris-codegen-c

@@ -396,6 +427,7 @@ Executable idris-codegen-c

 Executable idris-codegen-javascript
   Main-is:        Main.hs
+  autogen-modules:  Paths_idris
   other-modules:  Paths_idris
   hs-source-dirs: codegen/idris-codegen-javascript

@@ -411,6 +443,7 @@ Executable idris-codegen-javascript

 Executable idris-codegen-node
   Main-is:        Main.hs
+  autogen-modules:  Paths_idris
   other-modules:  Paths_idris
   hs-source-dirs: codegen/idris-codegen-node

@@ -423,3 +456,4 @@ Executable idris-codegen-node
   Default-Language: Haskell2010
   ghc-prof-options: -auto-all -caf-all
   ghc-options:      -threaded -rtsopts -funbox-strict-fields
+
diff --git a/test/README.md b/test/README.md
index 37ae2128b..f0529b320 100644
--- a/test/README.md
+++ b/test/README.md
@@ -113,18 +113,18 @@ and somewhat self-explanatory.

 1. Choose the family your test shall belong to and remember its identifier.
 2. Pick the next available integer in the test family. It will be the index.
-3. Say the family's identifier is `foo` and the index is `42`. You should call `./mktest.pl foo042` ; this will create the directory and a simple `run` script.
+3. Say the family's identifier is `foo` and the index is `42`. You should call `./mktest.pl foo042` ; this will create the directory and a simple `run.sh` script.
 4. Modify the `run` script to your liking. If you want to call the idris executable, write `${IDRIS:-idris} $@`.
 5. Add any file you may need in the directory. If they don't end in `.idr`, you should remember them for the next step.
 6. Add your test in `TestData.hs`. Each family has a list of `(Index, CompatCodegen)`.  See the next section for the available values in `CompatCodegen`. In most cases, you should write `( 42, ANY)`.
-7. Generate the `expected` file by doing:
+7. Generate the `expected.out` file by doing:
     ```
     # Using cabal
     cabal test --test-options="--pattern foo042 --accept"
     # Using stack
     stack test --test-arguments="--pattern foo042 --accept"
     ```
-8. Check the content of `expected`. Maybe the test didn't do what you thought it would. Fix and go back to 7 until it's ok.
+8. Check the content of `expected.out`. Maybe the test didn't do what you thought it would. Fix and go back to 7 until it's ok.

 ### Specifying compatible backends

@@ -146,7 +146,7 @@ Currently, `NONE` has the same effect as `ANY`, but this will change.

 ### Updating golden files

-To update the `expected` file for every test, do one of the following:
+To update the `expected.out` file for every test, do one of the following:

 ```
 # Using make
@@ -157,4 +157,4 @@ cabal test --test-options="--accept"
 stack test --test-arguments="--accept"
 ```

-"Accepted" tests are the ones that update the golden file. A test can still fail if the `run` script itself crashes.
+"Accepted" tests are the ones that update the golden file. A test can still fail if the `run.sh` script itself crashes.
diff --git a/test/TestRun.hs b/test/TestRun.hs
index 4809911f3..38a0fdcb6 100644
--- a/test/TestRun.hs
+++ b/test/TestRun.hs
@@ -62,7 +62,7 @@ ingredients = defaultIngredients ++
 test :: String -> String -> IO () -> TestTree
 test testName path = goldenVsFileDiff testName diff ref output
   where
-    ref = path </> "expected"
+    ref = path </> "expected.out"
     output = path </> "output"
     diff ref new | os == "openbsd" = ["diff", "-u", new, ref]
                  | otherwise = ["diff", "--strip-trailing-cr", "-u", new, ref]
@@ -92,7 +92,7 @@ mkGoldenTests testFamilies flags =
 -- this thing.
 runTest :: String -> Flags -> IO ()
 runTest path flags = do
-  let run = (proc "bash" ("run" : flags)) {cwd = Just path}
+  let run = (proc "bash" ("run.sh" : flags)) {cwd = Just path}
   (_, output, error_out) <- readCreateProcessWithExitCode run ""
   writeFile (path </> "output") (normalise output)
   when (error_out /= "") $ hPutStrLn stderr ("\nError: " ++ path ++ "\n" ++ error_out)
diff --git a/test/base001/expected b/test/base001/expected.out
similarity index 100%
rename from test/base001/expected
rename to test/base001/expected.out
diff --git a/test/base001/run b/test/base001/run.sh
old mode 100755
new mode 100644
similarity index 84%
rename from test/base001/run
rename to test/base001/run.sh
index f55f21402..2769ec64d
--- a/test/base001/run
+++ b/test/base001/run.sh
@@ -3,7 +3,7 @@
 set -u

 if [[ ${OSTYPE} = 'msys' ]]; then
-  cat expected # skip this test on Windows
+  cat expected.out # skip this test on Windows
 else
   ${IDRIS:-idris} "$@" --build base001.ipkg | grep -v 'make.*:'
   ./base001 2>&1 | grep -v '^sh:.*\./does-not-exist:'
diff --git a/test/basic001/expected b/test/basic001/expected.out
similarity index 100%
rename from test/basic001/expected
rename to test/basic001/expected.out
diff --git a/test/basic001/run b/test/basic001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/basic001/run
rename to test/basic001/run.sh
diff --git a/test/basic002/expected b/test/basic002/expected.out
similarity index 100%
rename from test/basic002/expected
rename to test/basic002/expected.out
diff --git a/test/basic002/run b/test/basic002/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/basic002/run
rename to test/basic002/run.sh
diff --git a/test/basic003/expected b/test/basic003/expected.out
similarity index 100%
rename from test/basic003/expected
rename to test/basic003/expected.out
diff --git a/test/basic003/run b/test/basic003/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/basic003/run
rename to test/basic003/run.sh
diff --git a/test/basic004/expected b/test/basic004/expected.out
similarity index 100%
rename from test/basic004/expected
rename to test/basic004/expected.out
diff --git a/test/basic004/run b/test/basic004/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/basic004/run
rename to test/basic004/run.sh
diff --git a/test/basic005/expected b/test/basic005/expected.out
similarity index 100%
rename from test/basic005/expected
rename to test/basic005/expected.out
diff --git a/test/basic005/run b/test/basic005/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/basic005/run
rename to test/basic005/run.sh
diff --git a/test/basic006/expected b/test/basic006/expected.out
similarity index 100%
rename from test/basic006/expected
rename to test/basic006/expected.out
diff --git a/test/basic006/run b/test/basic006/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/basic006/run
rename to test/basic006/run.sh
diff --git a/test/basic007/expected b/test/basic007/expected.out
similarity index 100%
rename from test/basic007/expected
rename to test/basic007/expected.out
diff --git a/test/basic007/run b/test/basic007/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/basic007/run
rename to test/basic007/run.sh
diff --git a/test/basic008/expected b/test/basic008/expected.out
similarity index 100%
rename from test/basic008/expected
rename to test/basic008/expected.out
diff --git a/test/basic008/run b/test/basic008/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/basic008/run
rename to test/basic008/run.sh
diff --git a/test/basic009/expected b/test/basic009/expected.out
similarity index 100%
rename from test/basic009/expected
rename to test/basic009/expected.out
diff --git a/test/basic009/run b/test/basic009/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/basic009/run
rename to test/basic009/run.sh
diff --git a/test/basic010/expected b/test/basic010/expected.out
similarity index 100%
rename from test/basic010/expected
rename to test/basic010/expected.out
diff --git a/test/basic010/run b/test/basic010/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/basic010/run
rename to test/basic010/run.sh
diff --git a/test/basic011/expected b/test/basic011/expected.out
similarity index 100%
rename from test/basic011/expected
rename to test/basic011/expected.out
diff --git a/test/basic011/run b/test/basic011/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/basic011/run
rename to test/basic011/run.sh
diff --git a/test/basic012/expected b/test/basic012/expected.out
similarity index 100%
rename from test/basic012/expected
rename to test/basic012/expected.out
diff --git a/test/basic012/run b/test/basic012/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/basic012/run
rename to test/basic012/run.sh
diff --git a/test/basic013/expected b/test/basic013/expected.out
similarity index 100%
rename from test/basic013/expected
rename to test/basic013/expected.out
diff --git a/test/basic013/run b/test/basic013/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/basic013/run
rename to test/basic013/run.sh
diff --git a/test/basic014/expected b/test/basic014/expected.out
similarity index 100%
rename from test/basic014/expected
rename to test/basic014/expected.out
diff --git a/test/basic014/run b/test/basic014/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/basic014/run
rename to test/basic014/run.sh
diff --git a/test/basic015/expected b/test/basic015/expected.out
similarity index 100%
rename from test/basic015/expected
rename to test/basic015/expected.out
diff --git a/test/basic015/run b/test/basic015/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/basic015/run
rename to test/basic015/run.sh
diff --git a/test/basic016/expected b/test/basic016/expected.out
similarity index 100%
rename from test/basic016/expected
rename to test/basic016/expected.out
diff --git a/test/basic016/run b/test/basic016/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/basic016/run
rename to test/basic016/run.sh
diff --git a/test/basic017/expected b/test/basic017/expected.out
similarity index 100%
rename from test/basic017/expected
rename to test/basic017/expected.out
diff --git a/test/basic017/run b/test/basic017/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/basic017/run
rename to test/basic017/run.sh
diff --git a/test/basic018/expected b/test/basic018/expected.out
similarity index 100%
rename from test/basic018/expected
rename to test/basic018/expected.out
diff --git a/test/basic018/run b/test/basic018/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/basic018/run
rename to test/basic018/run.sh
diff --git a/test/basic019/expected b/test/basic019/expected.out
similarity index 100%
rename from test/basic019/expected
rename to test/basic019/expected.out
diff --git a/test/basic019/run b/test/basic019/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/basic019/run
rename to test/basic019/run.sh
diff --git a/test/basic020/expected b/test/basic020/expected.out
similarity index 100%
rename from test/basic020/expected
rename to test/basic020/expected.out
diff --git a/test/basic020/run b/test/basic020/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/basic020/run
rename to test/basic020/run.sh
diff --git a/test/basic021/expected b/test/basic021/expected.out
similarity index 100%
rename from test/basic021/expected
rename to test/basic021/expected.out
diff --git a/test/basic021/run b/test/basic021/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/basic021/run
rename to test/basic021/run.sh
diff --git a/test/basic022/expected b/test/basic022/expected.out
similarity index 100%
rename from test/basic022/expected
rename to test/basic022/expected.out
diff --git a/test/basic022/run b/test/basic022/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/basic022/run
rename to test/basic022/run.sh
diff --git a/test/basic023/expected b/test/basic023/expected.out
similarity index 100%
rename from test/basic023/expected
rename to test/basic023/expected.out
diff --git a/test/basic023/run b/test/basic023/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/basic023/run
rename to test/basic023/run.sh
diff --git a/test/basic024/expected b/test/basic024/expected.out
similarity index 100%
rename from test/basic024/expected
rename to test/basic024/expected.out
diff --git a/test/basic024/input b/test/basic024/input.in
similarity index 100%
rename from test/basic024/input
rename to test/basic024/input.in
diff --git a/test/basic024/run b/test/basic024/run.sh
similarity index 66%
rename from test/basic024/run
rename to test/basic024/run.sh
index 8ee701eaa..f3004a1cb 100644
--- a/test/basic024/run
+++ b/test/basic024/run.sh
@@ -1,6 +1,6 @@
 #!/usr/bin/env bash

-${IDRIS:-idris} $@ --quiet --port none < input
+${IDRIS:-idris} $@ --quiet --port none < input.in
 ${IDRIS:-idris} $@ basic024.idr -o basic024

 ./basic024
diff --git a/test/basic025/expected b/test/basic025/expected.out
similarity index 100%
rename from test/basic025/expected
rename to test/basic025/expected.out
diff --git a/test/basic025/input b/test/basic025/input.in
similarity index 100%
rename from test/basic025/input
rename to test/basic025/input.in
diff --git a/test/basic025/run b/test/basic025/run.sh
old mode 100755
new mode 100644
similarity index 55%
rename from test/basic025/run
rename to test/basic025/run.sh
index d0064ecf1..ffd0a8cde
--- a/test/basic025/run
+++ b/test/basic025/run.sh
@@ -1,7 +1,7 @@
 #!/usr/bin/env bash
-${IDRIS:-idris} $@ --quiet --port none < input
+${IDRIS:-idris} $@ --quiet --port none < input.in
 ${IDRIS:-idris} $@ -o basic025 basic025.idr

-./basic025 input
+./basic025 input.in

 rm -f basic025 *.ibc
diff --git a/test/basic026/expected b/test/basic026/expected.out
similarity index 100%
rename from test/basic026/expected
rename to test/basic026/expected.out
diff --git a/test/basic026/run b/test/basic026/run.sh
similarity index 100%
rename from test/basic026/run
rename to test/basic026/run.sh
diff --git a/test/bignum001/expected b/test/bignum001/expected.out
similarity index 100%
rename from test/bignum001/expected
rename to test/bignum001/expected.out
diff --git a/test/bignum001/run b/test/bignum001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/bignum001/run
rename to test/bignum001/run.sh
diff --git a/test/bignum002/expected b/test/bignum002/expected.out
similarity index 100%
rename from test/bignum002/expected
rename to test/bignum002/expected.out
diff --git a/test/bignum002/run b/test/bignum002/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/bignum002/run
rename to test/bignum002/run.sh
diff --git a/test/bignum003/expected b/test/bignum003/expected.out
similarity index 100%
rename from test/bignum003/expected
rename to test/bignum003/expected.out
diff --git a/test/bignum003/run b/test/bignum003/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/bignum003/run
rename to test/bignum003/run.sh
diff --git a/test/bounded001/expected b/test/bounded001/expected.out
similarity index 100%
rename from test/bounded001/expected
rename to test/bounded001/expected.out
diff --git a/test/bounded001/run b/test/bounded001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/bounded001/run
rename to test/bounded001/run.sh
diff --git a/test/buffer001/expected b/test/buffer001/expected.out
similarity index 100%
rename from test/buffer001/expected
rename to test/buffer001/expected.out
diff --git a/test/buffer001/run b/test/buffer001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/buffer001/run
rename to test/buffer001/run.sh
diff --git a/test/buffer002/expected b/test/buffer002/expected.out
similarity index 100%
rename from test/buffer002/expected
rename to test/buffer002/expected.out
diff --git a/test/buffer002/run b/test/buffer002/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/buffer002/run
rename to test/buffer002/run.sh
diff --git a/test/contrib001/expected b/test/contrib001/expected.out
similarity index 100%
rename from test/contrib001/expected
rename to test/contrib001/expected.out
diff --git a/test/contrib001/run b/test/contrib001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/contrib001/run
rename to test/contrib001/run.sh
diff --git a/test/corecords001/expected b/test/corecords001/expected.out
similarity index 100%
rename from test/corecords001/expected
rename to test/corecords001/expected.out
diff --git a/test/corecords001/run b/test/corecords001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/corecords001/run
rename to test/corecords001/run.sh
diff --git a/test/corecords002/expected b/test/corecords002/expected.out
similarity index 100%
rename from test/corecords002/expected
rename to test/corecords002/expected.out
diff --git a/test/corecords002/run b/test/corecords002/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/corecords002/run
rename to test/corecords002/run.sh
diff --git a/test/delab001/expected b/test/delab001/expected.out
similarity index 100%
rename from test/delab001/expected
rename to test/delab001/expected.out
diff --git a/test/delab001/input b/test/delab001/input.in
similarity index 100%
rename from test/delab001/input
rename to test/delab001/input.in
diff --git a/test/delab001/run b/test/delab001/run.sh
old mode 100755
new mode 100644
similarity index 91%
rename from test/delab001/run
rename to test/delab001/run.sh
index 8a652882b..77f0e9da4
--- a/test/delab001/run
+++ b/test/delab001/run.sh
@@ -1,3 +1,3 @@
 #!/usr/bin/env bash
-${IDRIS:-idris} $@ --quiet --port none --nocolor delab001.idr < input
+${IDRIS:-idris} $@ --quiet --port none --nocolor delab001.idr < input.in
 rm -f *.ibc
diff --git a/test/directives001/expected b/test/directives001/expected.out
similarity index 100%
rename from test/directives001/expected
rename to test/directives001/expected.out
diff --git a/test/directives001/run b/test/directives001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/directives001/run
rename to test/directives001/run.sh
diff --git a/test/directives002/expected b/test/directives002/expected.out
similarity index 100%
rename from test/directives002/expected
rename to test/directives002/expected.out
diff --git a/test/directives002/run b/test/directives002/run.sh
similarity index 100%
rename from test/directives002/run
rename to test/directives002/run.sh
diff --git a/test/directives003/expected b/test/directives003/expected.out
similarity index 100%
rename from test/directives003/expected
rename to test/directives003/expected.out
diff --git a/test/directives003/run b/test/directives003/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/directives003/run
rename to test/directives003/run.sh
diff --git a/test/disambig002/expected b/test/disambig002/expected.out
similarity index 100%
rename from test/disambig002/expected
rename to test/disambig002/expected.out
diff --git a/test/disambig002/run b/test/disambig002/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/disambig002/run
rename to test/disambig002/run.sh
diff --git a/test/docs001/expected b/test/docs001/expected.out
similarity index 100%
rename from test/docs001/expected
rename to test/docs001/expected.out
diff --git a/test/docs001/input b/test/docs001/input.in
similarity index 100%
rename from test/docs001/input
rename to test/docs001/input.in
diff --git a/test/docs001/run b/test/docs001/run.sh
old mode 100755
new mode 100644
similarity index 92%
rename from test/docs001/run
rename to test/docs001/run.sh
index 9fb97107a..6c3173499
--- a/test/docs001/run
+++ b/test/docs001/run.sh
@@ -1,3 +1,3 @@
 #!/usr/bin/env bash
-${IDRIS:-idris} $@ --quiet --port none --nocolor docs001.idr < input
+${IDRIS:-idris} $@ --quiet --port none --nocolor docs001.idr < input.in
 rm *.ibc
diff --git a/test/docs002/expected b/test/docs002/expected.out
similarity index 100%
rename from test/docs002/expected
rename to test/docs002/expected.out
diff --git a/test/docs002/input b/test/docs002/input.in
similarity index 100%
rename from test/docs002/input
rename to test/docs002/input.in
diff --git a/test/docs002/run b/test/docs002/run.sh
old mode 100755
new mode 100644
similarity index 83%
rename from test/docs002/run
rename to test/docs002/run.sh
index 0e21066d9..6a06570d7
--- a/test/docs002/run
+++ b/test/docs002/run.sh
@@ -1,3 +1,3 @@
 #!/usr/bin/env bash
-${IDRIS:-idris} $@ --nobanner --nocolor --quiet --port none docs002.idr < input
+${IDRIS:-idris} $@ --nobanner --nocolor --quiet --port none docs002.idr < input.in
 rm *.ibc
diff --git a/test/docs003/expected b/test/docs003/expected.out
similarity index 100%
rename from test/docs003/expected
rename to test/docs003/expected.out
diff --git a/test/docs003/input b/test/docs003/input.in
similarity index 100%
rename from test/docs003/input
rename to test/docs003/input.in
diff --git a/test/docs003/run b/test/docs003/run.sh
old mode 100755
new mode 100644
similarity index 92%
rename from test/docs003/run
rename to test/docs003/run.sh
index ff2d53aff..ad8722a5a
--- a/test/docs003/run
+++ b/test/docs003/run.sh
@@ -1,3 +1,3 @@
 #!/usr/bin/env bash
-${IDRIS:-idris} $@ --quiet --port none --nocolor docs003.idr < input
+${IDRIS:-idris} $@ --quiet --port none --nocolor docs003.idr < input.in
 rm *.ibc
diff --git a/test/docs004/expected b/test/docs004/expected.out
similarity index 100%
rename from test/docs004/expected
rename to test/docs004/expected.out
diff --git a/test/docs004/input b/test/docs004/input.in
similarity index 100%
rename from test/docs004/input
rename to test/docs004/input.in
diff --git a/test/docs004/run b/test/docs004/run.sh
old mode 100755
new mode 100644
similarity index 92%
rename from test/docs004/run
rename to test/docs004/run.sh
index 9a7be56e9..0e1323d4e
--- a/test/docs004/run
+++ b/test/docs004/run.sh
@@ -1,3 +1,3 @@
 #!/usr/bin/env bash
-${IDRIS:-idris} $@ --quiet --port none --nocolor docs004.idr < input
+${IDRIS:-idris} $@ --quiet --port none --nocolor docs004.idr < input.in
 rm *.ibc
diff --git a/test/docs005/expected b/test/docs005/expected.out
similarity index 100%
rename from test/docs005/expected
rename to test/docs005/expected.out
diff --git a/test/docs005/input b/test/docs005/input.in
similarity index 100%
rename from test/docs005/input
rename to test/docs005/input.in
diff --git a/test/docs005/run b/test/docs005/run.sh
old mode 100755
new mode 100644
similarity index 92%
rename from test/docs005/run
rename to test/docs005/run.sh
index e37e754dd..60545941f
--- a/test/docs005/run
+++ b/test/docs005/run.sh
@@ -1,3 +1,3 @@
 #!/usr/bin/env bash
-${IDRIS:-idris} $@ --quiet --port none --nocolor docs005.idr < input
+${IDRIS:-idris} $@ --quiet --port none --nocolor docs005.idr < input.in
 rm *.ibc
diff --git a/test/docs006/expected b/test/docs006/expected.out
similarity index 100%
rename from test/docs006/expected
rename to test/docs006/expected.out
diff --git a/test/docs006/input b/test/docs006/input.in
similarity index 100%
rename from test/docs006/input
rename to test/docs006/input.in
diff --git a/test/docs006/run b/test/docs006/run.sh
old mode 100755
new mode 100644
similarity index 92%
rename from test/docs006/run
rename to test/docs006/run.sh
index 447f88ca8..9b82852fc
--- a/test/docs006/run
+++ b/test/docs006/run.sh
@@ -1,3 +1,3 @@
 #!/usr/bin/env bash
-${IDRIS:-idris} $@ --quiet --port none --nocolor docs006.idr < input
+${IDRIS:-idris} $@ --quiet --port none --nocolor docs006.idr < input.in
 rm *.ibc
diff --git a/test/dsl001/expected b/test/dsl001/expected.out
similarity index 100%
rename from test/dsl001/expected
rename to test/dsl001/expected.out
diff --git a/test/dsl001/input b/test/dsl001/input.in
similarity index 100%
rename from test/dsl001/input
rename to test/dsl001/input.in
diff --git a/test/dsl001/run b/test/dsl001/run.sh
old mode 100755
new mode 100644
similarity index 93%
rename from test/dsl001/run
rename to test/dsl001/run.sh
index 19fcd13b0..732962235
--- a/test/dsl001/run
+++ b/test/dsl001/run.sh
@@ -1,5 +1,5 @@
 #!/usr/bin/env bash
 ${IDRIS:-idris} $@ test001.idr -o test001 --partial-eval
 ./test001
-${IDRIS:-idris} $@ test001.idr --partial-eval --quiet --port none < input
+${IDRIS:-idris} $@ test001.idr --partial-eval --quiet --port none < input.in
 rm -f test001 test001.ibc
diff --git a/test/dsl002/expected b/test/dsl002/expected.out
similarity index 100%
rename from test/dsl002/expected
rename to test/dsl002/expected.out
diff --git a/test/dsl002/run b/test/dsl002/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/dsl002/run
rename to test/dsl002/run.sh
diff --git a/test/dsl003/expected b/test/dsl003/expected.out
similarity index 100%
rename from test/dsl003/expected
rename to test/dsl003/expected.out
diff --git a/test/dsl003/run b/test/dsl003/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/dsl003/run
rename to test/dsl003/run.sh
diff --git a/test/dsl004/expected b/test/dsl004/expected.out
similarity index 100%
rename from test/dsl004/expected
rename to test/dsl004/expected.out
diff --git a/test/dsl004/run b/test/dsl004/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/dsl004/run
rename to test/dsl004/run.sh
diff --git a/test/effects001/expected b/test/effects001/expected.out
similarity index 100%
rename from test/effects001/expected
rename to test/effects001/expected.out
diff --git a/test/effects001/run b/test/effects001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/effects001/run
rename to test/effects001/run.sh
diff --git a/test/effects002/expected b/test/effects002/expected.out
similarity index 100%
rename from test/effects002/expected
rename to test/effects002/expected.out
diff --git a/test/effects002/run b/test/effects002/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/effects002/run
rename to test/effects002/run.sh
diff --git a/test/effects003/expected b/test/effects003/expected.out
similarity index 100%
rename from test/effects003/expected
rename to test/effects003/expected.out
diff --git a/test/effects003/input b/test/effects003/input.in
similarity index 100%
rename from test/effects003/input
rename to test/effects003/input.in
diff --git a/test/effects003/run b/test/effects003/run.sh
old mode 100755
new mode 100644
similarity index 83%
rename from test/effects003/run
rename to test/effects003/run.sh
index 52077e73a..e4b9604de
--- a/test/effects003/run
+++ b/test/effects003/run.sh
@@ -1,4 +1,4 @@
 #!/usr/bin/env bash
 ${IDRIS:-idris} $@ hangman.idr --nocolour -p effects -o hangman
-./hangman < input
+./hangman < input.in
 rm -f hangman *.ibc
diff --git a/test/effects004/expected b/test/effects004/expected.out
similarity index 100%
rename from test/effects004/expected
rename to test/effects004/expected.out
diff --git a/test/effects004/input b/test/effects004/input.in
similarity index 100%
rename from test/effects004/input
rename to test/effects004/input.in
diff --git a/test/effects004/run b/test/effects004/run.sh
old mode 100755
new mode 100644
similarity index 80%
rename from test/effects004/run
rename to test/effects004/run.sh
index ce4961d9b..ae32d385e
--- a/test/effects004/run
+++ b/test/effects004/run.sh
@@ -1,4 +1,4 @@
 #!/usr/bin/env bash
 ${IDRIS:-idris} $@ effects004.idr -o effects004 -p effects
-./effects004 < input
+./effects004 < input.in
 rm -f effects004 *.ibc
diff --git a/test/effects005/expected b/test/effects005/expected.out
similarity index 100%
rename from test/effects005/expected
rename to test/effects005/expected.out
diff --git a/test/effects005/run b/test/effects005/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/effects005/run
rename to test/effects005/run.sh
diff --git a/test/error001/expected b/test/error001/expected.out
similarity index 100%
rename from test/error001/expected
rename to test/error001/expected.out
diff --git a/test/error001/run b/test/error001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/error001/run
rename to test/error001/run.sh
diff --git a/test/error002/expected b/test/error002/expected.out
similarity index 100%
rename from test/error002/expected
rename to test/error002/expected.out
diff --git a/test/error002/run b/test/error002/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/error002/run
rename to test/error002/run.sh
diff --git a/test/error003/expected b/test/error003/expected.out
similarity index 100%
rename from test/error003/expected
rename to test/error003/expected.out
diff --git a/test/error003/run b/test/error003/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/error003/run
rename to test/error003/run.sh
diff --git a/test/error004/expected b/test/error004/expected.out
similarity index 100%
rename from test/error004/expected
rename to test/error004/expected.out
diff --git a/test/error004/run b/test/error004/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/error004/run
rename to test/error004/run.sh
diff --git a/test/error005/expected b/test/error005/expected.out
similarity index 100%
rename from test/error005/expected
rename to test/error005/expected.out
diff --git a/test/error005/run b/test/error005/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/error005/run
rename to test/error005/run.sh
diff --git a/test/error006/expected b/test/error006/expected.out
similarity index 100%
rename from test/error006/expected
rename to test/error006/expected.out
diff --git a/test/error006/run b/test/error006/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/error006/run
rename to test/error006/run.sh
diff --git a/test/error007/expected b/test/error007/expected.out
similarity index 100%
rename from test/error007/expected
rename to test/error007/expected.out
diff --git a/test/error007/run b/test/error007/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/error007/run
rename to test/error007/run.sh
diff --git a/test/error008/expected b/test/error008/expected.out
similarity index 100%
rename from test/error008/expected
rename to test/error008/expected.out
diff --git a/test/error008/run b/test/error008/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/error008/run
rename to test/error008/run.sh
diff --git a/test/error009/expected b/test/error009/expected.out
similarity index 100%
rename from test/error009/expected
rename to test/error009/expected.out
diff --git a/test/error009/run b/test/error009/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/error009/run
rename to test/error009/run.sh
diff --git a/test/ffi001/expected b/test/ffi001/expected.out
similarity index 100%
rename from test/ffi001/expected
rename to test/ffi001/expected.out
diff --git a/test/ffi001/run b/test/ffi001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/ffi001/run
rename to test/ffi001/run.sh
diff --git a/test/ffi002/expected b/test/ffi002/expected.out
similarity index 100%
rename from test/ffi002/expected
rename to test/ffi002/expected.out
diff --git a/test/ffi002/run b/test/ffi002/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/ffi002/run
rename to test/ffi002/run.sh
diff --git a/test/ffi003/expected b/test/ffi003/expected.out
similarity index 100%
rename from test/ffi003/expected
rename to test/ffi003/expected.out
diff --git a/test/ffi003/input b/test/ffi003/input.in
similarity index 100%
rename from test/ffi003/input
rename to test/ffi003/input.in
diff --git a/test/ffi003/run b/test/ffi003/run.sh
old mode 100755
new mode 100644
similarity index 82%
rename from test/ffi003/run
rename to test/ffi003/run.sh
index 01c6721bd..f247e04be
--- a/test/ffi003/run
+++ b/test/ffi003/run.sh
@@ -1,3 +1,3 @@
 #!/usr/bin/env bash
-${IDRIS:-idris} $@ --quiet --port none --nocolour test024.idr --exec main < input
+${IDRIS:-idris} $@ --quiet --port none --nocolour test024.idr --exec main < input.in
 rm -f *.ibc
diff --git a/test/ffi004/expected b/test/ffi004/expected.out
similarity index 100%
rename from test/ffi004/expected
rename to test/ffi004/expected.out
diff --git a/test/ffi004/run b/test/ffi004/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/ffi004/run
rename to test/ffi004/run.sh
diff --git a/test/ffi005/expected b/test/ffi005/expected.out
similarity index 100%
rename from test/ffi005/expected
rename to test/ffi005/expected.out
diff --git a/test/ffi005/run b/test/ffi005/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/ffi005/run
rename to test/ffi005/run.sh
diff --git a/test/ffi006/expected b/test/ffi006/expected.out
similarity index 100%
rename from test/ffi006/expected
rename to test/ffi006/expected.out
diff --git a/test/ffi006/run b/test/ffi006/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/ffi006/run
rename to test/ffi006/run.sh
diff --git a/test/ffi007/expected b/test/ffi007/expected.out
similarity index 100%
rename from test/ffi007/expected
rename to test/ffi007/expected.out
diff --git a/test/ffi007/run b/test/ffi007/run.sh
similarity index 100%
rename from test/ffi007/run
rename to test/ffi007/run.sh
diff --git a/test/ffi008/expected b/test/ffi008/expected.out
similarity index 100%
rename from test/ffi008/expected
rename to test/ffi008/expected.out
diff --git a/test/ffi008/run b/test/ffi008/run.sh
similarity index 100%
rename from test/ffi008/run
rename to test/ffi008/run.sh
diff --git a/test/ffi009/expected b/test/ffi009/expected.out
similarity index 100%
rename from test/ffi009/expected
rename to test/ffi009/expected.out
diff --git a/test/ffi009/run b/test/ffi009/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/ffi009/run
rename to test/ffi009/run.sh
diff --git a/test/ffi010/expected b/test/ffi010/expected.out
similarity index 100%
rename from test/ffi010/expected
rename to test/ffi010/expected.out
diff --git a/test/ffi010/run b/test/ffi010/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/ffi010/run
rename to test/ffi010/run.sh
diff --git a/test/ffi011/expected b/test/ffi011/expected.out
similarity index 100%
rename from test/ffi011/expected
rename to test/ffi011/expected.out
diff --git a/test/ffi011/run b/test/ffi011/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/ffi011/run
rename to test/ffi011/run.sh
diff --git a/test/ffi012/expected b/test/ffi012/expected.out
similarity index 100%
rename from test/ffi012/expected
rename to test/ffi012/expected.out
diff --git a/test/ffi012/run b/test/ffi012/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/ffi012/run
rename to test/ffi012/run.sh
diff --git a/test/ffi013/expected b/test/ffi013/expected.out
similarity index 100%
rename from test/ffi013/expected
rename to test/ffi013/expected.out
diff --git a/test/ffi013/run b/test/ffi013/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/ffi013/run
rename to test/ffi013/run.sh
diff --git a/test/folding001/expected b/test/folding001/expected.out
similarity index 100%
rename from test/folding001/expected
rename to test/folding001/expected.out
diff --git a/test/folding001/run b/test/folding001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/folding001/run
rename to test/folding001/run.sh
diff --git a/test/idrisdoc001/expected b/test/idrisdoc001/expected.out
similarity index 100%
rename from test/idrisdoc001/expected
rename to test/idrisdoc001/expected.out
diff --git a/test/idrisdoc001/run b/test/idrisdoc001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/idrisdoc001/run
rename to test/idrisdoc001/run.sh
diff --git a/test/idrisdoc002/expected b/test/idrisdoc002/expected.out
similarity index 100%
rename from test/idrisdoc002/expected
rename to test/idrisdoc002/expected.out
diff --git a/test/idrisdoc002/run b/test/idrisdoc002/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/idrisdoc002/run
rename to test/idrisdoc002/run.sh
diff --git a/test/idrisdoc003/expected b/test/idrisdoc003/expected.out
similarity index 100%
rename from test/idrisdoc003/expected
rename to test/idrisdoc003/expected.out
diff --git a/test/idrisdoc003/run b/test/idrisdoc003/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/idrisdoc003/run
rename to test/idrisdoc003/run.sh
diff --git a/test/idrisdoc004/expected b/test/idrisdoc004/expected.out
similarity index 100%
rename from test/idrisdoc004/expected
rename to test/idrisdoc004/expected.out
diff --git a/test/idrisdoc004/run b/test/idrisdoc004/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/idrisdoc004/run
rename to test/idrisdoc004/run.sh
diff --git a/test/idrisdoc005/expected b/test/idrisdoc005/expected.out
similarity index 100%
rename from test/idrisdoc005/expected
rename to test/idrisdoc005/expected.out
diff --git a/test/idrisdoc005/run b/test/idrisdoc005/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/idrisdoc005/run
rename to test/idrisdoc005/run.sh
diff --git a/test/idrisdoc006/expected b/test/idrisdoc006/expected.out
similarity index 100%
rename from test/idrisdoc006/expected
rename to test/idrisdoc006/expected.out
diff --git a/test/idrisdoc006/run b/test/idrisdoc006/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/idrisdoc006/run
rename to test/idrisdoc006/run.sh
diff --git a/test/idrisdoc007/expected b/test/idrisdoc007/expected.out
similarity index 100%
rename from test/idrisdoc007/expected
rename to test/idrisdoc007/expected.out
diff --git a/test/idrisdoc007/run b/test/idrisdoc007/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/idrisdoc007/run
rename to test/idrisdoc007/run.sh
diff --git a/test/idrisdoc008/expected b/test/idrisdoc008/expected.out
similarity index 100%
rename from test/idrisdoc008/expected
rename to test/idrisdoc008/expected.out
diff --git a/test/idrisdoc008/run b/test/idrisdoc008/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/idrisdoc008/run
rename to test/idrisdoc008/run.sh
diff --git a/test/idrisdoc009/expected b/test/idrisdoc009/expected.out
similarity index 100%
rename from test/idrisdoc009/expected
rename to test/idrisdoc009/expected.out
diff --git a/test/idrisdoc009/input b/test/idrisdoc009/input.in
similarity index 100%
rename from test/idrisdoc009/input
rename to test/idrisdoc009/input.in
diff --git a/test/idrisdoc009/run b/test/idrisdoc009/run.sh
old mode 100755
new mode 100644
similarity index 94%
rename from test/idrisdoc009/run
rename to test/idrisdoc009/run.sh
index 88ab94359..65168e370
--- a/test/idrisdoc009/run
+++ b/test/idrisdoc009/run.sh
@@ -1,3 +1,3 @@
 #!/usr/bin/env bash
-${IDRIS:-idris} $@ --nocolour --quiet --port none Test.idr < input
+${IDRIS:-idris} $@ --nocolour --quiet --port none Test.idr < input.in
 rm -f *.ibc
diff --git a/test/interactive001/expected b/test/interactive001/expected.out
similarity index 100%
rename from test/interactive001/expected
rename to test/interactive001/expected.out
diff --git a/test/interactive001/input b/test/interactive001/input.in
similarity index 100%
rename from test/interactive001/input
rename to test/interactive001/input.in
diff --git a/test/interactive001/run b/test/interactive001/run.sh
old mode 100755
new mode 100644
similarity index 82%
rename from test/interactive001/run
rename to test/interactive001/run.sh
index 392524b67..a4cdea93c
--- a/test/interactive001/run
+++ b/test/interactive001/run.sh
@@ -1,5 +1,5 @@
 #!/usr/bin/env bash

-${IDRIS:-idris} $@ --quiet --port none --indent-with 8 interactive001.idr < input
+${IDRIS:-idris} $@ --quiet --port none --indent-with 8 interactive001.idr < input.in

 rm -f *.ibc
diff --git a/test/interactive002/expected b/test/interactive002/expected.out
similarity index 100%
rename from test/interactive002/expected
rename to test/interactive002/expected.out
diff --git a/test/interactive002/input b/test/interactive002/input.in
similarity index 100%
rename from test/interactive002/input
rename to test/interactive002/input.in
diff --git a/test/interactive002/run b/test/interactive002/run.sh
old mode 100755
new mode 100644
similarity index 95%
rename from test/interactive002/run
rename to test/interactive002/run.sh
index f0230c594..a1ccc2075
--- a/test/interactive002/run
+++ b/test/interactive002/run.sh
@@ -1,3 +1,3 @@
 #!/usr/bin/env bash
-${IDRIS:-idris} $@ --quiet --port none interactive002.idr < input
+${IDRIS:-idris} $@ --quiet --port none interactive002.idr < input.in
 rm -f *.ibc
diff --git a/test/interactive003/expected b/test/interactive003/expected.out
similarity index 100%
rename from test/interactive003/expected
rename to test/interactive003/expected.out
diff --git a/test/interactive003/input b/test/interactive003/input.in
similarity index 100%
rename from test/interactive003/input
rename to test/interactive003/input.in
diff --git a/test/interactive003/run b/test/interactive003/run.sh
old mode 100755
new mode 100644
similarity index 95%
rename from test/interactive003/run
rename to test/interactive003/run.sh
index ab580d8a5..5b1cd7da7
--- a/test/interactive003/run
+++ b/test/interactive003/run.sh
@@ -1,3 +1,3 @@
 #!/usr/bin/env bash
-${IDRIS:-idris} $@ --quiet --port none interactive003.idr < input
+${IDRIS:-idris} $@ --quiet --port none interactive003.idr < input.in
 rm -f *.ibc
diff --git a/test/interactive004/expected b/test/interactive004/expected.out
similarity index 100%
rename from test/interactive004/expected
rename to test/interactive004/expected.out
diff --git a/test/interactive004/input b/test/interactive004/input.in
similarity index 100%
rename from test/interactive004/input
rename to test/interactive004/input.in
diff --git a/test/interactive004/run b/test/interactive004/run.sh
old mode 100755
new mode 100644
similarity index 95%
rename from test/interactive004/run
rename to test/interactive004/run.sh
index 24419ae99..fa704639a
--- a/test/interactive004/run
+++ b/test/interactive004/run.sh
@@ -1,3 +1,3 @@
 #!/usr/bin/env bash
-${IDRIS:-idris} $@ --quiet --port none interactive004.idr < input
+${IDRIS:-idris} $@ --quiet --port none interactive004.idr < input.in
 rm -f *.ibc
diff --git a/test/interactive005/expected b/test/interactive005/expected.out
similarity index 100%
rename from test/interactive005/expected
rename to test/interactive005/expected.out
diff --git a/test/interactive005/input b/test/interactive005/input.in
similarity index 100%
rename from test/interactive005/input
rename to test/interactive005/input.in
diff --git a/test/interactive005/run b/test/interactive005/run.sh
old mode 100755
new mode 100644
similarity index 80%
rename from test/interactive005/run
rename to test/interactive005/run.sh
index 9bf6fc76f..edec76780
--- a/test/interactive005/run
+++ b/test/interactive005/run.sh
@@ -1,5 +1,5 @@
 #!/usr/bin/env bash
-${IDRIS:-idris} $@ --nocolour --quiet --port none interactive005.idr --consolewidth 70 < input
+${IDRIS:-idris} $@ --nocolour --quiet --port none interactive005.idr --consolewidth 70 < input.in
 rm -f *.ibc
 rm -f hello.bytecode
 rm -f hello
diff --git a/test/interactive006/expected b/test/interactive006/expected.out
similarity index 100%
rename from test/interactive006/expected
rename to test/interactive006/expected.out
diff --git a/test/interactive006/input b/test/interactive006/input.in
similarity index 100%
rename from test/interactive006/input
rename to test/interactive006/input.in
diff --git a/test/interactive006/run b/test/interactive006/run.sh
old mode 100755
new mode 100644
similarity index 84%
rename from test/interactive006/run
rename to test/interactive006/run.sh
index 7ebcd30ba..1d7aa1983
--- a/test/interactive006/run
+++ b/test/interactive006/run.sh
@@ -1,3 +1,3 @@
 #!/usr/bin/env bash
-${IDRIS:-idris} $@ --quiet --port none --port 5000 interactive006.idr < input
+${IDRIS:-idris} $@ --quiet --port none --port 5000 interactive006.idr < input.in
 rm -f *.ibc
diff --git a/test/interactive007/expected b/test/interactive007/expected.out
similarity index 100%
rename from test/interactive007/expected
rename to test/interactive007/expected.out
diff --git a/test/interactive007/input b/test/interactive007/input.in
similarity index 100%
rename from test/interactive007/input
rename to test/interactive007/input.in
diff --git a/test/interactive007/run b/test/interactive007/run.sh
old mode 100755
new mode 100644
similarity index 66%
rename from test/interactive007/run
rename to test/interactive007/run.sh
index 92b0b63f7..ee1c09840
--- a/test/interactive007/run
+++ b/test/interactive007/run.sh
@@ -1,2 +1,2 @@
 #!/usr/bin/env bash
-${IDRIS:-idris} $@ -p contrib --nobanner --nocolor --port none < input | perl -pe 's-Data\\Z-Data/Z-g'
+${IDRIS:-idris} $@ -p contrib --nobanner --nocolor --port none < input.in | perl -pe 's-Data\\Z-Data/Z-g'
diff --git a/test/interactive008/expected b/test/interactive008/expected.out
similarity index 100%
rename from test/interactive008/expected
rename to test/interactive008/expected.out
diff --git a/test/interactive008/input b/test/interactive008/input.in
similarity index 100%
rename from test/interactive008/input
rename to test/interactive008/input.in
diff --git a/test/interactive008/run b/test/interactive008/run
deleted file mode 100755
index 9f83b046a..000000000
--- a/test/interactive008/run
+++ /dev/null
@@ -1,2 +0,0 @@
-#!/usr/bin/env bash
-${IDRIS:-idris} $@ --nobanner --nocolor --port none < input
diff --git a/test/interactive008/run.sh b/test/interactive008/run.sh
new file mode 100644
index 000000000..4ff27ced0
--- /dev/null
+++ b/test/interactive008/run.sh
@@ -0,0 +1,2 @@
+#!/usr/bin/env bash
+${IDRIS:-idris} $@ --nobanner --nocolor --port none < input.in
diff --git a/test/interactive009/expected b/test/interactive009/expected.out
similarity index 100%
rename from test/interactive009/expected
rename to test/interactive009/expected.out
diff --git a/test/interactive009/input b/test/interactive009/input.in
similarity index 100%
rename from test/interactive009/input
rename to test/interactive009/input.in
diff --git a/test/interactive009/run b/test/interactive009/run.sh
old mode 100755
new mode 100644
similarity index 95%
rename from test/interactive009/run
rename to test/interactive009/run.sh
index 7b392c21b..bf54445e0
--- a/test/interactive009/run
+++ b/test/interactive009/run.sh
@@ -1,3 +1,3 @@
 #!/usr/bin/env bash
-${IDRIS:-idris} $@ --quiet --port none interactive009.idr < input
+${IDRIS:-idris} $@ --quiet --port none interactive009.idr < input.in
 rm -f *.ibc
diff --git a/test/interactive010/expected b/test/interactive010/expected.out
similarity index 100%
rename from test/interactive010/expected
rename to test/interactive010/expected.out
diff --git a/test/interactive010/input b/test/interactive010/input.in
similarity index 100%
rename from test/interactive010/input
rename to test/interactive010/input.in
diff --git a/test/interactive010/run b/test/interactive010/run.sh
old mode 100755
new mode 100644
similarity index 91%
rename from test/interactive010/run
rename to test/interactive010/run.sh
index 79139c79e..ec396d22f
--- a/test/interactive010/run
+++ b/test/interactive010/run.sh
@@ -1,2 +1,2 @@
 #!/usr/bin/env bash
-${IDRIS:-idris} $@ --quiet --port none --nobanner --nocolor  < input
+${IDRIS:-idris} $@ --quiet --port none --nobanner --nocolor  < input.in
diff --git a/test/interactive011/expected b/test/interactive011/expected.out
similarity index 100%
rename from test/interactive011/expected
rename to test/interactive011/expected.out
diff --git a/test/interactive011/input b/test/interactive011/input.in
similarity index 100%
rename from test/interactive011/input
rename to test/interactive011/input.in
diff --git a/test/interactive011/run b/test/interactive011/run.sh
old mode 100755
new mode 100644
similarity index 86%
rename from test/interactive011/run
rename to test/interactive011/run.sh
index 20b5a336c..590743070
--- a/test/interactive011/run
+++ b/test/interactive011/run.sh
@@ -1,6 +1,6 @@
 #!/usr/bin/env bash

 cd src
-${IDRIS:-idris} "$@" --quiet --port none --indent-clause 4 Main.idr <../input
+${IDRIS:-idris} "$@" --quiet --port none --indent-clause 4 Main.idr <../input.in

 rm -f *.ibc
diff --git a/test/interactive012/expected b/test/interactive012/expected.out
similarity index 100%
rename from test/interactive012/expected
rename to test/interactive012/expected.out
diff --git a/test/interactive012/input b/test/interactive012/input.in
similarity index 100%
rename from test/interactive012/input
rename to test/interactive012/input.in
diff --git a/test/interactive012/run b/test/interactive012/run.sh
old mode 100755
new mode 100644
similarity index 73%
rename from test/interactive012/run
rename to test/interactive012/run.sh
index 597985d1f..5b715d07c
--- a/test/interactive012/run
+++ b/test/interactive012/run.sh
@@ -1,3 +1,3 @@
 #!/usr/bin/env bash
-${IDRIS:-idris} $@ --nocolour --consolewidth 70 --quiet --port none interactive012.idr < input
+${IDRIS:-idris} $@ --nocolour --consolewidth 70 --quiet --port none interactive012.idr < input.in
 rm -f *.ibc
diff --git a/test/interactive013/expected b/test/interactive013/expected.out
similarity index 100%
rename from test/interactive013/expected
rename to test/interactive013/expected.out
diff --git a/test/interactive013/input b/test/interactive013/input.in
similarity index 100%
rename from test/interactive013/input
rename to test/interactive013/input.in
diff --git a/test/interactive013/run b/test/interactive013/run.sh
old mode 100755
new mode 100644
similarity index 95%
rename from test/interactive013/run
rename to test/interactive013/run.sh
index 8d0d94cf3..605d13011
--- a/test/interactive013/run
+++ b/test/interactive013/run.sh
@@ -1,3 +1,3 @@
 #!/usr/bin/env bash
-${IDRIS:-idris} $@ --quiet --port none interactive013.idr < input
+${IDRIS:-idris} $@ --quiet --port none interactive013.idr < input.in
 rm -f *.ibc
diff --git a/test/interactive014/expected b/test/interactive014/expected.out
similarity index 100%
rename from test/interactive014/expected
rename to test/interactive014/expected.out
diff --git a/test/interactive014/input b/test/interactive014/input.in
similarity index 100%
rename from test/interactive014/input
rename to test/interactive014/input.in
diff --git a/test/interactive014/run b/test/interactive014/run.sh
old mode 100755
new mode 100644
similarity index 95%
rename from test/interactive014/run
rename to test/interactive014/run.sh
index 15d093d98..150f71d54
--- a/test/interactive014/run
+++ b/test/interactive014/run.sh
@@ -1,3 +1,3 @@
 #!/usr/bin/env bash
-${IDRIS:-idris} $@ --quiet --port none interactive014.idr < input
+${IDRIS:-idris} $@ --quiet --port none interactive014.idr < input.in
 rm -f *.ibc
diff --git a/test/interactive015/expected b/test/interactive015/expected.out
similarity index 100%
rename from test/interactive015/expected
rename to test/interactive015/expected.out
diff --git a/test/interactive015/input b/test/interactive015/input.in
similarity index 100%
rename from test/interactive015/input
rename to test/interactive015/input.in
diff --git a/test/interactive015/run b/test/interactive015/run.sh
old mode 100755
new mode 100644
similarity index 96%
rename from test/interactive015/run
rename to test/interactive015/run.sh
index 58dcc8928..4f66ca3a4
--- a/test/interactive015/run
+++ b/test/interactive015/run.sh
@@ -1,7 +1,7 @@
 #!/usr/bin/env bash

 cp src/interactive015.idr .
-${IDRIS:-idris} "$@" --quiet --port none interactive015.idr < input
+${IDRIS:-idris} "$@" --quiet --port none interactive015.idr < input.in

 cat interactive015.idr

diff --git a/test/interactive016/expected b/test/interactive016/expected.out
similarity index 100%
rename from test/interactive016/expected
rename to test/interactive016/expected.out
diff --git a/test/interactive016/input b/test/interactive016/input.in
similarity index 100%
rename from test/interactive016/input
rename to test/interactive016/input.in
diff --git a/test/interactive016/run b/test/interactive016/run.sh
old mode 100755
new mode 100644
similarity index 96%
rename from test/interactive016/run
rename to test/interactive016/run.sh
index 33708bd5d..bf7031e6c
--- a/test/interactive016/run
+++ b/test/interactive016/run.sh
@@ -1,7 +1,7 @@
 #!/usr/bin/env bash

 cp src/interactive016.idr .
-${IDRIS:-idris} "$@" --quiet --port none interactive016.idr < input
+${IDRIS:-idris} "$@" --quiet --port none interactive016.idr < input.in

 cat interactive016.idr

diff --git a/test/interactive017/expected b/test/interactive017/expected.out
similarity index 100%
rename from test/interactive017/expected
rename to test/interactive017/expected.out
diff --git a/test/interactive017/run b/test/interactive017/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/interactive017/run
rename to test/interactive017/run.sh
diff --git a/test/interactive018/expected b/test/interactive018/expected.out
similarity index 100%
rename from test/interactive018/expected
rename to test/interactive018/expected.out
diff --git a/test/interactive018/input b/test/interactive018/input.in
similarity index 100%
rename from test/interactive018/input
rename to test/interactive018/input.in
diff --git a/test/interactive018/run b/test/interactive018/run
deleted file mode 100755
index 83f327611..000000000
--- a/test/interactive018/run
+++ /dev/null
@@ -1,3 +0,0 @@
-#!/usr/bin/env bash
-${IDRIS:-idris} $@ --quiet --port none Top.idr < input
-rm -f *.ibc
diff --git a/test/interactive018/run.sh b/test/interactive018/run.sh
new file mode 100644
index 000000000..deaa9862f
--- /dev/null
+++ b/test/interactive018/run.sh
@@ -0,0 +1,3 @@
+#!/usr/bin/env bash
+${IDRIS:-idris} $@ --quiet --port none Top.idr < input.in
+rm -f *.ibc
diff --git a/test/interfaces001/expected b/test/interfaces001/expected.out
similarity index 100%
rename from test/interfaces001/expected
rename to test/interfaces001/expected.out
diff --git a/test/interfaces001/input b/test/interfaces001/input.in
similarity index 100%
rename from test/interfaces001/input
rename to test/interfaces001/input.in
diff --git a/test/interfaces001/run b/test/interfaces001/run.sh
old mode 100755
new mode 100644
similarity index 74%
rename from test/interfaces001/run
rename to test/interfaces001/run.sh
index fca9dc497..42130616d
--- a/test/interfaces001/run
+++ b/test/interfaces001/run.sh
@@ -1,3 +1,3 @@
 #!/usr/bin/env bash
-${IDRIS:-idris} $@ --quiet --port none --nocolour --consolewidth 70 InterfaceName.idr < input
+${IDRIS:-idris} $@ --quiet --port none --nocolour --consolewidth 70 InterfaceName.idr < input.in
 rm -f *.ibc
diff --git a/test/interfaces002/expected b/test/interfaces002/expected.out
similarity index 100%
rename from test/interfaces002/expected
rename to test/interfaces002/expected.out
diff --git a/test/interfaces002/run b/test/interfaces002/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/interfaces002/run
rename to test/interfaces002/run.sh
diff --git a/test/interfaces003/expected b/test/interfaces003/expected.out
similarity index 100%
rename from test/interfaces003/expected
rename to test/interfaces003/expected.out
diff --git a/test/interfaces003/run b/test/interfaces003/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/interfaces003/run
rename to test/interfaces003/run.sh
diff --git a/test/interfaces004/expected b/test/interfaces004/expected.out
similarity index 100%
rename from test/interfaces004/expected
rename to test/interfaces004/expected.out
diff --git a/test/interfaces004/run b/test/interfaces004/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/interfaces004/run
rename to test/interfaces004/run.sh
diff --git a/test/interfaces005/expected b/test/interfaces005/expected.out
similarity index 100%
rename from test/interfaces005/expected
rename to test/interfaces005/expected.out
diff --git a/test/interfaces005/run b/test/interfaces005/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/interfaces005/run
rename to test/interfaces005/run.sh
diff --git a/test/interfaces006/expected b/test/interfaces006/expected.out
similarity index 100%
rename from test/interfaces006/expected
rename to test/interfaces006/expected.out
diff --git a/test/interfaces006/run b/test/interfaces006/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/interfaces006/run
rename to test/interfaces006/run.sh
diff --git a/test/interfaces007/expected b/test/interfaces007/expected.out
similarity index 100%
rename from test/interfaces007/expected
rename to test/interfaces007/expected.out
diff --git a/test/interfaces007/run b/test/interfaces007/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/interfaces007/run
rename to test/interfaces007/run.sh
diff --git a/test/interfaces008/expected b/test/interfaces008/expected.out
similarity index 100%
rename from test/interfaces008/expected
rename to test/interfaces008/expected.out
diff --git a/test/interfaces008/run b/test/interfaces008/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/interfaces008/run
rename to test/interfaces008/run.sh
diff --git a/test/interfaces009/expected b/test/interfaces009/expected.out
similarity index 100%
rename from test/interfaces009/expected
rename to test/interfaces009/expected.out
diff --git a/test/interfaces009/run b/test/interfaces009/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/interfaces009/run
rename to test/interfaces009/run.sh
diff --git a/test/interfaces010/expected b/test/interfaces010/expected.out
similarity index 100%
rename from test/interfaces010/expected
rename to test/interfaces010/expected.out
diff --git a/test/interfaces010/run b/test/interfaces010/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/interfaces010/run
rename to test/interfaces010/run.sh
diff --git a/test/interpret001/expected b/test/interpret001/expected.out
similarity index 100%
rename from test/interpret001/expected
rename to test/interpret001/expected.out
diff --git a/test/interpret001/input b/test/interpret001/input.in
similarity index 100%
rename from test/interpret001/input
rename to test/interpret001/input.in
diff --git a/test/interpret001/run b/test/interpret001/run.sh
old mode 100755
new mode 100644
similarity index 88%
rename from test/interpret001/run
rename to test/interpret001/run.sh
index 24b22e2c5..e70b0bfee
--- a/test/interpret001/run
+++ b/test/interpret001/run.sh
@@ -1,3 +1,3 @@
 #!/usr/bin/env bash
-${IDRIS:-idris} $@ --quiet --port none --nocolour double-echo.idr < input
+${IDRIS:-idris} $@ --quiet --port none --nocolour double-echo.idr < input.in
 rm -f *.ibc
diff --git a/test/interpret002/expected b/test/interpret002/expected.out
similarity index 100%
rename from test/interpret002/expected
rename to test/interpret002/expected.out
diff --git a/test/interpret002/input b/test/interpret002/input.in
similarity index 100%
rename from test/interpret002/input
rename to test/interpret002/input.in
diff --git a/test/interpret002/run b/test/interpret002/run.sh
old mode 100755
new mode 100644
similarity index 88%
rename from test/interpret002/run
rename to test/interpret002/run.sh
index b4efe4077..cd5b95d80
--- a/test/interpret002/run
+++ b/test/interpret002/run.sh
@@ -1,3 +1,3 @@
 #!/usr/bin/env bash
-${IDRIS:-idris} $@ --quiet --port none --nocolour file-error.idr < input
+${IDRIS:-idris} $@ --quiet --port none --nocolour file-error.idr < input.in
 rm -f *.ibc
diff --git a/test/interpret003/expected b/test/interpret003/expected.out
similarity index 100%
rename from test/interpret003/expected
rename to test/interpret003/expected.out
diff --git a/test/interpret003/input b/test/interpret003/input.in
similarity index 100%
rename from test/interpret003/input
rename to test/interpret003/input.in
diff --git a/test/interpret003/run b/test/interpret003/run.sh
old mode 100755
new mode 100644
similarity index 87%
rename from test/interpret003/run
rename to test/interpret003/run.sh
index 3d5acb324..f6e02a8ba
--- a/test/interpret003/run
+++ b/test/interpret003/run.sh
@@ -1,3 +1,3 @@
 #!/usr/bin/env bash
-${IDRIS:-idris} $@ --quiet --port none --nocolour interpret003.idr < input
+${IDRIS:-idris} $@ --quiet --port none --nocolour interpret003.idr < input.in
 rm -f *.ibc
diff --git a/test/io001/expected b/test/io001/expected.out
similarity index 100%
rename from test/io001/expected
rename to test/io001/expected.out
diff --git a/test/io001/run b/test/io001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/io001/run
rename to test/io001/run.sh
diff --git a/test/io002/expected b/test/io002/expected.out
similarity index 100%
rename from test/io002/expected
rename to test/io002/expected.out
diff --git a/test/io002/run b/test/io002/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/io002/run
rename to test/io002/run.sh
diff --git a/test/io003/expected b/test/io003/expected.out
similarity index 100%
rename from test/io003/expected
rename to test/io003/expected.out
diff --git a/test/io003/run b/test/io003/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/io003/run
rename to test/io003/run.sh
diff --git a/test/layout001/expected b/test/layout001/expected.out
similarity index 100%
rename from test/layout001/expected
rename to test/layout001/expected.out
diff --git a/test/layout001/run b/test/layout001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/layout001/run
rename to test/layout001/run.sh
diff --git a/test/literate001/expected b/test/literate001/expected.out
similarity index 100%
rename from test/literate001/expected
rename to test/literate001/expected.out
diff --git a/test/literate001/run b/test/literate001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/literate001/run
rename to test/literate001/run.sh
diff --git a/test/meta001/expected b/test/meta001/expected.out
similarity index 100%
rename from test/meta001/expected
rename to test/meta001/expected.out
diff --git a/test/meta001/run b/test/meta001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/meta001/run
rename to test/meta001/run.sh
diff --git a/test/meta002/expected b/test/meta002/expected.out
similarity index 100%
rename from test/meta002/expected
rename to test/meta002/expected.out
diff --git a/test/meta002/run b/test/meta002/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/meta002/run
rename to test/meta002/run.sh
diff --git a/test/meta003/expected b/test/meta003/expected.out
similarity index 100%
rename from test/meta003/expected
rename to test/meta003/expected.out
diff --git a/test/meta003/run b/test/meta003/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/meta003/run
rename to test/meta003/run.sh
diff --git a/test/meta004/expected b/test/meta004/expected.out
similarity index 100%
rename from test/meta004/expected
rename to test/meta004/expected.out
diff --git a/test/meta004/run b/test/meta004/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/meta004/run
rename to test/meta004/run.sh
diff --git a/test/pkg001/expected b/test/pkg001/expected.out
similarity index 100%
rename from test/pkg001/expected
rename to test/pkg001/expected.out
diff --git a/test/pkg001/run b/test/pkg001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/pkg001/run
rename to test/pkg001/run.sh
diff --git a/test/pkg002/expected b/test/pkg002/expected.out
similarity index 100%
rename from test/pkg002/expected
rename to test/pkg002/expected.out
diff --git a/test/pkg002/run b/test/pkg002/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/pkg002/run
rename to test/pkg002/run.sh
diff --git a/test/pkg003/expected b/test/pkg003/expected.out
similarity index 100%
rename from test/pkg003/expected
rename to test/pkg003/expected.out
diff --git a/test/pkg003/run b/test/pkg003/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/pkg003/run
rename to test/pkg003/run.sh
diff --git a/test/pkg004/expected b/test/pkg004/expected.out
similarity index 100%
rename from test/pkg004/expected
rename to test/pkg004/expected.out
diff --git a/test/pkg004/run b/test/pkg004/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/pkg004/run
rename to test/pkg004/run.sh
diff --git a/test/pkg005/expected b/test/pkg005/expected.out
similarity index 100%
rename from test/pkg005/expected
rename to test/pkg005/expected.out
diff --git a/test/pkg005/run b/test/pkg005/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/pkg005/run
rename to test/pkg005/run.sh
diff --git a/test/pkg006/expected b/test/pkg006/expected.out
similarity index 100%
rename from test/pkg006/expected
rename to test/pkg006/expected.out
diff --git a/test/pkg006/run b/test/pkg006/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/pkg006/run
rename to test/pkg006/run.sh
diff --git a/test/pkg007/expected b/test/pkg007/expected.out
similarity index 100%
rename from test/pkg007/expected
rename to test/pkg007/expected.out
diff --git a/test/pkg007/input b/test/pkg007/input.in
similarity index 100%
rename from test/pkg007/input
rename to test/pkg007/input.in
diff --git a/test/pkg007/run b/test/pkg007/run.sh
old mode 100755
new mode 100644
similarity index 74%
rename from test/pkg007/run
rename to test/pkg007/run.sh
index 07838ac7c..1a890002b
--- a/test/pkg007/run
+++ b/test/pkg007/run.sh
@@ -2,6 +2,6 @@
 cd toy
 ${IDRIS:-idris} $@ --build toy.ipkg --ibcsubdir ../ibcout
 cd ../ibcout
-${IDRIS:-idris} $@ --quiet < ../input
+${IDRIS:-idris} $@ --quiet < ../input.in
 cd ..
 rm -rf ibcout
diff --git a/test/pkg008/expected b/test/pkg008/expected.out
similarity index 100%
rename from test/pkg008/expected
rename to test/pkg008/expected.out
diff --git a/test/pkg008/run b/test/pkg008/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/pkg008/run
rename to test/pkg008/run.sh
diff --git a/test/pkg009/expected b/test/pkg009/expected.out
similarity index 100%
rename from test/pkg009/expected
rename to test/pkg009/expected.out
diff --git a/test/pkg009/run b/test/pkg009/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/pkg009/run
rename to test/pkg009/run.sh
diff --git a/test/pkg010/expected b/test/pkg010/expected.out
similarity index 100%
rename from test/pkg010/expected
rename to test/pkg010/expected.out
diff --git a/test/pkg010/run b/test/pkg010/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/pkg010/run
rename to test/pkg010/run.sh
diff --git a/test/prelude001/expected b/test/prelude001/expected.out
similarity index 100%
rename from test/prelude001/expected
rename to test/prelude001/expected.out
diff --git a/test/prelude001/run b/test/prelude001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/prelude001/run
rename to test/prelude001/run.sh
diff --git a/test/primitives001/expected b/test/primitives001/expected.out
similarity index 100%
rename from test/primitives001/expected
rename to test/primitives001/expected.out
diff --git a/test/primitives001/input b/test/primitives001/input.in
similarity index 100%
rename from test/primitives001/input
rename to test/primitives001/input.in
diff --git a/test/primitives001/run b/test/primitives001/run.sh
old mode 100755
new mode 100644
similarity index 86%
rename from test/primitives001/run
rename to test/primitives001/run.sh
index 3e06fd8e3..e68c7837b
--- a/test/primitives001/run
+++ b/test/primitives001/run.sh
@@ -2,5 +2,5 @@
 ${IDRIS:-idris} $@ test005.idr -o test005
 ./test005
 ${IDRIS:-idris} $@ substring.idr -o substring
-./substring < input
+./substring < input.in
 rm -f test005 substring *.ibc
diff --git a/test/primitives002/expected b/test/primitives002/expected.out
similarity index 100%
rename from test/primitives002/expected
rename to test/primitives002/expected.out
diff --git a/test/primitives002/run b/test/primitives002/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/primitives002/run
rename to test/primitives002/run.sh
diff --git a/test/primitives003/expected b/test/primitives003/expected.out
similarity index 100%
rename from test/primitives003/expected
rename to test/primitives003/expected.out
diff --git a/test/primitives003/run b/test/primitives003/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/primitives003/run
rename to test/primitives003/run.sh
diff --git a/test/primitives004-disabled/expected b/test/primitives004-disabled/expected.out
similarity index 100%
rename from test/primitives004-disabled/expected
rename to test/primitives004-disabled/expected.out
diff --git a/test/primitives004-disabled/run b/test/primitives004-disabled/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/primitives004-disabled/run
rename to test/primitives004-disabled/run.sh
diff --git a/test/primitives005/expected b/test/primitives005/expected.out
similarity index 100%
rename from test/primitives005/expected
rename to test/primitives005/expected.out
diff --git a/test/primitives005/run b/test/primitives005/run.sh
similarity index 100%
rename from test/primitives005/run
rename to test/primitives005/run.sh
diff --git a/test/primitives006/expected b/test/primitives006/expected.out
similarity index 100%
rename from test/primitives006/expected
rename to test/primitives006/expected.out
diff --git a/test/primitives006/run b/test/primitives006/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/primitives006/run
rename to test/primitives006/run.sh
diff --git a/test/proof001/expected b/test/proof001/expected.out
similarity index 100%
rename from test/proof001/expected
rename to test/proof001/expected.out
diff --git a/test/proof001/run b/test/proof001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/proof001/run
rename to test/proof001/run.sh
diff --git a/test/proof002/expected b/test/proof002/expected.out
similarity index 100%
rename from test/proof002/expected
rename to test/proof002/expected.out
diff --git a/test/proof002/run b/test/proof002/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/proof002/run
rename to test/proof002/run.sh
diff --git a/test/proof003/expected b/test/proof003/expected.out
similarity index 100%
rename from test/proof003/expected
rename to test/proof003/expected.out
diff --git a/test/proof003/run b/test/proof003/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/proof003/run
rename to test/proof003/run.sh
diff --git a/test/proof004/expected b/test/proof004/expected.out
similarity index 100%
rename from test/proof004/expected
rename to test/proof004/expected.out
diff --git a/test/proof004/run b/test/proof004/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/proof004/run
rename to test/proof004/run.sh
diff --git a/test/proof005/expected b/test/proof005/expected.out
similarity index 100%
rename from test/proof005/expected
rename to test/proof005/expected.out
diff --git a/test/proof005/run b/test/proof005/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/proof005/run
rename to test/proof005/run.sh
diff --git a/test/proof006/expected b/test/proof006/expected.out
similarity index 100%
rename from test/proof006/expected
rename to test/proof006/expected.out
diff --git a/test/proof006/run b/test/proof006/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/proof006/run
rename to test/proof006/run.sh
diff --git a/test/proof007/expected b/test/proof007/expected.out
similarity index 100%
rename from test/proof007/expected
rename to test/proof007/expected.out
diff --git a/test/proof007/run b/test/proof007/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/proof007/run
rename to test/proof007/run.sh
diff --git a/test/proof008/expected b/test/proof008/expected.out
similarity index 100%
rename from test/proof008/expected
rename to test/proof008/expected.out
diff --git a/test/proof008/run b/test/proof008/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/proof008/run
rename to test/proof008/run.sh
diff --git a/test/proof009/expected b/test/proof009/expected.out
similarity index 100%
rename from test/proof009/expected
rename to test/proof009/expected.out
diff --git a/test/proof009/input b/test/proof009/input.in
similarity index 100%
rename from test/proof009/input
rename to test/proof009/input.in
diff --git a/test/proof009/run b/test/proof009/run.sh
old mode 100755
new mode 100644
similarity index 84%
rename from test/proof009/run
rename to test/proof009/run.sh
index 98c5de4fb..aa4e220d6
--- a/test/proof009/run
+++ b/test/proof009/run.sh
@@ -1,3 +1,3 @@
 #!/usr/bin/env bash
-${IDRIS:-idris} $@ --consolewidth 70 --quiet --port none proof009.idr < input
+${IDRIS:-idris} $@ --consolewidth 70 --quiet --port none proof009.idr < input.in
 rm -f *.ibc
diff --git a/test/proof010/expected b/test/proof010/expected.out
similarity index 100%
rename from test/proof010/expected
rename to test/proof010/expected.out
diff --git a/test/proof010/run b/test/proof010/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/proof010/run
rename to test/proof010/run.sh
diff --git a/test/proof011/expected b/test/proof011/expected.out
similarity index 100%
rename from test/proof011/expected
rename to test/proof011/expected.out
diff --git a/test/proof011/run b/test/proof011/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/proof011/run
rename to test/proof011/run.sh
diff --git a/test/proofsearch001/expected b/test/proofsearch001/expected.out
similarity index 100%
rename from test/proofsearch001/expected
rename to test/proofsearch001/expected.out
diff --git a/test/proofsearch001/run b/test/proofsearch001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/proofsearch001/run
rename to test/proofsearch001/run.sh
diff --git a/test/proofsearch002/expected b/test/proofsearch002/expected.out
similarity index 100%
rename from test/proofsearch002/expected
rename to test/proofsearch002/expected.out
diff --git a/test/proofsearch002/run b/test/proofsearch002/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/proofsearch002/run
rename to test/proofsearch002/run.sh
diff --git a/test/proofsearch003/expected b/test/proofsearch003/expected.out
similarity index 100%
rename from test/proofsearch003/expected
rename to test/proofsearch003/expected.out
diff --git a/test/proofsearch003/run b/test/proofsearch003/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/proofsearch003/run
rename to test/proofsearch003/run.sh
diff --git a/test/pruviloj001/expected b/test/pruviloj001/expected.out
similarity index 100%
rename from test/pruviloj001/expected
rename to test/pruviloj001/expected.out
diff --git a/test/pruviloj001/run b/test/pruviloj001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/pruviloj001/run
rename to test/pruviloj001/run.sh
diff --git a/test/quasiquote001/expected b/test/quasiquote001/expected.out
similarity index 100%
rename from test/quasiquote001/expected
rename to test/quasiquote001/expected.out
diff --git a/test/quasiquote001/run b/test/quasiquote001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/quasiquote001/run
rename to test/quasiquote001/run.sh
diff --git a/test/quasiquote002/expected b/test/quasiquote002/expected.out
similarity index 100%
rename from test/quasiquote002/expected
rename to test/quasiquote002/expected.out
diff --git a/test/quasiquote002/run b/test/quasiquote002/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/quasiquote002/run
rename to test/quasiquote002/run.sh
diff --git a/test/quasiquote003/expected b/test/quasiquote003/expected.out
similarity index 100%
rename from test/quasiquote003/expected
rename to test/quasiquote003/expected.out
diff --git a/test/quasiquote003/run b/test/quasiquote003/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/quasiquote003/run
rename to test/quasiquote003/run.sh
diff --git a/test/quasiquote004/expected b/test/quasiquote004/expected.out
similarity index 100%
rename from test/quasiquote004/expected
rename to test/quasiquote004/expected.out
diff --git a/test/quasiquote004/run b/test/quasiquote004/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/quasiquote004/run
rename to test/quasiquote004/run.sh
diff --git a/test/quasiquote005/expected b/test/quasiquote005/expected.out
similarity index 100%
rename from test/quasiquote005/expected
rename to test/quasiquote005/expected.out
diff --git a/test/quasiquote005/run b/test/quasiquote005/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/quasiquote005/run
rename to test/quasiquote005/run.sh
diff --git a/test/quasiquote006/expected b/test/quasiquote006/expected.out
similarity index 100%
rename from test/quasiquote006/expected
rename to test/quasiquote006/expected.out
diff --git a/test/quasiquote006/run b/test/quasiquote006/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/quasiquote006/run
rename to test/quasiquote006/run.sh
diff --git a/test/records001/expected b/test/records001/expected.out
similarity index 100%
rename from test/records001/expected
rename to test/records001/expected.out
diff --git a/test/records001/run b/test/records001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/records001/run
rename to test/records001/run.sh
diff --git a/test/records002/expected b/test/records002/expected.out
similarity index 100%
rename from test/records002/expected
rename to test/records002/expected.out
diff --git a/test/records002/run b/test/records002/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/records002/run
rename to test/records002/run.sh
diff --git a/test/records003/expected b/test/records003/expected.out
similarity index 100%
rename from test/records003/expected
rename to test/records003/expected.out
diff --git a/test/records003/run b/test/records003/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/records003/run
rename to test/records003/run.sh
diff --git a/test/records004/expected b/test/records004/expected.out
similarity index 100%
rename from test/records004/expected
rename to test/records004/expected.out
diff --git a/test/records004/run b/test/records004/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/records004/run
rename to test/records004/run.sh
diff --git a/test/records005/expected b/test/records005/expected.out
similarity index 100%
rename from test/records005/expected
rename to test/records005/expected.out
diff --git a/test/records005/run b/test/records005/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/records005/run
rename to test/records005/run.sh
diff --git a/test/reg001/expected b/test/reg001/expected.out
similarity index 100%
rename from test/reg001/expected
rename to test/reg001/expected.out
diff --git a/test/reg001/run b/test/reg001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/reg001/run
rename to test/reg001/run.sh
diff --git a/test/reg002/expected b/test/reg002/expected.out
similarity index 100%
rename from test/reg002/expected
rename to test/reg002/expected.out
diff --git a/test/reg002/run b/test/reg002/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/reg002/run
rename to test/reg002/run.sh
diff --git a/test/reg004/expected b/test/reg004/expected.out
similarity index 100%
rename from test/reg004/expected
rename to test/reg004/expected.out
diff --git a/test/reg004/run b/test/reg004/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/reg004/run
rename to test/reg004/run.sh
diff --git a/test/reg005/expected b/test/reg005/expected.out
similarity index 100%
rename from test/reg005/expected
rename to test/reg005/expected.out
diff --git a/test/reg005/run b/test/reg005/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/reg005/run
rename to test/reg005/run.sh
diff --git a/test/reg007/expected b/test/reg007/expected.out
similarity index 100%
rename from test/reg007/expected
rename to test/reg007/expected.out
diff --git a/test/reg007/run b/test/reg007/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/reg007/run
rename to test/reg007/run.sh
diff --git a/test/reg013/expected b/test/reg013/expected.out
similarity index 100%
rename from test/reg013/expected
rename to test/reg013/expected.out
diff --git a/test/reg013/run b/test/reg013/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/reg013/run
rename to test/reg013/run.sh
diff --git a/test/reg016/expected b/test/reg016/expected.out
similarity index 100%
rename from test/reg016/expected
rename to test/reg016/expected.out
diff --git a/test/reg016/run b/test/reg016/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/reg016/run
rename to test/reg016/run.sh
diff --git a/test/reg017/expected b/test/reg017/expected.out
similarity index 100%
rename from test/reg017/expected
rename to test/reg017/expected.out
diff --git a/test/reg017/run b/test/reg017/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/reg017/run
rename to test/reg017/run.sh
diff --git a/test/reg020/expected b/test/reg020/expected.out
similarity index 100%
rename from test/reg020/expected
rename to test/reg020/expected.out
diff --git a/test/reg020/run b/test/reg020/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/reg020/run
rename to test/reg020/run.sh
diff --git a/test/reg024/expected b/test/reg024/expected.out
similarity index 100%
rename from test/reg024/expected
rename to test/reg024/expected.out
diff --git a/test/reg024/run b/test/reg024/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/reg024/run
rename to test/reg024/run.sh
diff --git a/test/reg025/expected b/test/reg025/expected.out
similarity index 100%
rename from test/reg025/expected
rename to test/reg025/expected.out
diff --git a/test/reg025/run b/test/reg025/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/reg025/run
rename to test/reg025/run.sh
diff --git a/test/reg027/expected b/test/reg027/expected.out
similarity index 100%
rename from test/reg027/expected
rename to test/reg027/expected.out
diff --git a/test/reg027/run b/test/reg027/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/reg027/run
rename to test/reg027/run.sh
diff --git a/test/reg029/expected b/test/reg029/expected.out
similarity index 100%
rename from test/reg029/expected
rename to test/reg029/expected.out
diff --git a/test/reg029/run b/test/reg029/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/reg029/run
rename to test/reg029/run.sh
diff --git a/test/reg031/expected b/test/reg031/expected.out
similarity index 100%
rename from test/reg031/expected
rename to test/reg031/expected.out
diff --git a/test/reg031/run b/test/reg031/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/reg031/run
rename to test/reg031/run.sh
diff --git a/test/reg032/expected b/test/reg032/expected.out
similarity index 100%
rename from test/reg032/expected
rename to test/reg032/expected.out
diff --git a/test/reg032/run b/test/reg032/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/reg032/run
rename to test/reg032/run.sh
diff --git a/test/reg039/expected b/test/reg039/expected.out
similarity index 100%
rename from test/reg039/expected
rename to test/reg039/expected.out
diff --git a/test/reg039/run b/test/reg039/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/reg039/run
rename to test/reg039/run.sh
diff --git a/test/reg040/expected b/test/reg040/expected.out
similarity index 100%
rename from test/reg040/expected
rename to test/reg040/expected.out
diff --git a/test/reg040/run b/test/reg040/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/reg040/run
rename to test/reg040/run.sh
diff --git a/test/reg041/expected b/test/reg041/expected.out
similarity index 100%
rename from test/reg041/expected
rename to test/reg041/expected.out
diff --git a/test/reg041/run b/test/reg041/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/reg041/run
rename to test/reg041/run.sh
diff --git a/test/reg042/expected b/test/reg042/expected.out
similarity index 100%
rename from test/reg042/expected
rename to test/reg042/expected.out
diff --git a/test/reg042/run b/test/reg042/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/reg042/run
rename to test/reg042/run.sh
diff --git a/test/reg045/expected b/test/reg045/expected.out
similarity index 100%
rename from test/reg045/expected
rename to test/reg045/expected.out
diff --git a/test/reg045/run b/test/reg045/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/reg045/run
rename to test/reg045/run.sh
diff --git a/test/reg048/expected b/test/reg048/expected.out
similarity index 100%
rename from test/reg048/expected
rename to test/reg048/expected.out
diff --git a/test/reg048/run b/test/reg048/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/reg048/run
rename to test/reg048/run.sh
diff --git a/test/reg051-disabled/expected b/test/reg051-disabled/expected.out
similarity index 100%
rename from test/reg051-disabled/expected
rename to test/reg051-disabled/expected.out
diff --git a/test/reg051-disabled/run b/test/reg051-disabled/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/reg051-disabled/run
rename to test/reg051-disabled/run.sh
diff --git a/test/reg052/expected b/test/reg052/expected.out
similarity index 100%
rename from test/reg052/expected
rename to test/reg052/expected.out
diff --git a/test/reg052/run b/test/reg052/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/reg052/run
rename to test/reg052/run.sh
diff --git a/test/reg067/expected b/test/reg067/expected.out
similarity index 100%
rename from test/reg067/expected
rename to test/reg067/expected.out
diff --git a/test/reg067/run b/test/reg067/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/reg067/run
rename to test/reg067/run.sh
diff --git a/test/reg075/expected b/test/reg075/expected.out
similarity index 100%
rename from test/reg075/expected
rename to test/reg075/expected.out
diff --git a/test/reg075/input b/test/reg075/input.in
similarity index 100%
rename from test/reg075/input
rename to test/reg075/input.in
diff --git a/test/reg075/run b/test/reg075/run
deleted file mode 100755
index 10c4bdc8a..000000000
--- a/test/reg075/run
+++ /dev/null
@@ -1,3 +0,0 @@
-#!/usr/bin/env bash
-${IDRIS:-idris} $@ --quiet --port none reg075.idr < input
-rm -f *.ibc
diff --git a/test/reg075/run.sh b/test/reg075/run.sh
new file mode 100644
index 000000000..b30b67d35
--- /dev/null
+++ b/test/reg075/run.sh
@@ -0,0 +1,3 @@
+#!/usr/bin/env bash
+${IDRIS:-idris} $@ --quiet --port none reg075.idr < input.in
+rm -f *.ibc
diff --git a/test/reg076/expected b/test/reg076/expected.out
similarity index 100%
rename from test/reg076/expected
rename to test/reg076/expected.out
diff --git a/test/reg076/input b/test/reg076/input.in
similarity index 100%
rename from test/reg076/input
rename to test/reg076/input.in
diff --git a/test/reg076/run b/test/reg076/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/reg076/run
rename to test/reg076/run.sh
diff --git a/test/reg077/expected b/test/reg077/expected.out
similarity index 100%
rename from test/reg077/expected
rename to test/reg077/expected.out
diff --git a/test/reg077/run b/test/reg077/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/reg077/run
rename to test/reg077/run.sh
diff --git a/test/regression001/expected b/test/regression001/expected.out
similarity index 100%
rename from test/regression001/expected
rename to test/regression001/expected.out
diff --git a/test/regression001/run b/test/regression001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/regression001/run
rename to test/regression001/run.sh
diff --git a/test/regression002/expected b/test/regression002/expected.out
similarity index 100%
rename from test/regression002/expected
rename to test/regression002/expected.out
diff --git a/test/regression002/run b/test/regression002/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/regression002/run
rename to test/regression002/run.sh
diff --git a/test/regression003/expected b/test/regression003/expected.out
similarity index 100%
rename from test/regression003/expected
rename to test/regression003/expected.out
diff --git a/test/regression003/run b/test/regression003/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/regression003/run
rename to test/regression003/run.sh
diff --git a/test/sourceLocation001/expected b/test/sourceLocation001/expected.out
similarity index 100%
rename from test/sourceLocation001/expected
rename to test/sourceLocation001/expected.out
diff --git a/test/sourceLocation001/run b/test/sourceLocation001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/sourceLocation001/run
rename to test/sourceLocation001/run.sh
diff --git a/test/st001/expected b/test/st001/expected.out
similarity index 100%
rename from test/st001/expected
rename to test/st001/expected.out
diff --git a/test/st001/run b/test/st001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/st001/run
rename to test/st001/run.sh
diff --git a/test/st002/expected b/test/st002/expected.out
similarity index 100%
rename from test/st002/expected
rename to test/st002/expected.out
diff --git a/test/st002/run b/test/st002/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/st002/run
rename to test/st002/run.sh
diff --git a/test/st003/expected b/test/st003/expected.out
similarity index 100%
rename from test/st003/expected
rename to test/st003/expected.out
diff --git a/test/st003/run b/test/st003/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/st003/run
rename to test/st003/run.sh
diff --git a/test/st004/expected b/test/st004/expected.out
similarity index 100%
rename from test/st004/expected
rename to test/st004/expected.out
diff --git a/test/st004/run b/test/st004/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/st004/run
rename to test/st004/run.sh
diff --git a/test/st005/expected b/test/st005/expected.out
similarity index 100%
rename from test/st005/expected
rename to test/st005/expected.out
diff --git a/test/st005/run b/test/st005/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/st005/run
rename to test/st005/run.sh
diff --git a/test/st006/expected b/test/st006/expected.out
similarity index 100%
rename from test/st006/expected
rename to test/st006/expected.out
diff --git a/test/st006/run b/test/st006/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/st006/run
rename to test/st006/run.sh
diff --git a/test/st007/expected b/test/st007/expected.out
similarity index 100%
rename from test/st007/expected
rename to test/st007/expected.out
diff --git a/test/st007/run b/test/st007/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/st007/run
rename to test/st007/run.sh
diff --git a/test/sugar001/expected b/test/sugar001/expected.out
similarity index 100%
rename from test/sugar001/expected
rename to test/sugar001/expected.out
diff --git a/test/sugar001/run b/test/sugar001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/sugar001/run
rename to test/sugar001/run.sh
diff --git a/test/sugar002/expected b/test/sugar002/expected.out
similarity index 100%
rename from test/sugar002/expected
rename to test/sugar002/expected.out
diff --git a/test/sugar002/run b/test/sugar002/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/sugar002/run
rename to test/sugar002/run.sh
diff --git a/test/sugar003/expected b/test/sugar003/expected.out
similarity index 100%
rename from test/sugar003/expected
rename to test/sugar003/expected.out
diff --git a/test/sugar003/run b/test/sugar003/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/sugar003/run
rename to test/sugar003/run.sh
diff --git a/test/sugar004/expected b/test/sugar004/expected.out
similarity index 100%
rename from test/sugar004/expected
rename to test/sugar004/expected.out
diff --git a/test/sugar004/run b/test/sugar004/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/sugar004/run
rename to test/sugar004/run.sh
diff --git a/test/sugar005/expected b/test/sugar005/expected.out
similarity index 100%
rename from test/sugar005/expected
rename to test/sugar005/expected.out
diff --git a/test/sugar005/run b/test/sugar005/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/sugar005/run
rename to test/sugar005/run.sh
diff --git a/test/syntax001/expected b/test/syntax001/expected.out
similarity index 100%
rename from test/syntax001/expected
rename to test/syntax001/expected.out
diff --git a/test/syntax001/run b/test/syntax001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/syntax001/run
rename to test/syntax001/run.sh
diff --git a/test/syntax002/expected b/test/syntax002/expected.out
similarity index 100%
rename from test/syntax002/expected
rename to test/syntax002/expected.out
diff --git a/test/syntax002/run b/test/syntax002/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/syntax002/run
rename to test/syntax002/run.sh
diff --git a/test/tactics001/expected b/test/tactics001/expected.out
similarity index 100%
rename from test/tactics001/expected
rename to test/tactics001/expected.out
diff --git a/test/tactics001/run b/test/tactics001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/tactics001/run
rename to test/tactics001/run.sh
diff --git a/test/totality001/expected b/test/totality001/expected.out
similarity index 100%
rename from test/totality001/expected
rename to test/totality001/expected.out
diff --git a/test/totality001/run b/test/totality001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/totality001/run
rename to test/totality001/run.sh
diff --git a/test/totality002/expected b/test/totality002/expected.out
similarity index 100%
rename from test/totality002/expected
rename to test/totality002/expected.out
diff --git a/test/totality002/run b/test/totality002/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/totality002/run
rename to test/totality002/run.sh
diff --git a/test/totality003/expected b/test/totality003/expected.out
similarity index 100%
rename from test/totality003/expected
rename to test/totality003/expected.out
diff --git a/test/totality003/run b/test/totality003/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/totality003/run
rename to test/totality003/run.sh
diff --git a/test/totality004/expected b/test/totality004/expected.out
similarity index 100%
rename from test/totality004/expected
rename to test/totality004/expected.out
diff --git a/test/totality004/run b/test/totality004/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/totality004/run
rename to test/totality004/run.sh
diff --git a/test/totality005/expected b/test/totality005/expected.out
similarity index 100%
rename from test/totality005/expected
rename to test/totality005/expected.out
diff --git a/test/totality005/run b/test/totality005/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/totality005/run
rename to test/totality005/run.sh
diff --git a/test/totality006/expected b/test/totality006/expected.out
similarity index 100%
rename from test/totality006/expected
rename to test/totality006/expected.out
diff --git a/test/totality006/run b/test/totality006/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/totality006/run
rename to test/totality006/run.sh
diff --git a/test/totality007/expected b/test/totality007/expected.out
similarity index 100%
rename from test/totality007/expected
rename to test/totality007/expected.out
diff --git a/test/totality007/run b/test/totality007/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/totality007/run
rename to test/totality007/run.sh
diff --git a/test/totality008/expected b/test/totality008/expected.out
similarity index 100%
rename from test/totality008/expected
rename to test/totality008/expected.out
diff --git a/test/totality008/run b/test/totality008/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/totality008/run
rename to test/totality008/run.sh
diff --git a/test/totality009/expected b/test/totality009/expected.out
similarity index 100%
rename from test/totality009/expected
rename to test/totality009/expected.out
diff --git a/test/totality009/run b/test/totality009/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/totality009/run
rename to test/totality009/run.sh
diff --git a/test/totality010/expected b/test/totality010/expected.out
similarity index 100%
rename from test/totality010/expected
rename to test/totality010/expected.out
diff --git a/test/totality010/run b/test/totality010/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/totality010/run
rename to test/totality010/run.sh
diff --git a/test/totality011/expected b/test/totality011/expected.out
similarity index 100%
rename from test/totality011/expected
rename to test/totality011/expected.out
diff --git a/test/totality011/run b/test/totality011/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/totality011/run
rename to test/totality011/run.sh
diff --git a/test/totality012/expected b/test/totality012/expected.out
similarity index 100%
rename from test/totality012/expected
rename to test/totality012/expected.out
diff --git a/test/totality012/run b/test/totality012/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/totality012/run
rename to test/totality012/run.sh
diff --git a/test/totality013/expected b/test/totality013/expected.out
similarity index 100%
rename from test/totality013/expected
rename to test/totality013/expected.out
diff --git a/test/totality013/run b/test/totality013/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/totality013/run
rename to test/totality013/run.sh
diff --git a/test/totality014/expected b/test/totality014/expected.out
similarity index 100%
rename from test/totality014/expected
rename to test/totality014/expected.out
diff --git a/test/totality014/run b/test/totality014/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/totality014/run
rename to test/totality014/run.sh
diff --git a/test/totality015/expected b/test/totality015/expected.out
similarity index 100%
rename from test/totality015/expected
rename to test/totality015/expected.out
diff --git a/test/totality015/run b/test/totality015/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/totality015/run
rename to test/totality015/run.sh
diff --git a/test/totality016/expected b/test/totality016/expected.out
similarity index 100%
rename from test/totality016/expected
rename to test/totality016/expected.out
diff --git a/test/totality016/run b/test/totality016/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/totality016/run
rename to test/totality016/run.sh
diff --git a/test/totality017/expected b/test/totality017/expected.out
similarity index 100%
rename from test/totality017/expected
rename to test/totality017/expected.out
diff --git a/test/totality017/run b/test/totality017/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/totality017/run
rename to test/totality017/run.sh
diff --git a/test/totality018/expected b/test/totality018/expected.out
similarity index 100%
rename from test/totality018/expected
rename to test/totality018/expected.out
diff --git a/test/totality018/run b/test/totality018/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/totality018/run
rename to test/totality018/run.sh
diff --git a/test/totality019/expected b/test/totality019/expected.out
similarity index 100%
rename from test/totality019/expected
rename to test/totality019/expected.out
diff --git a/test/totality019/run b/test/totality019/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/totality019/run
rename to test/totality019/run.sh
diff --git a/test/totality020/expected b/test/totality020/expected.out
similarity index 100%
rename from test/totality020/expected
rename to test/totality020/expected.out
diff --git a/test/totality020/run b/test/totality020/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/totality020/run
rename to test/totality020/run.sh
diff --git a/test/totality021/expected b/test/totality021/expected.out
similarity index 100%
rename from test/totality021/expected
rename to test/totality021/expected.out
diff --git a/test/totality021/run b/test/totality021/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/totality021/run
rename to test/totality021/run.sh
diff --git a/test/totality022/expected b/test/totality022/expected.out
similarity index 100%
rename from test/totality022/expected
rename to test/totality022/expected.out
diff --git a/test/totality022/run b/test/totality022/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/totality022/run
rename to test/totality022/run.sh
diff --git a/test/totality023/expected b/test/totality023/expected.out
similarity index 100%
rename from test/totality023/expected
rename to test/totality023/expected.out
diff --git a/test/totality023/run b/test/totality023/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/totality023/run
rename to test/totality023/run.sh
diff --git a/test/totality024/expected b/test/totality024/expected.out
similarity index 100%
rename from test/totality024/expected
rename to test/totality024/expected.out
diff --git a/test/totality024/run b/test/totality024/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/totality024/run
rename to test/totality024/run.sh
diff --git a/test/totality025/expected b/test/totality025/expected.out
similarity index 100%
rename from test/totality025/expected
rename to test/totality025/expected.out
diff --git a/test/totality025/run b/test/totality025/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/totality025/run
rename to test/totality025/run.sh
diff --git a/test/totality026/expected b/test/totality026/expected.out
similarity index 100%
rename from test/totality026/expected
rename to test/totality026/expected.out
diff --git a/test/totality026/run b/test/totality026/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/totality026/run
rename to test/totality026/run.sh
diff --git a/test/tutorial001/expected b/test/tutorial001/expected.out
similarity index 100%
rename from test/tutorial001/expected
rename to test/tutorial001/expected.out
diff --git a/test/tutorial001/run b/test/tutorial001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/tutorial001/run
rename to test/tutorial001/run.sh
diff --git a/test/tutorial002/expected b/test/tutorial002/expected.out
similarity index 100%
rename from test/tutorial002/expected
rename to test/tutorial002/expected.out
diff --git a/test/tutorial002/run b/test/tutorial002/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/tutorial002/run
rename to test/tutorial002/run.sh
diff --git a/test/tutorial003/expected b/test/tutorial003/expected.out
similarity index 100%
rename from test/tutorial003/expected
rename to test/tutorial003/expected.out
diff --git a/test/tutorial003/run b/test/tutorial003/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/tutorial003/run
rename to test/tutorial003/run.sh
diff --git a/test/tutorial004/expected b/test/tutorial004/expected.out
similarity index 100%
rename from test/tutorial004/expected
rename to test/tutorial004/expected.out
diff --git a/test/tutorial004/run b/test/tutorial004/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/tutorial004/run
rename to test/tutorial004/run.sh
diff --git a/test/tutorial005/expected b/test/tutorial005/expected.out
similarity index 100%
rename from test/tutorial005/expected
rename to test/tutorial005/expected.out
diff --git a/test/tutorial005/run b/test/tutorial005/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/tutorial005/run
rename to test/tutorial005/run.sh
diff --git a/test/tutorial006/expected b/test/tutorial006/expected.out
similarity index 100%
rename from test/tutorial006/expected
rename to test/tutorial006/expected.out
diff --git a/test/tutorial006/run b/test/tutorial006/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/tutorial006/run
rename to test/tutorial006/run.sh
diff --git a/test/tutorial007/expected b/test/tutorial007/expected.out
similarity index 100%
rename from test/tutorial007/expected
rename to test/tutorial007/expected.out
diff --git a/test/tutorial007/run b/test/tutorial007/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/tutorial007/run
rename to test/tutorial007/run.sh
diff --git a/test/unique001/expected b/test/unique001/expected.out
similarity index 100%
rename from test/unique001/expected
rename to test/unique001/expected.out
diff --git a/test/unique001/run b/test/unique001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/unique001/run
rename to test/unique001/run.sh
diff --git a/test/unique004/expected b/test/unique004/expected.out
similarity index 100%
rename from test/unique004/expected
rename to test/unique004/expected.out
diff --git a/test/unique004/run b/test/unique004/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/unique004/run
rename to test/unique004/run.sh
diff --git a/test/universes001/expected b/test/universes001/expected.out
similarity index 100%
rename from test/universes001/expected
rename to test/universes001/expected.out
diff --git a/test/universes001/run b/test/universes001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/universes001/run
rename to test/universes001/run.sh
diff --git a/test/universes002/expected b/test/universes002/expected.out
similarity index 100%
rename from test/universes002/expected
rename to test/universes002/expected.out
diff --git a/test/universes002/run b/test/universes002/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/universes002/run
rename to test/universes002/run.sh
diff --git a/test/views001/expected b/test/views001/expected.out
similarity index 100%
rename from test/views001/expected
rename to test/views001/expected.out
diff --git a/test/views001/run b/test/views001/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/views001/run
rename to test/views001/run.sh
diff --git a/test/views002/expected b/test/views002/expected.out
similarity index 100%
rename from test/views002/expected
rename to test/views002/expected.out
diff --git a/test/views002/run b/test/views002/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/views002/run
rename to test/views002/run.sh
diff --git a/test/views003/expected b/test/views003/expected.out
similarity index 100%
rename from test/views003/expected
rename to test/views003/expected.out
diff --git a/test/views003/run b/test/views003/run.sh
old mode 100755
new mode 100644
similarity index 100%
rename from test/views003/run
rename to test/views003/run.sh

From 6ccef96deb5e8d34d9f5033f26dc658c514a2a77 Mon Sep 17 00:00:00 2001
From: Niklas Larsson <niklas@mm.st>
Date: Sat, 25 Jan 2020 03:21:07 +0100
Subject: [PATCH 05/11] Use legacy cabal commands for travis

---
 .travis.yml | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

diff --git a/idris.cabal b/idris.cabal
index c0bd2a440..bb931ba20 100644
--- a/idris.cabal
+++ b/idris.cabal
@@ -396,7 +396,7 @@ Test-suite regression-and-feature-tests
                , filepath
                , directory
                , haskeline >= 0.7
-               , optparse-applicative >= 0.13 && < 0.15
+               , optparse-applicative >= 0.13 && < 0.16
                , tagged
                , tasty >= 0.8
                , tasty-golden >= 2.0
From 9662ab5e4a5daebf61036be81af718f512a77235 Mon Sep 17 00:00:00 2001
From: Niklas Larsson <niklas@mm.st>
Date: Sat, 25 Jan 2020 05:49:53 +0100
Subject: [PATCH 11/11] Disable travis for GHC 8.8 (libffi still broken)

Update changelog

Use GHC 8.8 in Appveyor

Run legacy test commands
---
 .travis.yml                               | 19 +++++-----
 CHANGELOG.md                              |  3 ++
 Makefile                                  |  6 +--
 appveyor.yml                              |  6 +--
 idris.cabal                               |  3 ++
 test/dsl002/{test => test.in}             |  0
 test/dsl002/test014.idr                   |  2 +-
 test/effects001/test021.idr               |  2 +-
 test/effects001/{testFile => testFile.in} |  0
 test/ffi011/{ffi011 => ffi011.js}         |  0
 test/ffi011/run.sh                        |  2 +-
 test/ffi012/{ffi012 => ffi012.js}         |  0
 test/pkg010/expected.out                  | 46 +++++++++++------------
 test/st001/test001.idr                    |  2 +-
 test/st001/{testFile => testFile.in}      |  0
 test/st002/test002.idr                    |  2 +-
 test/st002/{testFile => testFile.in}      |  0
 test/st003/test003.idr                    |  2 +-
 test/st003/{testFile => testFile.in}      |  0
 19 files changed, 49 insertions(+), 46 deletions(-)
 rename test/dsl002/{test => test.in} (100%)
 rename test/effects001/{testFile => testFile.in} (100%)
 rename test/ffi011/{ffi011 => ffi011.js} (100%)
 rename test/ffi012/{ffi012 => ffi012.js} (100%)
 rename test/st001/{testFile => testFile.in} (100%)
 rename test/st002/{testFile => testFile.in} (100%)
 rename test/st003/{testFile => testFile.in} (100%)

diff --git a/Makefile b/Makefile
index b4fa9332d..4914401e5 100644
--- a/Makefile
+++ b/Makefile
@@ -30,15 +30,15 @@ stylize:
 	./stylize.sh

 test_c:
-	$(CABAL) test $(ARGS) --test-options \
+	$(CABAL) v1-test $(ARGS) --test-options \
 		"$(TEST-ARGS) --rerun-update +RTS -N$(TEST-JOBS) -RTS"

 test_js:
-	$(CABAL) test $(ARGS) --test-options \
+	$(CABAL) v1-test $(ARGS) --test-options \
 		"$(TEST-ARGS) --node --rerun-update +RTS -N$(TEST-JOBS) -RTS"

 test_update:
-	$(CABAL) test $(ARGS) --test-options \
+	$(CABAL) v1-test $(ARGS) --test-options \
 		"$(TEST-ARGS) --accept +RTS -N$(TEST-JOBS) -RTS"

 test_clean:
diff --git a/idris.cabal b/idris.cabal
index 8c04bad32..3cf1ab4e0 100644
--- a/idris.cabal
+++ b/idris.cabal
@@ -116,6 +116,9 @@ Extra-source-files:
                       test/**/*.c
                       test/**/*.h
                       test/**/*.in
+                      test/**/*.txt
+                      test/**/*.js
+                      test/base001/Makefile
                       test/ffi004/theOtherType
                       test/ffi004/theType
                       test/scripts/timeout
diff --git a/test/dsl002/test b/test/dsl002/test.in
similarity index 100%
rename from test/dsl002/test
rename to test/dsl002/test.in
diff --git a/test/dsl002/test014.idr b/test/dsl002/test014.idr
index 961ec1ee6..515cd9e93 100644
--- a/test/dsl002/test014.idr
+++ b/test/dsl002/test014.idr
@@ -64,6 +64,6 @@ readH fn = res (do let x = open fn Reading
                        else rputStrLn "Error")

 main : IO ()
-main = run (readH "test")
+main = run (readH "test.in")


diff --git a/test/effects001/test021.idr b/test/effects001/test021.idr
index 918d494d7..1774c28fd 100644
--- a/test/effects001/test021.idr
+++ b/test/effects001/test021.idr
@@ -31,7 +31,7 @@ readFileCount = readAcc []

 testFile : TestFileIO () ()
 testFile = do
-    Success <- open "testFile" Read
+    Success <- open "testFile.in" Read
              | (FError err) => do
                  putStrLn "Error!"
                  pure ()
diff --git a/test/effects001/testFile b/test/effects001/testFile.in
similarity index 100%
rename from test/effects001/testFile
rename to test/effects001/testFile.in
diff --git a/test/ffi011/ffi011 b/test/ffi011/ffi011.js
similarity index 100%
rename from test/ffi011/ffi011
rename to test/ffi011/ffi011.js
diff --git a/test/ffi011/run.sh b/test/ffi011/run.sh
index 69e7bc2ed..92ceda21e 100644
--- a/test/ffi011/run.sh
+++ b/test/ffi011/run.sh
@@ -1,4 +1,4 @@
 #!/usr/bin/env bash
 ${IDRIS:-idris} $@ ffi011.idr --interface -o lib.js
-node ./ffi011
+node ./ffi011.js
 rm -f *.ibc lib.js
diff --git a/test/ffi012/ffi012 b/test/ffi012/ffi012.js
similarity index 100%
rename from test/ffi012/ffi012
rename to test/ffi012/ffi012.js
diff --git a/test/pkg010/expected.out b/test/pkg010/expected.out
index fb60c4205..8f794f9b0 100644
--- a/test/pkg010/expected.out
+++ b/test/pkg010/expected.out
@@ -4,28 +4,26 @@ Uncaught error: user error (wrongopts.ipkg:4:1:
   | ^
 Invalid option `-total'

-Usage:  ([--nobanner] | [-q|--quiet] | [--ide-mode] | [--ide-mode-socket] |
-        [--client ARG] | [--log LEVEL] | [--logging-categories CATS] |
-        [--nobasepkgs] | [--noprelude] | [--nobuiltins] | [--check] |
-        [-o|--output FILE] | [--interface] | [--typeintype] | [--total] |
-        [--partial] | [--warnpartial] | [--warnreach] | [--warnipkg] |
-        [--nocoverage] | [--errorcontext] | [--info] | [--listlogcats] |
-        [--link] | [--listlibs] | [--libdir] | [--docdir] | [--include] | [--V2]
-        | [--V1] | [-V|--V0|--verbose] | [--ibcsubdir FILE] |
-        [-i|--idrispath ARG] | [--sourcepath ARG] | [--warn] |
-        [-p|--package ARG] | [--port PORT] | [--build IPKG] | [--install IPKG] |
-        [--repl IPKG] | [--clean IPKG] | [--mkdoc IPKG] | [--installdoc IPKG] |
-        [--checkpkg IPKG] | [--testpkg IPKG] | [--indent-with INDENT] |
-        [--indent-clause INDENT] | [--bytecode ARG] | [-S|--codegenonly] |
-        [-c|--compileonly] | [--dumpdefuns ARG] | [--dumpcases ARG] |
-        [--codegen TARGET] | [--portable-codegen TARGET] | [--cg-opt ARG] |
-        [-e|--eval EXPR] | [--execute] | [--exec EXPR] | [-X|--extension EXT] |
-        [--O3] | [--O2] | [--O1] | [--O0] | [--partial-eval] |
-        [--no-partial-eval] |
-        [--optimise-nat-like-types|--optimize-nat-like-types] |
-        [--no-optimise-nat-like-types|--no-optimize-nat-like-types] |
-        [-O|--level ARG] | [--target TRIPLE] | [--cpu CPU] | [--color|--colour]
-        | [--nocolor|--nocolour] | [--consolewidth WIDTH] | [--highlight] |
-        [--no-tactic-deprecation-warnings] |
-        [--allow-capitalized-pattern-variables]) [FILES] [-v|--version]
+Usage:  [--nobanner | (-q|--quiet) | --ide-mode | --ide-mode-socket |
+          --client ARG | --log LEVEL | --logging-categories CATS |
+          --nobasepkgs | --noprelude | --nobuiltins | --check |
+          (-o|--output FILE) | --interface | --typeintype | --total |
+          --partial | --warnpartial | --warnreach | --warnipkg | --nocoverage |
+          --errorcontext | --info | --listlogcats | --link | --listlibs |
+          --libdir | --docdir | --include | --V2 | --V1 | (-V|--V0|--verbose) |
+          --ibcsubdir FILE | (-i|--idrispath ARG) | --sourcepath ARG | --warn |
+          (-p|--package ARG) | --port PORT | --build IPKG | --install IPKG |
+          --repl IPKG | --clean IPKG | --mkdoc IPKG | --installdoc IPKG |
+          --checkpkg IPKG | --testpkg IPKG | --indent-with INDENT |
+          --indent-clause INDENT | --bytecode ARG | (-S|--codegenonly) |
+          (-c|--compileonly) | --dumpdefuns ARG | --dumpcases ARG |
+          --codegen TARGET | --portable-codegen TARGET | --cg-opt ARG |
+          (-e|--eval EXPR) | --execute | --exec EXPR | (-X|--extension EXT) |
+          --O3 | --O2 | --O1 | --O0 | --partial-eval | --no-partial-eval |
+          (--optimise-nat-like-types|--optimize-nat-like-types) |
+          (--no-optimise-nat-like-types|--no-optimize-nat-like-types) |
+          (-O|--level ARG) | --target TRIPLE | --cpu CPU | (--color|--colour) |
+          (--nocolor|--nocolour) | --consolewidth WIDTH | --highlight |
+          --no-tactic-deprecation-warnings |
+          --allow-capitalized-pattern-variables] [FILES] [-v|--version]
 )
diff --git a/test/st001/test001.idr b/test/st001/test001.idr
index 31c2ff1c9..ae451ca1a 100644
--- a/test/st001/test001.idr
+++ b/test/st001/test001.idr
@@ -40,7 +40,7 @@ readFileCount fh cnt =
 
 testFile : (ConsoleIO m, File m) => ST m () []
 testFile = with ST do 
-              Right fileHandle <- open "testFile" Read 
+              Right fileHandle <- open "testFile.in" Read
                     | Left ferr => do putStrLn (show ferr)
                                       pure ()
               count <- new 0
diff --git a/test/st001/testFile b/test/st001/testFile.in
similarity index 100%
rename from test/st001/testFile
rename to test/st001/testFile.in
diff --git a/test/st002/test002.idr b/test/st002/test002.idr
index b2745869f..3f6889378 100644
--- a/test/st002/test002.idr
+++ b/test/st002/test002.idr
@@ -40,7 +40,7 @@ readFileCount fh cnt =
 
 testFile : (ConsoleIO m, File m) => ST m () []
 testFile = with ST do
-              Right fileHandle <- open "testFile" Read 
+              Right fileHandle <- open "testFile.in" Read
                     | Left ferr => do putStrLn (show ferr)
                                       pure ()
               count <- new 0
diff --git a/test/st002/testFile b/test/st002/testFile.in
similarity index 100%
rename from test/st002/testFile
rename to test/st002/testFile.in
diff --git a/test/st003/test003.idr b/test/st003/test003.idr
index 9e194c9c4..275ed6c7d 100644
--- a/test/st003/test003.idr
+++ b/test/st003/test003.idr
@@ -7,7 +7,7 @@ import Control.ST.ImplicitCall
 
 testFile : (ConsoleIO m, File m) => ST m () []
 testFile = with ST do
-              Right str <- readFile "testFile" 
+              Right str <- readFile "testFile.in"
                   | Left ferr => do putStrLn (show ferr)
                                     pure ()
               putStrLn str
diff --git a/test/st003/testFile b/test/st003/testFile.in
similarity index 100%
rename from test/st003/testFile
rename to test/st003/testFile.in
