# $Id$
# Maintainer: Kyle Keen <keenerd@gmail.com>

pkgname=python-ipywidgets
pkgver=4.1.1
pkgrel=1
pkgdesc="IPython widgets for the Jupyter Notebook"
arch=('any')
url="https://github.com/ipython/ipywidgets"
license=('BSD')
depends=('python')
makedepends=('python-setuptools' 'npm' 'git')

# ipywidgets 5.2.X may be a joke, based on speed of releases
# and it seems to be because it doesn't do npm correctly

source=("$pkgname-$pkgver.tgz::https://github.com/ipython/ipywidgets/archive/$pkgver.tar.gz")
md5sums=('099e9b76c52839dc33604aad7a2f1a42')

build() {
  cd "$srcdir/ipywidgets-$pkgver"
  # needs node, downloads a lot of stuff
  python3 setup.py build
  # as of 5.something it doesn't automatically npm?
  # npm install seems very broken for tarball builds
  #cd jupyter-js-widgets
  #npm install
  #cd ..
  #cd widgetsnbextension
  #npm install
  #cd ..
}

package() {
  cd "$srcdir/ipywidgets-$pkgver"
  python3 setup.py install --prefix=/usr --root="$pkgdir" --optimize=0
  install -Dm644 COPYING.md "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}

