# $Id: PKGBUILD,v 1.4 2009/02/25 11:40:30 sergej Exp $
# Maintainer: Douglas Soares de Andrade <douglas@archlinux.org>
# Contributor: Sven Salzwedel <sven_salzwedel@web.de>

pkgname=glib2-docs
pkgver=2.18.4
pkgrel=1
pkgdesc="Documentation for glib2 to be used in devhelp"
arch=(i686 x86_64)
conflicts=('gobject2-docs')
replaces=('gobject2-docs')
url="http://library.gnome.org/devel/glib/stable/"
license=('custom')
options=('docs')
source=(ftp://ftp.gnome.org/pub/gnome/sources/glib/2.18/glib-${pkgver}.tar.bz2)
md5sums=('ec25ed261534d870141000ab73f1a2bf')

build () {
  # Set destination dir
  _docdir=$pkgdir/usr/share/gtk-doc/html

  # Create destination dirs
  install -d $_docdir/glib
  install -d $_docdir/gobject
  install -d $_docdir/gio
  install -d ${startdir}/pkg/usr/share/licenses/${pkgname}

  # Install documentation to destination
  install -m 644 \
    ${startdir}/src/glib-${pkgver}/docs/reference/glib/html/* \
    $_docdir/glib

  install -m 644 \
    ${startdir}/src/glib-${pkgver}/docs/reference/gobject/html/* \
    $_docdir/gobject

  install -m 644 \
    ${startdir}/src/glib-${pkgver}/docs/reference/gio/html/* \
    $_docdir/gio

  #install license
  install -m 644 \
    ${startdir}/src/glib-${pkgver}/docs/reference/COPYING \
    ${startdir}/pkg/usr/share/licenses/${pkgname}

  # Ugly hack to fix links in documents
  cd $_docdir/glib
  ln -s . glib
}

# vim:set ts=2 sw=2 et:
