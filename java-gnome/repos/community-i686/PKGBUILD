# Maintainer: Timm Preetz <timm@preetz.us>
pkgname=java-gnome
pkgver=4.0.11
pkgrel=1
pkgdesc="Java bindings to the GNOME platform (including gtk, glib and glade)"
arch=('i686' 'x86_64')
url="http://java-gnome.sourceforge.net"
license=('GPL')
depends=('gtk2>=2.12' 'java-runtime')
makedepends=('java-environment' 'junit')
provides=('libgnome-java' 'libgconf-java' 'libglade-java' 'libgtk-java')
conflicts=('libgnome-java' 'libgconf-java' 'libglade-java' 'libgtk-java')
replaces=('libgnome-java' 'libgconf-java' 'libglade-java' 'libgtk-java')
options=(!libtool)
source=(http://ftp.gnome.org/pub/gnome/sources/$pkgname/4.0/$pkgname-$pkgver.tar.gz java-gnome.devhelp)
md5sums=('682a9c0087ede269143bcbda7128e26f' '3c54fa6c00e7f589a2c7161160c04f5b')

build() {
  cd $startdir/src/$pkgname-$pkgver

  # adapt to the new build-system
  unset CLASSPATH
    
  if [ -d "/usr/lib/jvm/java-1.6.0-openjdk/" ]; then
    ./configure jdk=/usr/lib/jvm/java-1.6.0-openjdk/  --prefix=/usr || return 1
  else
    ./configure --prefix=/usr || return 1
  fi

  make || return 1
  DISPLAY= make -j1 doc || return 1
  make DESTDIR=$startdir/pkg install || return 1

  install -D -m 644 $srcdir/java-gnome.devhelp $pkgdir/usr/share/gtk-doc/html/java-gnome/java-gnome.devhelp
  cp -R $srcdir/java-gnome-$pkgver/doc/api/* $pkgdir/usr/share/gtk-doc/html/java-gnome
}

