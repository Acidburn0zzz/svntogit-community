# $Id$
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Maintainer: Ondrej Jirman <megous@megous.com>
# Contributor: mosra <mosra@centrum.cz>

pkgname=mingw32-binutils
pkgver=2.20.51
pkgrel=1
arch=(i686 x86_64)
url="http://sources.redhat.com/binutils"
pkgdesc="A set of programs to assemble and manipulate binary and object files (mingw)"
depends=('glibc' 'zlib')
license=(GPL)
source=(http://sourceforge.net/projects/mingw/files/MinGW/BaseSystem/GNU-Binutils/binutils-$pkgver/binutils-$pkgver-1-mingw32-src.tar.lzma)
md5sums=('ba146f301d94efce9972230ca0e3949e')

build() {
  tar --lzma -xf binutils-$pkgver-1-mingw32-src.tar.lzma

  cd $srcdir/binutils-$pkgver

  ./configure \
    --target=i486-mingw32 \
    --host=$CHOST \
    --build=$CHOST \
    --prefix=/usr \
    --disable-nls \
    --enable-shared || exit 1

  make || exit 1
  make install DESTDIR=$pkgdir || exit 1

  rm -rf $pkgdir/usr/lib
  rm -rf $pkgdir/usr/share/{info,man}
}
