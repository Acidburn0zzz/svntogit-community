# Maintainer: Sven-Hendrik Haase <sh@lutzhaase.com>
pkgname=spirv-tools
_gitver=4897864
pkgver=1.0.git1.${_gitver}
pkgrel=1
pkgdesc='Includes an assembler, binary module parser, disassembler, and validator for SPIR-V'
arch=('x86_64' 'i686')
url='https://github.com/KhronosGroup/SPIRV-Tools'
license=('BSD')
depends=('gcc-libs')
makedepends=('cmake' 'git' 'python')
source=("git://github.com/KhronosGroup/SPIRV-Tools.git#commit=${_gitver}")
sha256sums=('SKIP')

build() {
	cd "${srcdir}/SPIRV-Tools"

    mkdir build && cd build
	cmake .. -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=Release
	make
}

package() {
	cd "${srcdir}/SPIRV-Tools/build"
	make DESTDIR="${pkgdir}" install

    install -Dm644 ../LICENSE ${pkgdir}/usr/share/licenses/${pkgname}/LICENSE
}
